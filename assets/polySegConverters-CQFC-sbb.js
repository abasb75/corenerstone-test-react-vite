import me from"@icr/polyseg-wasm";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qn=Symbol("Comlink.proxy"),qa=Symbol("Comlink.endpoint"),Za=Symbol("Comlink.releaseProxy"),Ee=Symbol("Comlink.finalizer"),Ut=Symbol("Comlink.thrown"),Zn=e=>typeof e=="object"&&e!==null||typeof e=="function",Qa={canHandle:e=>Zn(e)&&e[qn],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Be(e,t),[n,[n]]},deserialize(e){return e.start(),rs(e)}},ts={canHandle:e=>Zn(e)&&Ut in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Qn=new Map([["proxy",Qa],["throw",ts]]);function es(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Be(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(a){if(!a||!a.data)return;if(!es(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:s,type:i,path:c}=Object.assign({path:[]},a.data),o=(a.data.argumentList||[]).map(lt);let u;try{const f=c.slice(0,-1).reduce((g,h)=>g[h],e),l=c.reduce((g,h)=>g[h],e);switch(i){case"GET":u=l;break;case"SET":f[c.slice(-1)[0]]=lt(a.data.value),u=!0;break;case"APPLY":u=l.apply(f,o);break;case"CONSTRUCT":{const g=new l(...o);u=cs(g)}break;case"ENDPOINT":{const{port1:g,port2:h}=new MessageChannel;Be(e,h),u=os(g,[g])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Ut]:0}}Promise.resolve(u).catch(f=>({value:f,[Ut]:0})).then(f=>{const[l,g]=Yt(f);t.postMessage(Object.assign(Object.assign({},l),{id:s}),g),i==="RELEASE"&&(t.removeEventListener("message",r),tr(t),Ee in e&&typeof e[Ee]=="function"&&e[Ee]())}).catch(f=>{const[l,g]=Yt({value:new TypeError("Unserializable return value"),[Ut]:0});t.postMessage(Object.assign(Object.assign({},l),{id:s}),g)})}),t.start&&t.start()}function ns(e){return e.constructor.name==="MessagePort"}function tr(e){ns(e)&&e.close()}function rs(e,t){const n=new Map;return e.addEventListener("message",function(a){const{data:s}=a;if(!s||!s.id)return;const i=n.get(s.id);if(i)try{i(s)}finally{n.delete(s.id)}}),Ie(e,n,[],t)}function Mt(e){if(e)throw new Error("Proxy has been released and is not useable")}function er(e){return Ot(e,new Map,{type:"RELEASE"}).then(()=>{tr(e)})}const Kt=new WeakMap,Ht="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Kt.get(e)||0)-1;Kt.set(e,t),t===0&&er(e)});function as(e,t){const n=(Kt.get(t)||0)+1;Kt.set(t,n),Ht&&Ht.register(e,t,e)}function ss(e){Ht&&Ht.unregister(e)}function Ie(e,t,n=[],r=function(){}){let a=!1;const s=new Proxy(r,{get(i,c){if(Mt(a),c===Za)return()=>{ss(s),er(e),t.clear(),a=!0};if(c==="then"){if(n.length===0)return{then:()=>s};const o=Ot(e,t,{type:"GET",path:n.map(u=>u.toString())}).then(lt);return o.then.bind(o)}return Ie(e,t,[...n,c])},set(i,c,o){Mt(a);const[u,f]=Yt(o);return Ot(e,t,{type:"SET",path:[...n,c].map(l=>l.toString()),value:u},f).then(lt)},apply(i,c,o){Mt(a);const u=n[n.length-1];if(u===qa)return Ot(e,t,{type:"ENDPOINT"}).then(lt);if(u==="bind")return Ie(e,t,n.slice(0,-1));const[f,l]=dn(o);return Ot(e,t,{type:"APPLY",path:n.map(g=>g.toString()),argumentList:f},l).then(lt)},construct(i,c){Mt(a);const[o,u]=dn(c);return Ot(e,t,{type:"CONSTRUCT",path:n.map(f=>f.toString()),argumentList:o},u).then(lt)}});return as(s,e),s}function is(e){return Array.prototype.concat.apply([],e)}function dn(e){const t=e.map(Yt);return[t.map(n=>n[0]),is(t.map(n=>n[1]))]}const nr=new WeakMap;function os(e,t){return nr.set(e,t),e}function cs(e){return Object.assign(e,{[qn]:!0})}function Yt(e){for(const[t,n]of Qn)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},nr.get(e)||[]]}function lt(e){switch(e.type){case"HANDLER":return Qn.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ot(e,t,n,r){return new Promise(a=>{const s=us();t.set(s,a),e.start&&e.start(),e.postMessage(Object.assign({id:s},n),r)})}function us(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var B;(function(e){e.ERROR_EVENT="CORNERSTONE_ERROR",e.CACHE_SIZE_EXCEEDED="CACHE_SIZE_EXCEEDED",e.IMAGE_LOAD_ERROR="IMAGE_LOAD_ERROR",e.CAMERA_MODIFIED="CORNERSTONE_CAMERA_MODIFIED",e.CAMERA_RESET="CORNERSTONE_CAMERA_RESET",e.VOI_MODIFIED="CORNERSTONE_VOI_MODIFIED",e.PRESET_MODIFIED="CORNERSTONE_VIEWPORT_RENDERING_PRESET_MODIFIED",e.DISPLAY_AREA_MODIFIED="CORNERSTONE_DISPLAY_AREA_MODIFIED",e.ELEMENT_DISABLED="CORNERSTONE_ELEMENT_DISABLED",e.ELEMENT_ENABLED="CORNERSTONE_ELEMENT_ENABLED",e.IMAGE_RENDERED="CORNERSTONE_IMAGE_RENDERED",e.IMAGE_VOLUME_MODIFIED="CORNERSTONE_IMAGE_VOLUME_MODIFIED",e.IMAGE_VOLUME_LOADING_COMPLETED="CORNERSTONE_IMAGE_VOLUME_LOADING_COMPLETED",e.IMAGE_LOADED="CORNERSTONE_IMAGE_LOADED",e.IMAGE_RETRIEVAL_STAGE="CORNERSTONE_IMAGE_RETRIEVAL_STAGE",e.IMAGE_LOAD_FAILED="CORNERSTONE_IMAGE_LOAD_FAILED",e.VOLUME_VIEWPORT_NEW_VOLUME="CORNERSTONE_VOLUME_VIEWPORT_NEW_VOLUME",e.VOLUME_LOADED="CORNERSTONE_VOLUME_LOADED",e.VOLUME_LOADED_FAILED="CORNERSTONE_VOLUME_LOADED_FAILED",e.IMAGE_CACHE_IMAGE_ADDED="CORNERSTONE_IMAGE_CACHE_IMAGE_ADDED",e.IMAGE_CACHE_IMAGE_REMOVED="CORNERSTONE_IMAGE_CACHE_IMAGE_REMOVED",e.VOLUME_CACHE_VOLUME_ADDED="CORNERSTONE_VOLUME_CACHE_VOLUME_ADDED",e.VOLUME_CACHE_VOLUME_REMOVED="CORNERSTONE_VOLUME_CACHE_VOLUME_REMOVED",e.STACK_NEW_IMAGE="CORNERSTONE_STACK_NEW_IMAGE",e.VOLUME_NEW_IMAGE="CORNERSTONE_VOLUME_NEW_IMAGE",e.PRE_STACK_NEW_IMAGE="CORNERSTONE_PRE_STACK_NEW_IMAGE",e.IMAGE_SPACING_CALIBRATED="CORNERSTONE_IMAGE_SPACING_CALIBRATED",e.VIEWPORT_NEW_IMAGE_SET="CORNERSTONE_VIEWPORT_NEW_IMAGE_SET",e.STACK_VIEWPORT_SCROLL="CORNERSTONE_STACK_VIEWPORT_SCROLL",e.STACK_SCROLL_OUT_OF_BOUNDS="STACK_SCROLL_OUT_OF_BOUNDS",e.GEOMETRY_CACHE_GEOMETRY_ADDED="CORNERSTONE_GEOMETRY_CACHE_GEOMETRY_ADDED",e.GEOMETRY_CACHE_GEOMETRY_REMOVED="CORNERSTONE_GEOMETRY_CACHE_GEOMETRY_REMOVED",e.VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS="VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS",e.VOLUME_VIEWPORT_SCROLL="VOLUME_VIEWPORT_SCROLL",e.CLIPPING_PLANES_UPDATED="CORNERSTONE_CLIPPING_PLANES_UPDATED",e.WEB_WORKER_PROGRESS="CORNERSTONE_WEB_WORKER_PROGRESS",e.COLORMAP_MODIFIED="CORNERSTONE_COLORMAP_MODIFIED",e.DYNAMIC_VOLUME_TIME_POINT_INDEX_CHANGED="DYNAMIC_VOLUME_TIME_POINT_INDEX_CHANGED",e.DYNAMIC_VOLUME_TIME_POINT_LOADED="DYNAMIC_VOLUME_TIME_POINT_LOADED",e.GEOMETRY_LOADED="GEOMETRY_LOADED",e.GEOMETRY_LOADED_FAILED="GEOMETRY_LOADED_FAILED"})(B||(B={}));var Xt;(function(e){e[e.FAR_REPLICATE=1]="FAR_REPLICATE",e[e.ADJACENT_REPLICATE=3]="ADJACENT_REPLICATE",e[e.SUBRESOLUTION=6]="SUBRESOLUTION",e[e.LOSSY=7]="LOSSY",e[e.FULL_RESOLUTION=8]="FULL_RESOLUTION"})(Xt||(Xt={}));class fs{constructor(){this.listeners={},this.debouncedListeners={}}reset(){this.listeners={},this.debouncedListeners={}}addEventListenerOnce(t,n){const r=a=>{this.removeEventListener(t,r),n.call(this,a)};this.addEventListener(t,r)}addEventListener(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].indexOf(n)===-1&&this.listeners[t].push(n)}addEventListenerDebounced(t,n,r){this.debouncedListeners[t]=this.debouncedListeners[t]||{};const a=this.debouncedListeners[t];if(!a[n]){const s=i=>{a[n]&&clearTimeout(a[n].timeoutId),a[n].timeoutId=setTimeout(()=>{n.call(this,i)},r)};a[n]={original:n,handle:s,timeoutId:null},this.addEventListener(t,s)}}removeEventListenerDebounced(t,n){var r;if((r=this.debouncedListeners[t])!=null&&r[n]){const a=this.debouncedListeners[t][n];this.removeEventListener(t,a.handle),clearTimeout(a.timeoutId),delete this.debouncedListeners[t][n]}}removeEventListener(t,n){if(!this.listeners[t])return;const r=this.listeners[t],a=r.length;for(let s=0;s<a;s++)if(r[s]===n){r.splice(s,1);return}}dispatchEvent(t){if(!this.listeners[t.type])return!t.defaultPrevented;const n=this.listeners[t.type].slice(),r=n.length;for(let a=0;a<r;a++)try{n[a].call(this,t)}catch(s){console.error(`error in event listener of type:  ${t.type}`,s)}return!t.defaultPrevented}}const H=new fs;function Z(e=H,t,n=null){if(!t)throw new Error("Event type was not defined");const r=new CustomEvent(t,{detail:n,cancelable:!0});return e==null?void 0:e.dispatchEvent(r)}var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ls(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var gs=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,a,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=r;a--!==0;){var i=s[a];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n},hs=rr(gs),mn=Object.prototype.toString,ar=function(t){var n=mn.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&mn.call(t.callee)==="[object Function]"),r},Oe,En;function ys(){if(En)return Oe;En=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=ar,a=Object.prototype.propertyIsEnumerable,s=!a.call({toString:null},"toString"),i=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(g){var h=g.constructor;return h&&h.prototype===g},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var g in window)try{if(!u["$"+g]&&t.call(window,g)&&window[g]!==null&&typeof window[g]=="object")try{o(window[g])}catch{return!0}}catch{return!0}return!1}(),l=function(g){if(typeof window>"u"||!f)return o(g);try{return o(g)}catch{return!1}};e=function(h){var y=h!==null&&typeof h=="object",p=n.call(h)==="[object Function]",d=r(h),C=y&&n.call(h)==="[object String]",v=[];if(!y&&!p&&!d)throw new TypeError("Object.keys called on a non-object");var m=i&&p;if(C&&h.length>0&&!t.call(h,0))for(var E=0;E<h.length;++E)v.push(String(E));if(d&&h.length>0)for(var O=0;O<h.length;++O)v.push(String(O));else for(var w in h)!(m&&w==="prototype")&&t.call(h,w)&&v.push(String(w));if(s)for(var T=l(h),S=0;S<c.length;++S)!(T&&c[S]==="constructor")&&t.call(h,c[S])&&v.push(c[S]);return v}}return Oe=e,Oe}var ps=Array.prototype.slice,ds=ar,On=Object.keys,Ft=On?function(t){return On(t)}:ys(),Cn=Object.keys;Ft.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return ds(r)?Cn(ps.call(r)):Cn(r)})}else Object.keys=Ft;return Object.keys||Ft};var ms=Ft,Es=Error,Os=EvalError,Cs=RangeError,vs=ReferenceError,sr=SyntaxError,ir=TypeError,ws=URIError,Ss=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;t[n]=a;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(t,n);if(i.value!==a||i.enumerable!==!0)return!1}return!0},vn=typeof Symbol<"u"&&Symbol,Ts=Ss,Ds=function(){return typeof vn!="function"||typeof Symbol!="function"||typeof vn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ts()},Ce={__proto__:null,foo:{}},_s=Object,xs=function(){return{__proto__:Ce}.foo===Ce.foo&&!(Ce instanceof _s)},Ls="Function.prototype.bind called on incompatible ",Ms=Object.prototype.toString,Ns=Math.max,Is="[object Function]",wn=function(t,n){for(var r=[],a=0;a<t.length;a+=1)r[a]=t[a];for(var s=0;s<n.length;s+=1)r[s+t.length]=n[s];return r},As=function(t,n){for(var r=[],a=n,s=0;a<t.length;a+=1,s+=1)r[s]=t[a];return r},Rs=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},ks=function(t){var n=this;if(typeof n!="function"||Ms.apply(n)!==Is)throw new TypeError(Ls+n);for(var r=As(arguments,1),a,s=function(){if(this instanceof a){var f=n.apply(this,wn(r,arguments));return Object(f)===f?f:this}return n.apply(t,wn(r,arguments))},i=Ns(0,n.length-r.length),c=[],o=0;o<i;o++)c[o]="$"+o;if(a=Function("binder","return function ("+Rs(c,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var u=function(){};u.prototype=n.prototype,a.prototype=new u,u.prototype=null}return a},Vs=ks,or=Function.prototype.bind||Vs,$s=Function.prototype.call,bs=Object.prototype.hasOwnProperty,Us=or,Fs=Us.call($s,bs),R,js=Es,Gs=Os,zs=Cs,Bs=vs,St=sr,wt=ir,Ps=ws,cr=Function,ve=function(e){try{return cr('"use strict"; return ('+e+").constructor;")()}catch{}},ht=Object.getOwnPropertyDescriptor;if(ht)try{ht({},"")}catch{ht=null}var we=function(){throw new wt},Ws=ht?function(){try{return arguments.callee,we}catch{try{return ht(arguments,"callee").get}catch{return we}}}():we,dt=Ds(),Ks=xs(),j=Object.getPrototypeOf||(Ks?function(e){return e.__proto__}:null),Ct={},Hs=typeof Uint8Array>"u"||!j?R:j(Uint8Array),yt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?R:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?R:ArrayBuffer,"%ArrayIteratorPrototype%":dt&&j?j([][Symbol.iterator]()):R,"%AsyncFromSyncIteratorPrototype%":R,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?R:Atomics,"%BigInt%":typeof BigInt>"u"?R:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?R:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?R:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?R:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":js,"%eval%":eval,"%EvalError%":Gs,"%Float32Array%":typeof Float32Array>"u"?R:Float32Array,"%Float64Array%":typeof Float64Array>"u"?R:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?R:FinalizationRegistry,"%Function%":cr,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?R:Int8Array,"%Int16Array%":typeof Int16Array>"u"?R:Int16Array,"%Int32Array%":typeof Int32Array>"u"?R:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":dt&&j?j(j([][Symbol.iterator]())):R,"%JSON%":typeof JSON=="object"?JSON:R,"%Map%":typeof Map>"u"?R:Map,"%MapIteratorPrototype%":typeof Map>"u"||!dt||!j?R:j(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?R:Promise,"%Proxy%":typeof Proxy>"u"?R:Proxy,"%RangeError%":zs,"%ReferenceError%":Bs,"%Reflect%":typeof Reflect>"u"?R:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?R:Set,"%SetIteratorPrototype%":typeof Set>"u"||!dt||!j?R:j(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?R:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":dt&&j?j(""[Symbol.iterator]()):R,"%Symbol%":dt?Symbol:R,"%SyntaxError%":St,"%ThrowTypeError%":Ws,"%TypedArray%":Hs,"%TypeError%":wt,"%Uint8Array%":typeof Uint8Array>"u"?R:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?R:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?R:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?R:Uint32Array,"%URIError%":Ps,"%WeakMap%":typeof WeakMap>"u"?R:WeakMap,"%WeakRef%":typeof WeakRef>"u"?R:WeakRef,"%WeakSet%":typeof WeakSet>"u"?R:WeakSet};if(j)try{null.error}catch(e){var Ys=j(j(e));yt["%Error.prototype%"]=Ys}var Xs=function e(t){var n;if(t==="%AsyncFunction%")n=ve("async function () {}");else if(t==="%GeneratorFunction%")n=ve("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=ve("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var a=e("%AsyncGenerator%");a&&j&&(n=j(a.prototype))}return yt[t]=n,n},Sn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_t=or,Jt=Fs,Js=_t.call(Function.call,Array.prototype.concat),qs=_t.call(Function.apply,Array.prototype.splice),Tn=_t.call(Function.call,String.prototype.replace),qt=_t.call(Function.call,String.prototype.slice),Zs=_t.call(Function.call,RegExp.prototype.exec),Qs=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ti=/\\(\\)?/g,ei=function(t){var n=qt(t,0,1),r=qt(t,-1);if(n==="%"&&r!=="%")throw new St("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new St("invalid intrinsic syntax, expected opening `%`");var a=[];return Tn(t,Qs,function(s,i,c,o){a[a.length]=c?Tn(o,ti,"$1"):i||s}),a},ni=function(t,n){var r=t,a;if(Jt(Sn,r)&&(a=Sn[r],r="%"+a[0]+"%"),Jt(yt,r)){var s=yt[r];if(s===Ct&&(s=Xs(r)),typeof s>"u"&&!n)throw new wt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:a,name:r,value:s}}throw new St("intrinsic "+t+" does not exist!")},ur=function(t,n){if(typeof t!="string"||t.length===0)throw new wt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new wt('"allowMissing" argument must be a boolean');if(Zs(/^%?[^%]*%?$/,t)===null)throw new St("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=ei(t),a=r.length>0?r[0]:"",s=ni("%"+a+"%",n),i=s.name,c=s.value,o=!1,u=s.alias;u&&(a=u[0],qs(r,Js([0,1],u)));for(var f=1,l=!0;f<r.length;f+=1){var g=r[f],h=qt(g,0,1),y=qt(g,-1);if((h==='"'||h==="'"||h==="`"||y==='"'||y==="'"||y==="`")&&h!==y)throw new St("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(o=!0),a+="."+g,i="%"+a+"%",Jt(yt,i))c=yt[i];else if(c!=null){if(!(g in c)){if(!n)throw new wt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ht&&f+1>=r.length){var p=ht(c,g);l=!!p,l&&"get"in p&&!("originalValue"in p.get)?c=p.get:c=c[g]}else l=Jt(c,g),c=c[g];l&&!o&&(yt[i]=c)}}return c},ri=ur,jt=ri("%Object.defineProperty%",!0)||!1;if(jt)try{jt({},"a",{value:1})}catch{jt=!1}var fr=jt,ai=ur,Gt=ai("%Object.getOwnPropertyDescriptor%",!0);if(Gt)try{Gt([],"length")}catch{Gt=null}var si=Gt,Dn=fr,ii=sr,mt=ir,_n=si,oi=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new mt("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new mt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new mt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new mt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new mt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new mt("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,o=!!_n&&_n(t,n);if(Dn)Dn(t,n,{configurable:i===null&&o?o.configurable:!i,enumerable:a===null&&o?o.enumerable:!a,value:r,writable:s===null&&o?o.writable:!s});else if(c||!a&&!s&&!i)t[n]=r;else throw new ii("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ae=fr,lr=function(){return!!Ae};lr.hasArrayLengthDefineBug=function(){if(!Ae)return null;try{return Ae([],"length",{value:1}).length!==1}catch{return!0}};var ci=lr,ui=ms,fi=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",li=Object.prototype.toString,gi=Array.prototype.concat,xn=oi,hi=function(e){return typeof e=="function"&&li.call(e)==="[object Function]"},gr=ci(),yi=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!hi(r)||!r())return}gr?xn(e,t,n,!0):xn(e,t,n)},hr=function(e,t){var n=arguments.length>2?arguments[2]:{},r=ui(t);fi&&(r=gi.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)yi(e,r[a],t[r[a]],n[r[a]])};hr.supportsDescriptors=!!gr;var yr=hr,zt={exports:{}};typeof self<"u"?zt.exports=self:typeof window<"u"?zt.exports=window:zt.exports=Function("return this")();var pr=zt.exports,pi=pr,dr=function(){return typeof K!="object"||!K||K.Math!==Math||K.Array!==Array?pi:K},di=yr,mi=dr,Ei=function(){var t=mi();if(di.supportsDescriptors){var n=Object.getOwnPropertyDescriptor(t,"globalThis");(!n||n.configurable&&(n.enumerable||!n.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Oi=yr,Ci=pr,mr=dr,vi=Ei,wi=mr(),Er=function(){return wi};Oi(Er,{getPolyfill:mr,implementation:Ci,shim:vi});var Si=Er,Ti=rr(Si);const X=Ti(),Or={vtkObject:()=>null};function J(e){if(e==null||e.isA)return e;if(!e.vtkClass)return X.console&&X.console.error&&X.console.error("Invalid VTK object"),null;const t=Or[e.vtkClass];if(!t)return X.console&&X.console.error&&X.console.error(`No vtk class found for Object of type ${e.vtkClass}`),null;const n={...e};Object.keys(n).forEach(a=>{n[a]&&typeof n[a]=="object"&&n[a].vtkClass&&(n[a]=J(n[a]))});const r=t(n);return r&&r.modified&&r.modified(),r}function Di(e,t){Or[e]=t}J.register=Di;class Se extends Array{push(){for(let t=0;t<arguments.length;t++)this.includes(arguments[t])||super.push(arguments[t]);return this.length}}let Re=0;const Cr=Symbol("void");function _i(){return Re}const vr={};function gt(){}const xi=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];xi.forEach(e=>{vr[e]=gt});X.console=console.hasOwnProperty("log")?console:vr;const ct={debug:gt,error:X.console.error||gt,info:X.console.info||gt,log:X.console.log||gt,warn:X.console.warn||gt};function wr(e,t){ct[e]&&(ct[e]=t||gt)}function Sr(){ct.log(...arguments)}function Tr(){ct.info(...arguments)}function Zt(){ct.debug(...arguments)}function F(){ct.error(...arguments)}function se(){ct.warn(...arguments)}const Ln={};function Dr(e){Ln[e]||(ct.error(e),Ln[e]=!0)}const z=Object.create(null);z.Float32Array=Float32Array;z.Float64Array=Float64Array;z.Uint8Array=Uint8Array;z.Int8Array=Int8Array;z.Uint16Array=Uint16Array;z.Int16Array=Int16Array;z.Uint32Array=Uint32Array;z.Int32Array=Int32Array;z.Uint8ClampedArray=Uint8ClampedArray;try{z.BigInt64Array=BigInt64Array,z.BigUint64Array=BigUint64Array}catch{}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new(z[e]||Float64Array)(...n)}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(z[e]||Float64Array).from(...n)}function ce(e){return e.charAt(0).toUpperCase()+e.slice(1)}function U(e){return ce(e[0]==="_"?e.slice(1):e)}function _r(e){return e.charAt(0).toLowerCase()+e.slice(1)}function xr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let a=Number(e),s="B";for(;a>n;)a/=n,s=r.pop();return`${a.toFixed(t)} ${s}`}function Lr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=e;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)}function Mr(e){Object.keys(e).forEach(t=>{Array.isArray(e[t])&&(e[t]=[].concat(e[t]))})}function Li(e){return Object.values(z).some(t=>e instanceof t)}function Mi(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}function Ni(e,t){return Object.keys(e).find(n=>e[n]===t)}function Nr(e){return e&&e.isA?e.getState():e}function Pe(e){setTimeout(e,0)}function Ir(e,t){const n=performance.now();e.finally(()=>{const r=performance.now()-n;t(r)})}function ue(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mr(t);const n=[];if(Number.isInteger(t.mtime)||(t.mtime=++Re),!("classHierarchy"in t))t.classHierarchy=new Se("vtkObject");else if(!(t.classHierarchy instanceof Se)){const s=new Se;for(let i=0;i<t.classHierarchy.length;i++)s.push(t.classHierarchy[i]);t.classHierarchy=s}function r(s){n[s]=null}function a(s){function i(){r(s)}return Object.freeze({unsubscribe:i})}return e.isDeleted=()=>!!t.deleted,e.modified=s=>{if(t.deleted){F("instance deleted - cannot call any method");return}s&&s<e.getMTime()||(t.mtime=++Re,n.forEach(i=>i&&i(e)))},e.onModified=s=>{if(t.deleted)return F("instance deleted - cannot call any method"),null;const i=n.length;return n.push(s),a(i)},e.getMTime=()=>t.mtime,e.isA=s=>{let i=t.classHierarchy.length;for(;i--;)if(t.classHierarchy[i]===s)return!0;return!1},e.getClassName=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-s]},e.set=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=!1;return Object.keys(s).forEach(u=>{const f=c?null:e[`set${ce(u)}`];f&&Array.isArray(s[u])&&f.length>1?o=f(...s[u])||o:f?o=f(s[u])||o:(["mtime"].indexOf(u)===-1&&!i&&se(`Warning: Set value to model directly ${u}, ${s[u]}`),o=t[u]!==s[u]||o,t[u]=s[u])}),o},e.get=function(){for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];if(!i.length)return t;const o={};return i.forEach(u=>{o[u]=t[u]}),o},e.getReferenceByName=s=>t[s],e.delete=()=>{Object.keys(t).forEach(s=>delete t[s]),n.forEach((s,i)=>r(i)),t.deleted=!0},e.getState=()=>{if(t.deleted)return null;const s={...t,vtkClass:e.getClassName()};Object.keys(s).forEach(c=>{s[c]===null||s[c]===void 0||c[0]==="_"?delete s[c]:s[c].isA?s[c]=s[c].getState():Array.isArray(s[c])?s[c]=s[c].map(Nr):Li(s[c])&&(s[c]=Array.from(s[c]))});const i={};return Object.keys(s).sort().forEach(c=>{i[c]=s[c]}),i.mtime&&delete i.mtime,i},e.shallowCopy=function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==e.getClassName())throw new Error(`Cannot ShallowCopy ${s.getClassName()} into ${e.getClassName()}`);const c=s.get(),o=Object.keys(t).sort();Object.keys(c).sort().forEach(f=>{const l=o.indexOf(f);l===-1?i&&Zt(`add ${f} in shallowCopy`):o.splice(l,1),t[f]=c[f]}),o.length&&i&&Zt(`Untouched keys: ${o.join(", ")}`),e.modified()},e.toJSON=function(){return e.getState()},e}const Ii={object(e,t,n){return function(){return{...t[n.name]}}}};function xt(e,t,n){n.forEach(r=>{if(typeof r=="object"){const a=Ii[r.type];a?e[`get${U(r.name)}`]=a(e,t,r):e[`get${U(r.name)}`]=()=>t[r.name]}else e[`get${U(r)}`]=()=>t[r]})}const Ar={enum(e,t,n){const r=`_on${U(n.name)}Changed`;return a=>{var s;if(typeof a=="string"){if(n.enum[a]!==void 0)return t[n.name]!==n.enum[a]?(t[n.name]=n.enum[a],e.modified(),!0):!1;throw F(`Set Enum with invalid argument ${n}, ${a}`),new RangeError("Set Enum with invalid string argument")}if(typeof a=="number"){if(t[n.name]!==a){if(Object.keys(n.enum).map(i=>n.enum[i]).indexOf(a)!==-1){const i=t[n.name];return t[n.name]=a,(s=t[r])==null||s.call(t,e,t,a,i),e.modified(),!0}throw F(`Set Enum outside numeric range ${n}, ${a}`),new RangeError("Set Enum outside numeric range")}return!1}throw F(`Set Enum with invalid argument (String/Number) ${n}, ${a}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(e,t,n){var a;((a=n.params)==null?void 0:a.length)===1&&se('Setter of type "object" with a single "param" field is not supported');const r=`_on${U(n.name)}Changed`;return function(){var u,f;for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];let o;if(i.length>1&&((u=n.params)!=null&&u.length)?o=n.params.reduce((l,g,h)=>Object.assign(l,{[g]:i[h]}),{}):o=i[0],!hs(t[n.name],o)){const l=t[n.name];return t[n.name]=o,(f=t[r])==null||f.call(t,e,t,o,l),e.modified(),!0}return!1}}};function Mn(e){if(typeof e=="object"){const t=Ar[e.type];if(t)return(n,r)=>t(n,r,e);throw F(`No setter for field ${e}`),new TypeError("No setter for field")}return function(n,r){const a=`_on${U(e)}Changed`;return function(i){var c;if(r.deleted)return F("instance deleted - cannot call any method"),!1;if(r[e]!==i){const o=r[e.name];return r[e]=i,(c=r[a])==null||c.call(r,n,r,i,o),n.modified(),!0}return!1}}}function fe(e,t,n){n.forEach(r=>{typeof r=="object"?e[`set${U(r.name)}`]=Mn(r)(e,t):e[`set${U(r)}`]=Mn(r)(e,t)})}function le(e,t,n){xt(e,t,n),fe(e,t,n)}function We(e,t,n){n.forEach(r=>{e[`get${U(r)}`]=()=>t[r]?Array.from(t[r]):t[r],e[`get${U(r)}ByReference`]=()=>t[r]})}function Ke(e,t,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(s=>{if(t[s]&&r&&t[s].length!==r)throw new RangeError(`Invalid initial number of values for array (${s})`);const i=`_on${U(s)}Changed`;e[`set${U(s)}`]=function(){var h;if(t.deleted)return F("instance deleted - cannot call any method"),!1;for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];let f=o,l,g=!1;if(f.length===1&&(f[0]==null||f[0].length>=0)&&(f=f[0],g=!0),f==null)l=t[s]!==f;else{if(r&&f.length!==r)if(f.length<r&&a!==void 0)for(f=Array.from(f),g=!1;f.length<r;)f.push(a);else throw new RangeError(`Invalid number of values for array setter (${s})`);l=t[s]==null||t[s].length!==f.length;for(let y=0;!l&&y<f.length;++y)l=t[s][y]!==f[y];l&&g&&(f=Array.from(f))}if(l){const y=t[s.name];t[s]=f,(h=t[i])==null||h.call(t,e,t,f,y),e.modified()}return l},e[`set${U(s)}From`]=c=>{const o=t[s];c.forEach((u,f)=>{o[f]=u})}})}function Rr(e,t,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;We(e,t,n),Ke(e,t,n,r,a)}function kr(e,t,n){for(let r=0;r<n.length;r++){const a=n[r];t[a]!==void 0&&(t[`_${a}`]=t[a],delete t[a])}}function He(e,t,n,r){t.inputData?t.inputData=t.inputData.map(J):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(J):t.inputConnection=[],t.output?t.output=t.output.map(J):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(J):t.inputArrayToProcess=[],t.numberOfInputs=n;function a(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(t.deleted){F("instance deleted - cannot call any method");return}if(y>=t.numberOfInputs){F(`algorithm ${e.getClassName()} only has ${t.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(t.inputData[y]!==h||t.inputConnection[y])&&(t.inputData[y]=h,t.inputConnection[y]=null,e.modified&&e.modified())}function s(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.inputConnection[h]&&(t.inputData[h]=t.inputConnection[h]()),t.inputData[h]}function i(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(t.deleted){F("instance deleted - cannot call any method");return}if(y>=t.numberOfInputs){let p=`algorithm ${e.getClassName()} only has `;p+=`${t.numberOfInputs}`,p+=" input ports. To add more input ports, use addInputConnection()",F(p);return}t.inputData[y]=null,t.inputConnection[y]=h}function c(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.inputConnection[h]}function o(){let h=t.numberOfInputs;for(;h&&!t.inputData[h-1]&&!t.inputConnection[h-1];)h--;return h===t.numberOfInputs&&t.numberOfInputs++,h}function u(h){if(t.deleted){F("instance deleted - cannot call any method");return}i(h,o())}function f(h){if(t.deleted){F("instance deleted - cannot call any method");return}a(h,o())}function l(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.deleted?(F("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[h])}e.shouldUpdate=()=>{var d,C;const h=e.getMTime();let y=1/0,p=r;for(;p--;){if(!t.output[p]||t.output[p].isDeleted())return!0;const v=t.output[p].getMTime();if(v<h)return!0;v<y&&(y=v)}for(p=t.numberOfInputs;p--;)if((d=t.inputConnection[p])!=null&&d.filter.shouldUpdate()||((C=e.getInputData(p))==null?void 0:C.getMTime())>y)return!0;return!1};function g(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const y=()=>l(h);return y.filter=e,y}if(t.numberOfInputs){let h=t.numberOfInputs;for(;h--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=i,e.addInputData=f,e.addInputConnection=u,e.getInputData=s,e.getInputConnection=c}r&&(e.getOutputData=l,e.getOutputPort=g),e.update=()=>{const h=[];if(t.numberOfInputs){let y=0;for(;y<t.numberOfInputs;)h[y]=e.getInputData(y),y++}e.shouldUpdate()&&e.requestData&&e.requestData(h,t.output)},e.getNumberOfInputPorts=()=>t.numberOfInputs,e.getNumberOfOutputPorts=()=>r||t.output.length,e.getInputArrayToProcess=h=>{const y=t.inputArrayToProcess[h],p=t.inputData[h];return y&&p?p[`get${y.fieldAssociation}`]().getArray(y.arrayName):null},e.setInputArrayToProcess=function(h,y,p){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;t.inputArrayToProcess.length<h;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[h]={arrayName:y,fieldAssociation:p,attributeType:d}}}const Ye=Symbol("Event abort");function Vr(e,t,n){const r=[],a=e.delete;let s=1;function i(u){for(let f=0;f<r.length;++f){const[l]=r[f];if(l===u){r.splice(f,1);return}}}function c(u){function f(){i(u)}return Object.freeze({unsubscribe:f})}function o(){if(t.deleted){F("instance deleted - cannot call any method");return}const u=r.slice();for(let f=0;f<u.length;++f){const[,l,g]=u[f];if(l){if(g<0)setTimeout(()=>l.apply(e,arguments),1-g);else if(l.apply(e,arguments)===Ye)break}}}e[`invoke${U(n)}`]=o,e[`on${U(n)}`]=function(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!u.apply)return console.error(`Invalid callback for event ${n}`),null;if(t.deleted)return F("instance deleted - cannot call any method"),null;const l=s++;return r.push([l,u,f]),r.sort((g,h)=>h[2]-g[2]),c(l)},e.delete=()=>{a(),r.forEach(u=>{let[f]=u;return i(f)})}}function ge(e,t){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={},s={};return e(s,a,r),Object.freeze(s)};return t&&J.register(t,n),n}function $r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.filter(i=>!!i).map(i=>i(...a))}}function Xe(e){return e&&e.isA&&e.isA("vtkObject")}function Qt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Xe(e)){if(r.indexOf(e)>=0)return n;r.push(e);const a=t(e);a!==void 0&&n.push(a);const s=e.get();Object.keys(s).forEach(i=>{const c=s[i];Array.isArray(c)?c.forEach(o=>{Qt(o,t,n,r)}):Qt(c,t,n,r)})}return n}function br(e,t,n){var r=this;let a;const s=function(){for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];const u=r,f=()=>{a=null,n||e.apply(u,c)},l=n&&!a;clearTimeout(a),a=setTimeout(f,t),l&&e.apply(u,c)};return s.cancel=()=>clearTimeout(a),s}function Ur(e,t){let n=!1,r=null;function a(){n=!1,r!==null&&(s(...r),r=null)}function s(){for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];if(n){r=c;return}n=!0,e(...c),setTimeout(a,t)}return s}function Je(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=(r,a)=>{t.keystore[r]=a},e.getKey=r=>t.keystore[r],e.getAllKeys=()=>Object.keys(t.keystore),e.deleteKey=r=>delete t.keystore[r],e.clearKeystore=()=>e.getAllKeys().forEach(r=>delete t.keystore[r])}let Ai=1;const Nt="__root__";function Fr(e,t){Je(e,t);const n=e.delete;t.proxyId=`${Ai++}`,t.ui=JSON.parse(JSON.stringify(t.ui||[])),xt(e,t,["proxyId","proxyGroup","proxyName"]),le(e,t,["proxyManager"]);const r={},a={};function s(u,f){a[f]||(a[f]=[]);const l=a[f];for(let g=0;g<u.length;g++)l.push(u[g].name),r[u[g].name]=u[g],u[g].children&&u[g].children.length&&s(u[g].children,u[g].name)}s(t.ui,Nt),e.updateUI=u=>{t.ui=JSON.parse(JSON.stringify(u||[])),Object.keys(r).forEach(f=>delete r[f]),Object.keys(a).forEach(f=>delete a[f]),s(t.ui,Nt),e.modified()};function i(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt;return a[u]}e.updateProxyProperty=(u,f)=>{const l=r[u];l?Object.assign(l,f):r[u]={...f}},e.activate=()=>{if(t.proxyManager){const u=`setActive${U(e.getProxyGroup().slice(0,-1))}`;t.proxyManager[u]&&t.proxyManager[u](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=(u,f)=>{f in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[f]=[]),t.propertyLinkSubscribers[f].push(u)},e.gcPropertyLinks=u=>{const f=t.propertyLinkSubscribers[u]||[];for(;f.length;)f.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.propertyLinkMap[u])return t.propertyLinkMap[u];let l=null;const g=[];let h=0,y=!1;function p(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(y)return null;const w=[];let T=null;for(h=g.length;h--;){const D=g[h];D.instance===E?T=D:w.push(D)}if(!T)return null;const S=T.instance[`get${U(T.propertyName)}`]();if(!Mi(S,l)||O){for(l=S,y=!0;w.length;){const D=w.pop();D.instance.set({[D.propertyName]:l})}y=!1}return t.propertyLinkMap[u].persistent&&(t.propertyLinkMap[u].value=S),S}function d(E,O){const w=[];for(h=g.length;h--;){const T=g[h];T.instance===E&&(T.propertyName===O||O===void 0)&&(T.subscription.unsubscribe(),w.push(h))}for(;w.length;)g.splice(w.pop(),1)}function C(E,O){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const T=E.onModified(p),S=g[0];return g.push({instance:E,propertyName:O,subscription:T}),w&&(t.propertyLinkMap[u].persistent&&t.propertyLinkMap[u].value!==void 0?E.set({[O]:t.propertyLinkMap[u].value}):S&&p(S.instance,!0)),{unsubscribe:()=>d(E,O)}}function v(){for(;g.length;)g.pop().subscription.unsubscribe()}const m={bind:C,unbind:d,unsubscribe:v,persistent:f};return t.propertyLinkMap[u]=m,m};function c(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt;const f=[],l=t.proxyId,g=i(u)||[];for(let h=0;h<g.length;h++){const y=g[h],p=e[`get${U(y)}`],d=p?p():void 0,C={id:l,name:y,value:d},v=c(y);v.length&&(C.children=v),f.push(C)}return f}e.listPropertyNames=()=>c().map(u=>u.name),e.getPropertyByName=u=>c().find(f=>f.name===u),e.getPropertyDomainByName=u=>(r[u]||{}).domain,e.getProxySection=()=>({id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:c()}),e.delete=()=>{const u=Object.keys(t.propertyLinkMap);let f=u.length;for(;f--;)t.propertyLinkMap[u[f]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},e.getState=()=>null;function o(){if(t.links)for(let u=0;u<t.links.length;u++){const{link:f,property:l,persistent:g,updateOnBind:h,type:y}=t.links[u];if(y==="application"){const p=t.proxyManager.getPropertyLink(f,g);e.registerPropertyLinkForGC(p,"application"),p.bind(e,l,h)}}}Pe(o)}function jr(e,t,n){const r=e.delete,a=[],s=Object.keys(n);let i=s.length;for(;i--;){const c=s[i],{modelKey:o,property:u,modified:f=!0}=n[c],l=U(u),g=U(c);e[`get${g}`]=t[o][`get${l}`],e[`set${g}`]=t[o][`set${l}`],f&&a.push(t[o].onModified(e.modified))}e.delete=()=>{for(;a.length;)a.pop().unsubscribe();r()}}function Gr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};t.this=e;function a(c){const o=Object.keys(c);let u=o.length;for(;u--;){const f=o[u];t[f].set(c[f])}}const s=Object.keys(r);let i=s.length;for(;i--;){const c=s[i];t[c]=r[c];const o=n[c];e[`set${U(c)}`]=u=>{if(u!==t[c]){t[c]=u;const f=o[u];a(f),e.modified()}}}s.length&&xt(e,t,s)}const Nn=10,In=40,An=800;function zr(e){let t=0,n=0,r=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*Nn,a=n*Nn,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||a)&&e.deltaMode&&(e.deltaMode===1?(r*=In,a*=In):(r*=An,a*=An)),r&&!t&&(t=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:t,spinY:n||t,pixelX:r,pixelY:a||r}}var L={algo:He,capitalize:ce,chain:$r,debounce:br,enumToString:Ni,event:Vr,EVENT_ABORT:Ye,formatBytesToProperUnit:xr,formatNumbersWithThousandSeparator:Lr,get:xt,getArray:We,getCurrentGlobalMTime:_i,getStateArrayMapFunc:Nr,isVtkObject:Xe,keystore:Je,measurePromiseExecution:Ir,moveToProtected:kr,newInstance:ge,newTypedArray:ie,newTypedArrayFrom:oe,normalizeWheel:zr,obj:ue,proxy:Fr,proxyPropertyMapping:jr,proxyPropertyState:Gr,safeArrays:Mr,set:fe,setArray:Ke,setGet:le,setGetArray:Rr,setImmediate:Pe,setLoggerFunction:wr,throttle:Ur,traverseInstanceTree:Qt,TYPED_ARRAYS:z,uncapitalize:_r,VOID:Cr,vtkDebugMacro:Zt,vtkErrorMacro:F,vtkInfoMacro:Tr,vtkLogMacro:Sr,vtkOnceErrorMacro:Dr,vtkWarningMacro:se,objectSetterMap:Ar},Br=Object.freeze({__proto__:null,VOID:Cr,setLoggerFunction:wr,vtkLogMacro:Sr,vtkInfoMacro:Tr,vtkDebugMacro:Zt,vtkErrorMacro:F,vtkWarningMacro:se,vtkOnceErrorMacro:Dr,TYPED_ARRAYS:z,newTypedArray:ie,newTypedArrayFrom:oe,capitalize:ce,_capitalize:U,uncapitalize:_r,formatBytesToProperUnit:xr,formatNumbersWithThousandSeparator:Lr,setImmediateVTK:Pe,measurePromiseExecution:Ir,obj:ue,get:xt,set:fe,setGet:le,getArray:We,setArray:Ke,setGetArray:Rr,moveToProtected:kr,algo:He,EVENT_ABORT:Ye,event:Vr,newInstance:ge,chain:$r,isVtkObject:Xe,traverseInstanceTree:Qt,debounce:br,throttle:Ur,keystore:Je,proxy:Fr,proxyPropertyMapping:jr,proxyPropertyState:Gr,normalizeWheel:zr,default:L});const Ri={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},he={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},ki=he.FLOAT;var Pr={DefaultDataType:ki,DataTypeByteSize:Ri,VtkDataTypes:he},qe={exports:{}};qe.exports;(function(e){(function(t,n,r){function a(o){var u=this,f=c();u.next=function(){var l=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=l-(u.c=l|0)},u.c=1,u.s0=f(" "),u.s1=f(" "),u.s2=f(" "),u.s0-=f(o),u.s0<0&&(u.s0+=1),u.s1-=f(o),u.s1<0&&(u.s1+=1),u.s2-=f(o),u.s2<0&&(u.s2+=1),f=null}function s(o,u){return u.c=o.c,u.s0=o.s0,u.s1=o.s1,u.s2=o.s2,u}function i(o,u){var f=new a(o),l=u&&u.state,g=f.next;return g.int32=function(){return f.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,l&&(typeof l=="object"&&s(l,f),g.state=function(){return s(f,{})}),g}function c(){var o=4022871197,u=function(f){f=String(f);for(var l=0;l<f.length;l++){o+=f.charCodeAt(l);var g=.02519603282416938*o;o=g>>>0,g-=o,g*=o,o=g>>>0,g-=o,o+=g*4294967296}return(o>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:this.alea=i})(K,e)})(qe);var Vi=qe.exports,Ze={exports:{}};Ze.exports;(function(e){(function(t,n,r){function a(c){var o=this,u="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var l=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^l^l>>>8},c===(c|0)?o.x=c:u+=c;for(var f=0;f<u.length+64;f++)o.x^=u.charCodeAt(f)|0,o.next()}function s(c,o){return o.x=c.x,o.y=c.y,o.z=c.z,o.w=c.w,o}function i(c,o){var u=new a(c),f=o&&o.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var g=u.next()>>>11,h=(u.next()>>>0)/4294967296,y=(g+h)/(1<<21);while(y===0);return y},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&s(f,u),l.state=function(){return s(u,{})}),l}n&&n.exports?n.exports=i:this.xor128=i})(K,e)})(Ze);var $i=Ze.exports,Qe={exports:{}};Qe.exports;(function(e){(function(t,n,r){function a(c){var o=this,u="";o.next=function(){var l=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(l^l<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,c===(c|0)?o.x=c:u+=c;for(var f=0;f<u.length+64;f++)o.x^=u.charCodeAt(f)|0,f==u.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function s(c,o){return o.x=c.x,o.y=c.y,o.z=c.z,o.w=c.w,o.v=c.v,o.d=c.d,o}function i(c,o){var u=new a(c),f=o&&o.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var g=u.next()>>>11,h=(u.next()>>>0)/4294967296,y=(g+h)/(1<<21);while(y===0);return y},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&s(f,u),l.state=function(){return s(u,{})}),l}n&&n.exports?n.exports=i:this.xorwow=i})(K,e)})(Qe);var bi=Qe.exports,tn={exports:{}};tn.exports;(function(e){(function(t,n,r){function a(c){var o=this;o.next=function(){var f=o.x,l=o.i,g,h;return g=f[l],g^=g>>>7,h=g^g<<24,g=f[l+1&7],h^=g^g>>>10,g=f[l+3&7],h^=g^g>>>3,g=f[l+4&7],h^=g^g<<7,g=f[l+7&7],g=g^g<<13,h^=g^g<<9,f[l]=h,o.i=l+1&7,h};function u(f,l){var g,h=[];if(l===(l|0))h[0]=l;else for(l=""+l,g=0;g<l.length;++g)h[g&7]=h[g&7]<<15^l.charCodeAt(g)+h[g+1&7]<<13;for(;h.length<8;)h.push(0);for(g=0;g<8&&h[g]===0;++g);for(g==8?h[7]=-1:h[g],f.x=h,f.i=0,g=256;g>0;--g)f.next()}u(o,c)}function s(c,o){return o.x=c.x.slice(),o.i=c.i,o}function i(c,o){c==null&&(c=+new Date);var u=new a(c),f=o&&o.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var g=u.next()>>>11,h=(u.next()>>>0)/4294967296,y=(g+h)/(1<<21);while(y===0);return y},l.int32=u.next,l.quick=l,f&&(f.x&&s(f,u),l.state=function(){return s(u,{})}),l}n&&n.exports?n.exports=i:this.xorshift7=i})(K,e)})(tn);var Ui=tn.exports,en={exports:{}};en.exports;(function(e){(function(t,n,r){function a(c){var o=this;o.next=function(){var f=o.w,l=o.X,g=o.i,h,y;return o.w=f=f+1640531527|0,y=l[g+34&127],h=l[g=g+1&127],y^=y<<13,h^=h<<17,y^=y>>>15,h^=h>>>12,y=l[g]=y^h,o.i=g,y+(f^f>>>16)|0};function u(f,l){var g,h,y,p,d,C=[],v=128;for(l===(l|0)?(h=l,l=null):(l=l+"\0",h=0,v=Math.max(v,l.length)),y=0,p=-32;p<v;++p)l&&(h^=l.charCodeAt((p+32)%l.length)),p===0&&(d=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(d=d+1640531527|0,g=C[p&127]^=h+d,y=g==0?y+1:0);for(y>=128&&(C[(l&&l.length||0)&127]=-1),y=127,p=4*128;p>0;--p)h=C[y+34&127],g=C[y=y+1&127],h^=h<<13,g^=g<<17,h^=h>>>15,g^=g>>>12,C[y]=h^g;f.w=d,f.X=C,f.i=y}u(o,c)}function s(c,o){return o.i=c.i,o.w=c.w,o.X=c.X.slice(),o}function i(c,o){c==null&&(c=+new Date);var u=new a(c),f=o&&o.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var g=u.next()>>>11,h=(u.next()>>>0)/4294967296,y=(g+h)/(1<<21);while(y===0);return y},l.int32=u.next,l.quick=l,f&&(f.X&&s(f,u),l.state=function(){return s(u,{})}),l}n&&n.exports?n.exports=i:this.xor4096=i})(K,e)})(en);var Fi=en.exports,nn={exports:{}};nn.exports;(function(e){(function(t,n,r){function a(c){var o=this,u="";o.next=function(){var l=o.b,g=o.c,h=o.d,y=o.a;return l=l<<25^l>>>7^g,g=g-h|0,h=h<<24^h>>>8^y,y=y-l|0,o.b=l=l<<20^l>>>12^g,o.c=g=g-h|0,o.d=h<<16^g>>>16^y,o.a=y-l|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,c===Math.floor(c)?(o.a=c/4294967296|0,o.b=c|0):u+=c;for(var f=0;f<u.length+20;f++)o.b^=u.charCodeAt(f)|0,o.next()}function s(c,o){return o.a=c.a,o.b=c.b,o.c=c.c,o.d=c.d,o}function i(c,o){var u=new a(c),f=o&&o.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var g=u.next()>>>11,h=(u.next()>>>0)/4294967296,y=(g+h)/(1<<21);while(y===0);return y},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&s(f,u),l.state=function(){return s(u,{})}),l}n&&n.exports?n.exports=i:this.tychei=i})(K,e)})(nn);var ji=nn.exports,Wr={exports:{}},Gi={},zi=Object.freeze({__proto__:null,default:Gi}),Bi=ls(zi);(function(e){(function(t,n,r){var a=256,s=6,i=52,c="random",o=r.pow(a,s),u=r.pow(2,i),f=u*2,l=a-1,g;function h(E,O,w){var T=[];O=O==!0?{entropy:!0}:O||{};var S=C(d(O.entropy?[E,m(n)]:E??v(),3),T),D=new y(T),_=function(){for(var x=D.g(s),I=o,N=0;x<u;)x=(x+N)*a,I*=a,N=D.g(1);for(;x>=f;)x/=2,I/=2,N>>>=1;return(x+N)/I};return _.int32=function(){return D.g(4)|0},_.quick=function(){return D.g(4)/4294967296},_.double=_,C(m(D.S),n),(O.pass||w||function(x,I,N,M){return M&&(M.S&&p(M,D),x.state=function(){return p(D,{})}),N?(r[c]=x,I):x})(_,S,"global"in O?O.global:this==r,O.state)}function y(E){var O,w=E.length,T=this,S=0,D=T.i=T.j=0,_=T.S=[];for(w||(E=[w++]);S<a;)_[S]=S++;for(S=0;S<a;S++)_[S]=_[D=l&D+E[S%w]+(O=_[S])],_[D]=O;(T.g=function(x){for(var I,N=0,M=T.i,k=T.j,A=T.S;x--;)I=A[M=l&M+1],N=N*a+A[l&(A[M]=A[k=l&k+I])+(A[k]=I)];return T.i=M,T.j=k,N})(a)}function p(E,O){return O.i=E.i,O.j=E.j,O.S=E.S.slice(),O}function d(E,O){var w=[],T=typeof E,S;if(O&&T=="object")for(S in E)try{w.push(d(E[S],O-1))}catch{}return w.length?w:T=="string"?E:E+"\0"}function C(E,O){for(var w=E+"",T,S=0;S<w.length;)O[l&S]=l&(T^=O[l&S]*19)+w.charCodeAt(S++);return m(O)}function v(){try{var E;return g&&(E=g.randomBytes)?E=E(a):(E=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(E)),m(E)}catch{var O=t.navigator,w=O&&O.plugins;return[+new Date,t,w,t.screen,m(n)]}}function m(E){return String.fromCharCode.apply(0,E)}if(C(r.random(),n),e.exports){e.exports=h;try{g=Bi}catch{}}else r["seed"+c]=h})(typeof self<"u"?self:K,[],Math)})(Wr);var Pi=Wr.exports,Wi=Vi,Ki=$i,Hi=bi,Yi=Ui,Xi=Fi,Ji=ji,Tt=Pi;Tt.alea=Wi;Tt.xor128=Ki;Tt.xorwow=Hi;Tt.xorshift7=Yi;Tt.xor4096=Xi;Tt.tychei=Ji;const qi=1e-12,{vtkErrorMacro:_u,vtkWarningMacro:Rn}=L;function ke(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const t=Array(e);for(let n=0;n<e;++n)t[n]=0;return t}function Zi(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function ot(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function kn(e,t,n,r){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function V(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kr(e,t,n){const r=e[1]*t[2]-e[2]*t[1],a=e[2]*t[0]-e[0]*t[2],s=e[0]*t[1]-e[1]*t[0];return n[0]=r,n[1]=a,n[2]=s,n}function Hr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:{let n=0;for(let r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}}function Qi(e){const t=Hr(e);return t!==0&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function nt(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function Bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===2?t[0][0]*t[1][1]-t[1][0]*t[0][1]:t.length===4?t[0]*t[3]-t[1]*t[2]:Number.NaN}function Te(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${e}`.includes("e"))return+`${Math.round(`${e}e+${t}`)}e-${t}`;const n=`${e}`.split("e");let r="";return+n[1]+t>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+t}`)}e-${t}`}function Vn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t[0]=Te(e[0],n),t[1]=Te(e[1],n),t[2]=Te(e[2],n),t}function to(e,t,n){let r,a,s,i,c=0,o,u,f;const l=ke(n);for(r=0;r<n;r++){for(i=0,a=0;a<n;a++)(f=Math.abs(e[r*n+a]))>i&&(i=f);if(i===0)return Rn("Unable to factor linear system"),0;l[r]=1/i}for(a=0;a<n;a++){for(r=0;r<a;r++){for(o=e[r*n+a],s=0;s<r;s++)o-=e[r*n+s]*e[s*n+a];e[r*n+a]=o}for(i=0,r=a;r<n;r++){for(o=e[r*n+a],s=0;s<a;s++)o-=e[r*n+s]*e[s*n+a];e[r*n+a]=o,(u=l[r]*Math.abs(o))>=i&&(i=u,c=r)}if(a!==c){for(s=0;s<n;s++)u=e[c*n+s],e[c*n+s]=e[a*n+s],e[a*n+s]=u;l[c]=l[a]}if(t[a]=c,Math.abs(e[a*n+a])<=qi)return Rn("Unable to factor linear system"),0;if(a!==n-1)for(u=1/e[a*n+a],r=a+1;r<n;r++)e[r*n+a]*=u}return 1}function eo(e,t,n,r){let a,s,i,c,o;for(i=-1,a=0;a<r;a++){if(c=t[a],o=n[c],n[c]=n[a],i>=0)for(s=i;s<=a-1;s++)o-=e[a*r+s]*n[s];else o!==0&&(i=a);n[a]=o}for(a=r-1;a>=0;a--){for(o=n[a],s=a+1;s<r;s++)o-=e[a*r+s]*n[s];n[a]=o/e[a*r+a]}}function no(e,t,n){if(n===2){const a=ke(2),s=Bt(e[0],e[1],e[2],e[3]);return s===0?0:(a[0]=(e[3]*t[0]-e[1]*t[1])/s,a[1]=(-(e[2]*t[0])+e[0]*t[1])/s,t[0]=a[0],t[1]=a[1],1)}if(n===1)return e[0]===0?0:(t[0]/=e[0],1);const r=ke(n);return to(e,r,n)===0?0:(eo(e,r,t,n),1)}function ro(e){return e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1,e}function De(e,t,n){return e<t?t:e>n?n:e}function $n(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=De(e[0],t[0],n[0]),r[1]=De(e[1],t[1],n[1]),r[2]=De(e[2],t[2],n[2]),r}const{vtkErrorMacro:ao}=Br,{DefaultDataType:so}=Pr,io=1e-6;function Ve(e,t,n){const r=e.length;let a=Number.MAX_VALUE,s=-Number.MAX_VALUE,i,c;for(c=t;c<r;c+=n)if(!Number.isNaN(e[c])){a=e[c],s=a;break}for(;c<r;c+=n)i=e[c],i<a?a=i:i>s&&(s=i);return{min:a,max:s}}function oo(){let e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add(a){e>a&&(e=a),t<a&&(t=a),n++,r+=a},get(){return{min:e,max:t,count:n,sum:r,mean:r/n}},getRange(){return{min:e,max:t}}}}function Yr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(t<0&&n>1){const a=e.length/n,s=new Float64Array(a);for(let i=0,c=0;i<a;++i){for(let o=c+n;c<o;++c)s[i]+=e[c]*e[c];s[i]**=.5}return Ve(s,0,1)}return Ve(e,t<0?0:t,n)}function bn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=e||[];for(;n.length<=t;)n.push(null);return n}function rn(e){return Object.prototype.toString.call(e).slice(8,-1)}function co(e){const t=e.getNumberOfComponents();let n=0;const r=new Array(t);for(let a=0;a<e.getNumberOfTuples();++a){e.getTuple(a,r);const s=Hr(r,t);s>n&&(n=s)}return n}const uo={computeRange:Yr,createRangeHelper:oo,fastComputeRange:Ve,getDataType:rn,getMaxNorm:co};function fo(e,t){t.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const a=e.getNumberOfComponents(),s=t.values.length/(a>0?a:1);if(r===s)return!0;if(r>s){const i=t.values;return t.values=ie(t.dataType,(r+s)*a),t.values.set(i),!0}return t.size>r*a&&(t.size=r*a,e.dataChange()),!0}e.dataChange=()=>{t.ranges=null,e.modified()},e.resize=r=>{n(r);const a=r*e.getNumberOfComponents();return t.size!==a?(t.size=a,e.dataChange(),!0):!1},e.initialize=()=>{e.resize(0)},e.getElementComponentSize=()=>t.values.BYTES_PER_ELEMENT,e.getComponent=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.values[r*t.numberOfComponents+a]},e.setComponent=(r,a,s)=>{s!==t.values[r*t.numberOfComponents+a]&&(t.values[r*t.numberOfComponents+a]=s,e.dataChange())},e.getValue=r=>{const a=r/t.numberOfComponents,s=r%t.numberOfComponents;return e.getComponent(a,s)},e.setValue=(r,a)=>{const s=r/t.numberOfComponents,i=r%t.numberOfComponents;e.setComponent(s,i,a)},e.getData=()=>t.size===t.values.length?t.values:t.values.subarray(0,t.size),e.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=r;a<0&&(a=t.numberOfComponents===1?0:t.numberOfComponents);let s=null;return t.ranges||(t.ranges=bn(t.ranges,t.numberOfComponents)),s=t.ranges[a],s?(t.rangeTuple[0]=s.min,t.rangeTuple[1]=s.max,t.rangeTuple):(s=Yr(e.getData(),r,t.numberOfComponents),t.ranges[a]=s,t.rangeTuple[0]=s.min,t.rangeTuple[1]=s.max,t.rangeTuple)},e.setRange=(r,a)=>{t.ranges||(t.ranges=bn(t.ranges,t.numberOfComponents));const s={min:r.min,max:r.max};return t.ranges[a]=s,t.rangeTuple[0]=s.min,t.rangeTuple[1]=s.max,t.rangeTuple},e.setTuple=(r,a)=>{const s=r*t.numberOfComponents;for(let i=0;i<t.numberOfComponents;i++)t.values[s+i]=a[i]},e.setTuples=(r,a)=>{let s=r*t.numberOfComponents;const i=Math.min(a.length,t.size-s);for(let c=0;c<i;)t.values[s++]=a[c++]},e.insertTuple=(r,a)=>(t.size<=r*t.numberOfComponents&&(t.size=(r+1)*t.numberOfComponents,n(r+1)),e.setTuple(r,a),r),e.insertTuples=(r,a)=>{const s=r+a.length/t.numberOfComponents;return t.size<s*t.numberOfComponents&&(t.size=s*t.numberOfComponents,n(s)),e.setTuples(r,a),s},e.insertNextTuple=r=>{const a=t.size/t.numberOfComponents;return e.insertTuple(a,r)},e.insertNextTuples=r=>{const a=t.size/t.numberOfComponents;return e.insertTuples(a,r)},e.findTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:io;for(let s=0;s<t.size;s+=t.numberOfComponents)if(Math.abs(r[0]-t.values[s])<=a){let i=!0;for(let c=1;c<t.numberOfComponents;++c)if(Math.abs(r[c]-t.values[s+c])>a){i=!1;break}if(i)return s/t.numberOfComponents}return-1},e.getTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=t.numberOfComponents||1,i=r*s;switch(s){case 4:a[3]=t.values[i+3];case 3:a[2]=t.values[i+2];case 2:a[1]=t.values[i+1];case 1:a[0]=t.values[i];break;default:for(let c=s-1;c>=0;--c)a[c]=t.values[i+c]}return a},e.getTuples=(r,a)=>{const s=(r??0)*t.numberOfComponents,i=(a??e.getNumberOfTuples())*t.numberOfComponents,c=e.getData().subarray(s,i);return c.length>0?c:null},e.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=()=>t.numberOfComponents,e.getNumberOfValues=()=>t.size,e.getNumberOfTuples=()=>t.size/t.numberOfComponents,e.getDataType=()=>t.dataType,e.newClone=()=>Jr({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents}),e.getName=()=>(t.name||(e.modified(),t.name=`vtkDataArray${e.getMTime()}`),t.name),e.setData=(r,a)=>{t.values=r,t.size=r.length,t.dataType=rn(r),a&&(t.numberOfComponents=a),t.size%t.numberOfComponents!==0&&(t.numberOfComponents=1),e.dataChange()},e.getState=()=>{if(t.deleted)return null;const r={...t,vtkClass:e.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(s=>{r[s]||delete r[s]});const a={};return Object.keys(r).sort().forEach(s=>{a[s]=r[s]}),a.mtime&&delete a.mtime,a},e.deepCopy=r=>{const a=e.getDataType(),s=t.values;e.shallowCopy(r),(s==null?void 0:s.length)>=r.getNumberOfValues()&&a===r.getDataType()?(s.set(r.getData()),t.values=s,e.dataChange()):e.setData(r.getData().slice())},e.interpolateTuple=(r,a,s,i,c,o)=>{const u=t.numberOfComponents||1;(u!==a.getNumberOfComponents()||u!==i.getNumberOfComponents())&&ao("numberOfComponents must match");const f=a.getTuple(s),l=i.getTuple(c),g=[];switch(g.length=u,u){case 4:g[3]=f[3]+(l[3]-f[3])*o;case 3:g[2]=f[2]+(l[2]-f[2])*o;case 2:g[1]=f[1]+(l[1]-f[1])*o;case 1:g[0]=f[0]+(l[0]-f[0])*o;break;default:for(let h=0;h<u;h++)g[h]=f[h]+(l[h]-f[h])*o}return e.insertTuple(r,g)}}const lo={name:"",numberOfComponents:1,dataType:so,rangeTuple:[0,0]};function Xr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(t,lo,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(t.values?Array.isArray(t.values)&&(t.values=oe(t.dataType,t.values)):t.values=ie(t.dataType,t.size),t.values&&(t.size=t.size??t.values.length,t.dataType=rn(t.values)),ue(e,t),fe(e,t,["name","numberOfComponents"]),t.size%t.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");fo(e,t)}const Jr=ge(Xr,"vtkDataArray");var rt={newInstance:Jr,extend:Xr,...uo,...Pr},qr=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array;function go(e,t){return Math.abs(e-t)<=qr*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function ho(){var e=new Q(9);return Q!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function yo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function po(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],c=t[5],o=t[6],u=t[7],f=t[8],l=t[9],g=t[10],h=t[11],y=t[12],p=t[13],d=t[14],C=t[15],v=n*c-r*i,m=n*o-a*i,E=n*u-s*i,O=r*o-a*c,w=r*u-s*c,T=a*u-s*o,S=f*p-l*y,D=f*d-g*y,_=f*C-h*y,x=l*d-g*p,I=l*C-h*p,N=g*C-h*d,M=v*N-m*I+E*x+O*_-w*D+T*S;return M?(M=1/M,e[0]=(c*N-o*I+u*x)*M,e[1]=(a*I-r*N-s*x)*M,e[2]=(p*T-d*w+C*O)*M,e[3]=(g*w-l*T-h*O)*M,e[4]=(o*_-i*N-u*D)*M,e[5]=(n*N-a*_+s*D)*M,e[6]=(d*E-y*T-C*m)*M,e[7]=(f*T-g*E+h*m)*M,e[8]=(i*I-c*_+u*S)*M,e[9]=(r*_-n*I-s*S)*M,e[10]=(y*w-p*E+C*v)*M,e[11]=(l*E-f*w-h*v)*M,e[12]=(c*D-i*x-o*S)*M,e[13]=(n*x-r*D+a*S)*M,e[14]=(p*m-y*O-d*v)*M,e[15]=(f*O-l*m+g*v)*M,e):null}function mo(e,t,n){var r=n[0],a=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Eo(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Zr(){var e=new Q(3);return Q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function _e(e){var t=new Q(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Oo(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function G(e,t,n){var r=new Q(3);return r[0]=e,r[1]=t,r[2]=n,r}function Un(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function xe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Co(e,t){var n=t[0],r=t[1],a=t[2],s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function $e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Le(e,t,n){var r=t[0],a=t[1],s=t[2],i=n[0],c=n[1],o=n[2];return e[0]=a*o-s*c,e[1]=s*i-r*o,e[2]=r*c-a*i,e}function be(e,t,n){var r=t[0],a=t[1],s=t[2],i=n[3]*r+n[7]*a+n[11]*s+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/i,e}var vo=Oo;(function(){var e=Zr();return function(t,n,r,a,s,i){var c,o;for(n||(n=3),r||(r=0),a?o=Math.min(a*n+r,t.length):o=t.length,c=r;c<o;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],s(e,e,i),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}})();function wo(){var e=new Q(4);return Q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function So(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=n*n+r*r+a*a+s*s;return i>0&&(i=1/Math.sqrt(i)),e[0]=n*i,e[1]=r*i,e[2]=a*i,e[3]=s*i,e}(function(){var e=wo();return function(t,n,r,a,s,i){var c,o;for(n||(n=4),r||(r=0),a?o=Math.min(a*n+r,t.length):o=t.length,c=r;c<o;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],e[3]=t[c+3],s(e,e,i),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2],t[c+3]=e[3];return t}})();function Fn(){var e=new Q(4);return Q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function To(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Pt(e,t,n,r){var a=t[0],s=t[1],i=t[2],c=t[3],o=n[0],u=n[1],f=n[2],l=n[3],g,h,y,p,d;return h=a*o+s*u+i*f+c*l,h<0&&(h=-h,o=-o,u=-u,f=-f,l=-l),1-h>qr?(g=Math.acos(h),y=Math.sin(g),p=Math.sin((1-r)*g)/y,d=Math.sin(r*g)/y):(p=1-r,d=r),e[0]=p*a+d*o,e[1]=p*s+d*u,e[2]=p*i+d*f,e[3]=p*c+d*l,e}function Do(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[a*3+a]&&(a=2);var s=(a+1)%3,i=(a+2)%3;r=Math.sqrt(t[a*3+a]-t[s*3+s]-t[i*3+i]+1),e[a]=.5*r,r=.5/r,e[3]=(t[s*3+i]-t[i*3+s])*r,e[s]=(t[s*3+a]+t[a*3+s])*r,e[i]=(t[i*3+a]+t[a*3+i])*r}return e}var Qr=So;(function(){var e=Zr(),t=G(1,0,0),n=G(0,1,0);return function(r,a,s){var i=$e(a,s);return i<-.999999?(Le(e,t,a),vo(e)<1e-6&&Le(e,n,a),Co(e,e),To(r,e,Math.PI),r):i>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Le(e,a,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+i,Qr(r,r))}})();(function(){var e=Fn(),t=Fn();return function(n,r,a,s,i,c){return Pt(e,r,i,c),Pt(t,a,s,c),Pt(n,e,t,2*c*(1-c)),n}})();(function(){var e=ho();return function(t,n,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Qr(t,Do(t,e))}})();const{vtkErrorMacro:jn,vtkWarningMacro:_o}=L;function xo(e,t){t.classHierarchy.push("vtkFieldData");const n=e.getState;t.arrays&&(t.arrays=t.arrays.map(r=>({data:J(r.data)}))),e.initialize=()=>{e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=()=>{t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=r=>{e.initializeFields(),t.copyFieldFlags=r.getCopyFieldFlags().map(a=>a),t.arrays=r.arrays().map(a=>({array:a}))},e.getNumberOfArrays=()=>t.arrays.length,e.getNumberOfActiveArrays=()=>t.arrays.length,e.addArray=r=>{const a=r.getName(),{array:s,index:i}=e.getArrayWithIndex(a);return s!=null?(t.arrays[i]={data:r},i):(t.arrays=[].concat(t.arrays,{data:r}),t.arrays.length-1)},e.removeAllArrays=()=>{t.arrays=[]},e.removeArray=r=>{const a=t.arrays.findIndex(s=>s.data.getName()===r);return e.removeArrayByIndex(a)},e.removeArrayByIndex=r=>r!==-1&&r<t.arrays.length?(t.arrays.splice(r,1),!0):!1,e.getArrays=()=>t.arrays.map(r=>r.data),e.getArray=r=>typeof r=="number"?e.getArrayByIndex(r):e.getArrayByName(r),e.getArrayByName=r=>t.arrays.reduce((a,s,i)=>s.data.getName()===r?s.data:a,null),e.getArrayWithIndex=r=>{const a=t.arrays.findIndex(s=>s.data.getName()===r);return{array:a!==-1?t.arrays[a].data:null,index:a}},e.getArrayByIndex=r=>r>=0&&r<t.arrays.length?t.arrays[r].data:null,e.hasArray=r=>e.getArrayWithIndex(r).index>=0,e.getArrayName=r=>{const a=t.arrays[r];return a?a.data.getName():""},e.getCopyFieldFlags=()=>t.copyFieldFlags,e.getFlag=r=>t.copyFieldFlags[r],e.passData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(i=>{const c=e.getFlag(i.getName());if(c!==!1&&!(t.doCopyAllOff&&c!==!0)&&i){let o=e.getArrayByName(i.getName());if(o)if(i.getNumberOfComponents()===o.getNumberOfComponents())if(a>-1&&a<i.getNumberOfTuples()){const u=s>-1?s:a;o.insertTuple(u,i.getTuple(a))}else o.insertTuples(0,i.getTuples());else jn("Unhandled case in passData");else if(a<0||a>i.getNumberOfTuples())e.addArray(i),r.getAttributes(i).forEach(u=>{e.setAttribute(i,u)});else{const u=i.getNumberOfComponents();let f=i.getNumberOfValues();const l=s>-1?s:a;f<=l*u&&(f=(l+1)*u),o=rt.newInstance({name:i.getName(),dataType:i.getDataType(),numberOfComponents:u,values:L.newTypedArray(i.getDataType(),f),size:0}),o.insertTuple(l,i.getTuple(a)),e.addArray(o),r.getAttributes(i).forEach(g=>{e.setAttribute(o,g)})}}})},e.interpolateData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(o=>{const u=e.getFlag(o.getName());if(u!==!1&&!(t.doCopyAllOff&&u!==!0)&&o){let f=e.getArrayByName(o.getName());if(f)if(o.getNumberOfComponents()===f.getNumberOfComponents())if(a>-1&&a<o.getNumberOfTuples()){const l=i>-1?i:a;f.interpolateTuple(l,o,a,o,s,c),_o("Unexpected case in interpolateData")}else f.insertTuples(o.getTuples());else jn("Unhandled case in interpolateData");else if(a<0||s<0||a>o.getNumberOfTuples())e.addArray(o),r.getAttributes(o).forEach(l=>{e.setAttribute(o,l)});else{const l=o.getNumberOfComponents();let g=o.getNumberOfValues();const h=i>-1?i:a;g<=h*l&&(g=(h+1)*l),f=rt.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:l,values:L.newTypedArray(o.getDataType(),g),size:0}),f.interpolateTuple(h,o,a,o,s,c),e.addArray(f),r.getAttributes(o).forEach(y=>{e.setAttribute(f,y)})}}})},e.copyFieldOn=r=>{t.copyFieldFlags[r]=!0},e.copyFieldOff=r=>{t.copyFieldFlags[r]=!1},e.copyAllOn=()=>{(!t.doCopyAllOn||t.doCopyAllOff)&&(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=()=>{(t.doCopyAllOn||!t.doCopyAllOff)&&(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=()=>{t.copyFieldFlags={}},e.deepCopy=r=>{t.arrays=r.getArrays().map(a=>{const s=a.newClone();return s.deepCopy(a),{data:s}})},e.copyFlags=r=>r.getCopyFieldFlags().map(a=>a),e.reset=()=>t.arrays.forEach(r=>r.data.reset()),e.getMTime=()=>t.arrays.reduce((r,a)=>a.data.getMTime()>r?a.data.getMTime():r,t.mtime),e.getNumberOfComponents=()=>t.arrays.reduce((r,a)=>r+a.data.getNumberOfComponents(),0),e.getNumberOfTuples=()=>t.arrays.length>0?t.arrays[0].getNumberOfTuples():0,e.getState=()=>{const r=n();return r&&(r.arrays=t.arrays.map(a=>({data:a.data.getState()}))),r}}const Lo={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function ta(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Lo,n),L.obj(e,t),xo(e,t)}const Mo=L.newInstance(ta,"vtkFieldData");var No={newInstance:Mo,extend:ta};const Io={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},Ao={MAX:0,EXACT:1,NOLIMIT:2},Ro={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},ko={DUPLICATEPOINT:1,HIDDENPOINT:2},Vo={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},$o="vtkGhostType",bo={DEFAULT:0,SINGLE:1,DOUBLE:2};var ea={AttributeCopyOperations:Vo,AttributeLimitTypes:Ao,AttributeTypes:Io,CellGhostTypes:Ro,DesiredOutputPrecision:bo,PointGhostTypes:ko,ghostArrayName:$o};const{AttributeTypes:it,AttributeCopyOperations:ut}=ea,{vtkWarningMacro:It}=L;function Uo(e,t){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(i){let c=n.find(o=>it[o.toUpperCase()]===i||typeof i!="number"&&o.toLowerCase()===i.toLowerCase());return typeof c>"u"&&(c=null),c}t.classHierarchy.push("vtkDataSetAttributes");const a={...e};e.checkNumberOfComponents=i=>!0,e.setAttribute=(i,c)=>{const o=r(c);if(i&&o.toUpperCase()==="PEDIGREEIDS"&&!i.isA("vtkDataArray"))return It(`Cannot set attribute ${o}. The attribute must be a vtkDataArray.`),-1;if(i&&!e.checkNumberOfComponents(i,o))return It(`Cannot set attribute ${o}. Incorrect number of components.`),-1;let u=t[`active${o}`];if(u>=0&&u<t.arrays.length){if(t.arrays[u]===i)return u;e.removeArrayByIndex(u)}return i?(u=e.addArray(i),t[`active${o}`]=u):t[`active${o}`]=-1,e.modified(),t[`active${o}`]},e.getAttributes=i=>n.filter(c=>e[`get${c}`]()===i),e.setActiveAttributeByName=(i,c)=>e.setActiveAttributeByIndex(e.getArrayWithIndex(i).index,c),e.setActiveAttributeByIndex=(i,c)=>{const o=r(c);if(i>=0&&i<t.arrays.length){if(o.toUpperCase()!=="PEDIGREEIDS"){const u=e.getArrayByIndex(i);if(!u.isA("vtkDataArray"))return It(`Cannot set attribute ${o}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!e.checkNumberOfComponents(u,o))return It(`Cannot set attribute ${o}. Incorrect number of components.`),-1}return t[`active${o}`]=i,e.modified(),i}return i===-1&&(t[`active${o}`]=i,e.modified()),-1},e.getActiveAttribute=i=>{const c=r(i);return e[`get${c}`]()},e.removeAllArrays=()=>{n.forEach(i=>{t[`active${i}`]=-1}),a.removeAllArrays()},e.removeArrayByIndex=i=>(i!==-1&&n.forEach(c=>{i===t[`active${c}`]?t[`active${c}`]=-1:i<t[`active${c}`]&&(t[`active${c}`]-=1)}),a.removeArrayByIndex(i)),n.forEach(i=>{const c=`active${i}`;e[`get${i}`]=()=>e.getArrayByIndex(t[c]),e[`set${i}`]=o=>e.setAttribute(o,i),e[`setActive${i}`]=o=>e.setActiveAttributeByIndex(e.getArrayWithIndex(o).index,i),e[`copy${i}Off`]=()=>{const o=i.toUpperCase();t.copyAttributeFlags[ut.PASSDATA][it[o]]=!1},e[`copy${i}On`]=()=>{const o=i.toUpperCase();t.copyAttributeFlags[ut.PASSDATA][it[o]]=!0}}),e.initializeAttributeCopyFlags=()=>{t.copyAttributeFlags=[],Object.keys(ut).filter(i=>i!=="ALLCOPY").forEach(i=>{t.copyAttributeFlags[ut[i]]=Object.keys(it).filter(c=>c!=="NUM_ATTRIBUTES").reduce((c,o)=>(c[it[o]]=!0,c),[])}),t.copyAttributeFlags[ut.COPYTUPLE][it.GLOBALIDS]=!1,t.copyAttributeFlags[ut.INTERPOLATE][it.GLOBALIDS]=!1,t.copyAttributeFlags[ut.COPYTUPLE][it.PEDIGREEIDS]=!1},e.initialize=L.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(i=>{!t.dataArrays[i].ref&&t.dataArrays[i].type==="vtkDataArray"&&e.addArray(rt.newInstance(t.dataArrays[i]))});const s=e.shallowCopy;e.shallowCopy=(i,c)=>{s(i,c),t.arrays=i.getArrays().map(o=>{const u=o.newClone();return u.shallowCopy(o,c),{data:u}})},e.initializeAttributeCopyFlags()}const Fo={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function na(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Fo,n),No.extend(e,t,n),L.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),Uo(e,t)}const jo=L.newInstance(na,"vtkDataSetAttributes");var Gn={newInstance:jo,extend:na,...ea};const Go={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},zo={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var Bo={FieldDataTypes:Go,FieldAssociations:zo};const Ue=["pointData","cellData","fieldData"];function Po(e,t){t.classHierarchy.push("vtkDataSet"),Ue.forEach(r=>{t[r]?t[r]=J(t[r]):t[r]=Gn.newInstance()});const n=e.shallowCopy;e.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),Ue.forEach(s=>{t[s]=Gn.newInstance(),t[s].shallowCopy(r.getReferenceByName(s))})}}const Wo={};function ra(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Wo,n),L.obj(e,t),L.setGet(e,t,Ue),Po(e,t)}const Ko=L.newInstance(ra,"vtkDataSet");var aa={newInstance:Ko,extend:ra,...Bo};function Ho(e,t){t.classHierarchy.push("vtkImplicitFunction"),e.functionValue=n=>{if(!t.transform)return e.evaluateFunction(n);const r=[];return t.transform.transformPoint(n,r),e.evaluateFunction(r)},e.evaluateFunction=n=>{L.vtkErrorMacro("not implemented")}}const Yo={};function sa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Yo,n),L.obj(e,t),L.setGet(e,t,["transform"]),Ho(e,t)}const Xo=L.newInstance(sa,"vtkImplicitFunction");var Jo={newInstance:Xo,extend:sa};const Fe=1e-6,ia="coincide",oa="disjoint";function qo(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])}function ca(e,t,n){const r=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(r)}function ua(e,t,n,r){const a=[];ot(e,t,a);const s=V(n,a);r[0]=e[0]-s*n[0],r[1]=e[1]-s*n[1],r[2]=e[2]-s*n[2]}function fa(e,t,n){const r=V(e,t);let a=V(t,t);return a===0&&(a=1),n[0]=e[0]-r*t[0]/a,n[1]=e[1]-r*t[1]/a,n[2]=e[2]-r*t[2]/a,n}function la(e,t,n,r){const a=[];ot(e,t,a);const s=V(n,a),i=V(n,n);i!==0?(r[0]=e[0]-s*n[0]/i,r[1]=e[1]-s*n[1]/i,r[2]=e[2]-s*n[2]/i):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function ga(e,t,n,r){const a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],i=[];ot(t,e,s),ot(n,e,i);const c=V(r,i),o=V(r,s);let u,f;return o<0?u=-o:u=o,c<0?f=-c*Fe:f=c*Fe,u<=f||(a.t=c/o,a.x[0]=e[0]+a.t*s[0],a.x[1]=e[1]+a.t*s[1],a.x[2]=e[2]+a.t*s[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function ha(e,t,n,r){const a={intersection:!1,l0:[],l1:[],error:null},s=[];Kr(t,r,s);const i=s.map(l=>Math.abs(l));if(i[0]+i[1]+i[2]<Fe){const l=[];return ot(e,n,l),V(t,l)===0?a.error=ia:a.error=oa,a}let c;i[0]>i[1]&&i[0]>i[2]?c="x":i[1]>i[2]?c="y":c="z";const o=[],u=-V(t,e),f=-V(r,n);switch(c){case"x":o[0]=0,o[1]=(f*t[2]-u*r[2])/s[0],o[2]=(u*r[1]-f*t[1])/s[0];break;case"y":o[0]=(u*r[2]-f*t[2])/s[1],o[1]=0,o[2]=(f*t[0]-u*r[0])/s[1];break;case"z":o[0]=(f*t[1]-u*r[1])/s[2],o[1]=(u*r[0]-f*t[0])/s[2],o[2]=0;break}return a.l0=o,Zi(o,s,a.l1),a.intersection=!0,a}const Zo={evaluate:qo,distanceToPlane:ca,projectPoint:ua,projectVector:fa,generalizedProjectPoint:la,intersectWithLine:ga,intersectWithPlane:ha,DISJOINT:oa,COINCIDE:ia};function Qo(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=n=>ca(n,t.origin,t.normal),e.projectPoint=(n,r)=>{ua(n,t.origin,t.normal,r)},e.projectVector=(n,r)=>fa(n,t.normal,r),e.push=n=>{if(n!==0)for(let r=0;r<3;r++)t.origin[r]+=n*t.normal[r]},e.generalizedProjectPoint=(n,r)=>{la(n,t.origin,t.normal,r)},e.evaluateFunction=(n,r,a)=>Array.isArray(n)?t.normal[0]*(n[0]-t.origin[0])+t.normal[1]*(n[1]-t.origin[1])+t.normal[2]*(n[2]-t.origin[2]):t.normal[0]*(n-t.origin[0])+t.normal[1]*(r-t.origin[1])+t.normal[2]*(a-t.origin[2]),e.evaluateGradient=n=>[t.normal[0],t.normal[1],t.normal[2]],e.intersectWithLine=(n,r)=>ga(n,r,t.origin,t.normal),e.intersectWithPlane=(n,r)=>ha(n,r,t.origin,t.normal)}const tc={normal:[0,0,1],origin:[0,0,0]};function ya(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,tc,n),Jo.extend(e,t,n),L.setGetArray(e,t,["normal","origin"],3),Qo(e,t)}const ec=L.newInstance(ya,"vtkPlane");var pt={newInstance:ec,extend:ya,...Zo};const ye=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function pa(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function at(e){return(e==null?void 0:e.length)>=6&&e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function an(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function sn(e){return an(e,ye)}function te(e,t,n,r){const[a,s,i,c,o,u]=e;return e[0]=a<t?a:t,e[1]=s>t?s:t,e[2]=i<n?i:n,e[3]=c>n?c:n,e[4]=o<r?o:r,e[5]=u>r?u:r,e}function on(e,t){if(t.length===0)return e;if(Array.isArray(t[0]))for(let n=0;n<t.length;++n)te(e,...t[n]);else for(let n=0;n<t.length;n+=3)te(e,...t.slice(n,n+3));return e}function da(e,t,n,r,a,s,i){const[c,o,u,f,l,g]=e;return i===void 0?(e[0]=Math.min(t[0],c),e[1]=Math.max(t[1],o),e[2]=Math.min(t[2],u),e[3]=Math.max(t[3],f),e[4]=Math.min(t[4],l),e[5]=Math.max(t[5],g)):(e[0]=Math.min(t,c),e[1]=Math.max(n,o),e[2]=Math.min(r,u),e[3]=Math.max(a,f),e[4]=Math.min(s,l),e[5]=Math.max(i,g)),e}function ma(e,t,n,r){const[a,s,i,c,o,u]=e;return e[0]=t,e[1]=t>s?t:s,e[2]=n,e[3]=n>c?n:c,e[4]=r,e[5]=r>u?r:u,a!==t||i!==n||o!==r}function Ea(e,t,n,r){const[a,s,i,c,o,u]=e;return e[0]=t<a?t:a,e[1]=t,e[2]=n<i?n:i,e[3]=n,e[4]=r<o?r:o,e[5]=r,s!==t||c!==n||u!==r}function Oa(e,t){return e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t,e}function cn(e,t,n,r){return at(e)?(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),r>=0?(e[4]*=r,e[5]*=r):(e[4]=r*e[5],e[5]=r*e[4]),!0):!1}function un(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function nc(e,t,n,r){if(!at(e))return!1;const a=un(e);return e[0]-=a[0],e[1]-=a[0],e[2]-=a[1],e[3]-=a[1],e[4]-=a[2],e[5]-=a[2],cn(e,t,n,r),e[0]+=a[0],e[1]+=a[0],e[2]+=a[1],e[3]+=a[1],e[4]+=a[2],e[5]+=a[2],!0}function Dt(e,t){return e[t*2+1]-e[t*2]}function pe(e){return[Dt(e,0),Dt(e,1),Dt(e,2)]}function Ca(e){return e.slice(0,2)}function va(e){return e.slice(2,4)}function wa(e){return e.slice(4,6)}function Sa(e){const t=pe(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function Ta(e){if(at(e)){const t=pe(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function fn(e){return[e[0],e[2],e[4]]}function ln(e){return[e[1],e[3],e[5]]}function At(e,t){return e<=0&&t>=0||e>=0&&t<=0}function gn(e,t){let n=0;for(let r=0;r<2;r++)for(let a=2;a<4;a++)for(let s=4;s<6;s++)t[n++]=[e[r],e[a],e[s]];return t}function Da(e,t,n){return t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5],t}function _a(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=gn(e,[]);for(let a=0;a<r.length;++a)be(r[a],r[a],t);return sn(n),on(n,r)}function xa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t[0]=.5*(e[1]-e[0]),t[1]=.5*(e[3]-e[2]),t[2]=.5*(e[5]-e[4]),t}function La(e,t,n,r){const a=[].concat(ye),s=e.getData();for(let i=0;i<s.length;i+=3){const c=[s[i],s[i+1],s[i+2]],o=V(c,t);a[0]=Math.min(o,a[0]),a[1]=Math.max(o,a[1]);const u=V(c,n);a[2]=Math.min(u,a[2]),a[3]=Math.max(u,a[3]);const f=V(c,r);a[4]=Math.min(f,a[4]),a[5]=Math.max(f,a[5])}return a}function Ma(e,t,n,r,a){let s=!0;const i=[];let c=0;const o=[],u=[0,0,0],f=0,l=1,g=2;for(let h=0;h<3;h++)t[h]<e[2*h]?(i[h]=l,u[h]=e[2*h],s=!1):t[h]>e[2*h+1]?(i[h]=f,u[h]=e[2*h+1],s=!1):i[h]=g;if(s)return r[0]=t[0],r[1]=t[1],r[2]=t[2],a[0]=0,1;for(let h=0;h<3;h++)i[h]!==g&&n[h]!==0?o[h]=(u[h]-t[h])/n[h]:o[h]=-1;for(let h=0;h<3;h++)o[c]<o[h]&&(c=h);if(o[c]>1||o[c]<0)return 0;a[0]=o[c];for(let h=0;h<3;h++)if(c!==h){if(r[h]=t[h]+o[c]*n[h],r[h]<e[2*h]||r[h]>e[2*h+1])return 0}else r[h]=u[h];return 1}function Na(e,t,n){const r=[];let a=0,s=1,i=1;for(let c=4;c<=5;++c){r[2]=e[c];for(let o=2;o<=3;++o){r[1]=e[o];for(let u=0;u<=1;++u)if(r[0]=e[u],a=pt.evaluate(n,t,r),i&&(s=a>=0?1:-1,i=0),a===0||s>0&&a<0||s<0&&a>0)return 1}}return 0}function Ia(e,t){if(!(at(e)&&at(t)))return!1;const n=[0,0,0,0,0,0];let r;for(let a=0;a<3;a++)if(r=!1,t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1]?(r=!0,n[a*2]=t[a*2]):e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1]&&(r=!0,n[a*2]=e[a*2]),t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]?(r=!0,n[a*2+1]=t[2*a+1]):e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1]&&(r=!0,n[a*2+1]=e[a*2+1]),!r)return!1;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],!0}function ee(e,t){if(!(at(e)&&at(t)))return!1;for(let n=0;n<3;n++)if(!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1]))return!1;return!0}function ne(e,t,n,r){return!(t<e[0]||t>e[1]||n<e[2]||n>e[3]||r<e[4]||r>e[5])}function rc(e,t){return!(!ee(e,t)||!ne(e,...fn(t))||!ne(e,...ln(t)))}function Aa(e,t,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0];let s=0;for(let l=0;l<2;l++)for(let g=2;g<4;g++)for(let h=4;h<6;h++){const y=[e[l],e[g],e[h]];a[s++]=pt.evaluate(n,t,y)}let i=2;for(;i--&&!(At(a[r[i][0]],a[r[i][4]])&&At(a[r[i][1]],a[r[i][5]])&&At(a[r[i][2]],a[r[i][6]])&&At(a[r[i][3]],a[r[i][7]])););if(i<0)return!1;const c=Math.sign(n[i]),o=Math.abs((e[i*2+1]-e[i*2])*n[i]);let u=c>0?1:0;for(let l=0;l<4;l++){if(o===0)continue;const g=Math.abs(a[r[i][l]])/o;c>0&&g<u&&(u=g),c<0&&g>u&&(u=g)}const f=(1-u)*e[i*2]+u*e[i*2+1];return c>0?e[i*2]=f:e[i*2+1]=f,!0}class ac{constructor(t){this.bounds=t,this.bounds||(this.bounds=new Float64Array(ye))}getBounds(){return this.bounds}equals(t){return pa(this.bounds,t)}isValid(){return at(this.bounds)}setBounds(t){return an(this.bounds,t)}reset(){return sn(this.bounds)}addPoint(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(this.bounds,...n)}addPoints(t){return on(this.bounds,t)}addBounds(t,n,r,a,s,i){return da(this.bounds,t,n,r,a,s,i)}setMinPoint(t,n,r){return ma(this.bounds,t,n,r)}setMaxPoint(t,n,r){return Ea(this.bounds,t,n,r)}inflate(t){return Oa(this.bounds,t)}scale(t,n,r){return cn(this.bounds,t,n,r)}getCenter(){return un(this.bounds)}getLength(t){return Dt(this.bounds,t)}getLengths(){return pe(this.bounds)}getMaxLength(){return Sa(this.bounds)}getDiagonalLength(){return Ta(this.bounds)}getMinPoint(){return fn(this.bounds)}getMaxPoint(){return ln(this.bounds)}getXRange(){return Ca(this.bounds)}getYRange(){return va(this.bounds)}getZRange(){return wa(this.bounds)}getCorners(t){return gn(this.bounds,t)}computeCornerPoints(t,n){return Da(this.bounds,t,n)}computeLocalBounds(t,n,r){return La(this.bounds,t,n,r)}transformBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _a(this.bounds,t,n)}computeScale3(t){return xa(this.bounds,t)}cutWithPlane(t,n){return Aa(this.bounds,t,n)}intersectBox(t,n,r,a){return Ma(this.bounds,t,n,r,a)}intersectPlane(t,n){return Na(this.bounds,t,n)}intersect(t){return Ia(this.bounds,t)}intersects(t){return ee(this.bounds,t)}containsPoint(t,n,r){return ne(this.bounds,t,n,r)}contains(t){return ee(this.bounds,t)}}function sc(e){const t=e&&e.bounds;return new ac(t)}const ic={equals:pa,isValid:at,setBounds:an,reset:sn,addPoint:te,addPoints:on,addBounds:da,setMinPoint:ma,setMaxPoint:Ea,inflate:Oa,scale:cn,scaleAboutCenter:nc,getCenter:un,getLength:Dt,getLengths:pe,getMaxLength:Sa,getDiagonalLength:Ta,getMinPoint:fn,getMaxPoint:ln,getXRange:Ca,getYRange:va,getZRange:wa,getCorners:gn,computeCornerPoints:Da,computeLocalBounds:La,transformBounds:_a,computeScale3:xa,cutWithPlane:Aa,intersectBox:Ma,intersectPlane:Na,intersect:Ia,intersects:ee,containsPoint:ne,contains:rc,INIT_BOUNDS:ye};var Et={newInstance:sc,...ic};const Y={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var Ra={StructuredType:Y};const{StructuredType:et}=Ra;function oc(e){let t=0;for(let n=0;n<3;++n)e[n*2]<e[n*2+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?et.EMPTY:t===3?et.XYZ_GRID:t===2?e[0]===e[1]?et.YZ_PLANE:e[2]===e[3]?et.XZ_PLANE:et.XY_PLANE:t===1?e[0]<e[1]?et.X_LINE:e[2]<e[3]?et.Y_LINE:et.Z_LINE:et.SINGLE_POINT}var cc={getDataDescriptionFromExtent:oc,...Ra};const{vtkErrorMacro:ft}=L;function uc(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return ft("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const s=r.length===1?r[0]:r;if(s.length!==6)return!1;const i=t.extent.some((c,o)=>c!==s[o]);return i&&(t.extent=s.slice(),t.dataDescription=cc.getDataDescriptionFromExtent(t.extent),e.modified()),i},e.setDimensions=function(){let n,r,a;if(t.deleted){ft("instance deleted - cannot call any method");return}if(arguments.length===1){const s=arguments.length<=0?void 0:arguments[0];n=s[0],r=s[1],a=s[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];else{ft("Bad dimension specification");return}e.setExtent(0,n-1,0,r-1,0,a-1)},e.getDimensions=()=>[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1],e.getNumberOfCells=()=>{const n=e.getDimensions();let r=1;for(let a=0;a<3;a++){if(n[a]===0)return 0;n[a]>1&&(r*=n[a]-1)}return r},e.getNumberOfPoints=()=>{const n=e.getDimensions();return n[0]*n[1]*n[2]},e.getPoint=n=>{const r=e.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return ft("Requesting a point from an empty image."),null;const a=new Float64Array(3);switch(t.dataDescription){case Y.EMPTY:return null;case Y.SINGLE_POINT:break;case Y.X_LINE:a[0]=n;break;case Y.Y_LINE:a[1]=n;break;case Y.Z_LINE:a[2]=n;break;case Y.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case Y.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case Y.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case Y.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:ft("Invalid dataDescription");break}const s=[0,0,0];return e.indexToWorld(a,s),s},e.getBounds=()=>e.extentToBounds(e.getSpatialExtent()),e.extentToBounds=n=>Et.transformBounds(n,t.indexToWorld),e.getSpatialExtent=()=>Et.inflate([...t.extent],.5),e.computeTransforms=()=>{Eo(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],mo(t.indexToWorld,t.indexToWorld,t.spacing),po(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return be(r,n,t.indexToWorld),r},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return be(r,n,t.worldToIndex),r},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Et.transformBounds(n,t.indexToWorld,r)},e.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Et.transformBounds(n,t.worldToIndex,r)},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=()=>Et.getCenter(e.getBounds()),e.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const a=[0,0,0,0,0,0];e.worldToIndexBounds(n,a);const s=[0,0,0],i=[0,0,0];Et.computeCornerPoints(a,s,i),Vn(s,s),Vn(i,i);const c=e.getDimensions();$n(s,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],s),$n(i,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],i);const o=c[0],u=c[0]*c[1],f=e.getPointData().getScalars().getData();let l=-1/0,g=1/0,h=0,y=0,p=0;for(let m=s[2];m<=i[2];m++)for(let E=s[1];E<=i[1];E++){let O=s[0]+E*o+m*u;for(let w=s[0];w<=i[0];w++){if(!r||r([w,E,m],a)){const T=f[O];T>l&&(l=T),T<g&&(g=T),h+=T*T,y+=T,p+=1}++O}}const d=p>0?y/p:0,C=p?Math.abs(h/p-d*d):0,v=Math.sqrt(C);return{minimum:g,maximum:l,average:d,variance:C,sigma:v,count:p}},e.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=[];let s=r;for(let i=0;i<3;++i)a[i]=s,s*=n[i*2+1]-n[i*2]+1;return a},e.computeOffsetIndex=n=>{let[r,a,s]=n;const i=e.getExtent(),c=e.getPointData().getScalars().getNumberOfComponents(),o=e.computeIncrements(i,c);return Math.floor((Math.round(r)-i[0])*o[0]+(Math.round(a)-i[2])*o[1]+(Math.round(s)-i[4])*o[2])},e.getOffsetIndexFromWorld=n=>{const r=e.getExtent(),a=e.worldToIndex(n);for(let s=0;s<3;++s)if(a[s]<r[s*2]||a[s]>r[s*2+1])return ft(`GetScalarPointer: Pixel ${a} is not in memory. Current extent = ${r}`),NaN;return e.computeOffsetIndex(a)},e.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=e.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=a)return ft(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${a}`),NaN;const s=e.getOffsetIndexFromWorld(n);return Number.isNaN(s)?s:e.getPointData().getScalars().getComponent(s,r)}}const fc={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Y.EMPTY};function ka(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,fc,n),aa.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=yo(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),L.get(e,t,["indexToWorld","worldToIndex"]),L.setGetArray(e,t,["origin","spacing"],3),L.setGetArray(e,t,["direction"],9),L.getArray(e,t,["extent"],6),uc(e,t)}const lc=L.newInstance(ka,"vtkImageData");var Rt={newInstance:lc,extend:ka};const{vtkErrorMacro:gc}=L,hc=[1,-1,1,-1,1,-1];function yc(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=L.newTypedArray(t.dataType,t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];e.setTuple(n,a)},e.getPoint=e.getTuple,e.findPoint=e.findTuple,e.insertNextPoint=(n,r,a)=>e.insertNextTuple([n,r,a]),e.getBounds=()=>{if(e.getNumberOfComponents()===3){const a=e.getRange(0);t.bounds[0]=a[0],t.bounds[1]=a[1];const s=e.getRange(1);t.bounds[2]=s[0],t.bounds[3]=s[1];const i=e.getRange(2);return t.bounds[4]=i[0],t.bounds[5]=i[1],t.bounds}if(e.getNumberOfComponents()!==2)return gc(`getBounds called on an array with components of
        ${e.getNumberOfComponents()}`),hc;const n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];const r=e.getRange(1);return t.bounds[2]=r[0],t.bounds[3]=r[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}const pc={empty:!0,numberOfComponents:3,dataType:he.FLOAT,bounds:[1,-1,1,-1,1,-1]};function Va(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,pc,n),rt.extend(e,t,n),yc(e,t)}const dc=L.newInstance(Va,"vtkPoints");var je={newInstance:dc,extend:Va};function $a(e){let t=0;return e.filter((n,r)=>r===t?(t+=n+1,!0):!1)}function ba(e){let t=0;for(let n=0;n<e.length;)n+=e[n]+1,t++;return t}const mc={extractCellSizes:$a,getNumberOfCells:ba};function Ec(e,t){t.classHierarchy.push("vtkCellArray");const n={...e};e.getNumberOfCells=r=>(t.numberOfCells!==void 0&&!r||(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=ba(e.getData())),t.numberOfCells),e.getCellSizes=r=>(t.cellSizes!==void 0&&!r||(t.cellSizes=$a(e.getData())),t.cellSizes),e.resize=r=>{const a=e.getNumberOfTuples();n.resize(r);const s=e.getNumberOfTuples();s<a&&(s===0?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=r=>{n.setData(r,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=r=>{let a=r;const s=t.values[a++];return t.values.subarray(a,a+s)},e.insertNextCell=r=>{const a=e.getNumberOfCells();return e.insertNextTuples([r.length,...r]),++t.numberOfCells,t.cellSizes!=null&&t.cellSizes.push(r.length),a}}function Oc(e){return{empty:!0,numberOfComponents:1,dataType:he.UNSIGNED_INT,...e}}function Ua(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rt.extend(e,t,Oc(n)),Ec(e,t)}const Cc=L.newInstance(Ua,"vtkCellArray");var zn={newInstance:Cc,extend:Ua,...mc};function vc(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){t.pointsIds=r;let a=t.points.getData();a.length!==3*t.pointsIds.length&&(a=L.newTypedArray(n.getDataType(),3*t.pointsIds.length));const s=n.getData();t.pointsIds.forEach((i,c)=>{let o=3*i,u=3*c;a[u]=s[o],a[++u]=s[++o],a[++u]=s[++o]}),t.points.setData(a)}else{t.points=n,t.pointsIds=new Array(n.getNumberOfPoints());for(let a=n.getNumberOfPoints()-1;a>=0;--a)t.pointsIds[a]=a}},e.getBounds=()=>{const n=t.points.getNumberOfPoints(),r=[];if(n){t.points.getPoint(0,r),t.bounds[0]=r[0],t.bounds[1]=r[0],t.bounds[2]=r[1],t.bounds[3]=r[1],t.bounds[4]=r[2],t.bounds[5]=r[2];for(let a=1;a<n;a++)t.points.getPoint(a,r),t.bounds[0]=r[0]<t.bounds[0]?r[0]:t.bounds[0],t.bounds[1]=r[0]>t.bounds[1]?r[0]:t.bounds[1],t.bounds[2]=r[1]<t.bounds[2]?r[1]:t.bounds[2],t.bounds[3]=r[1]>t.bounds[3]?r[1]:t.bounds[3],t.bounds[4]=r[2]<t.bounds[4]?r[2]:t.bounds[4],t.bounds[5]=r[2]>t.bounds[5]?r[2]:t.bounds[5]}else ro(t.bounds);return t.bounds},e.getLength2=()=>{e.getBounds();let n=0,r=0;for(let a=0;a<3;a++)r=t.bounds[2*a+1]-t.bounds[2*a],n+=r*r;return n},e.getParametricDistance=n=>{let r,a=0;for(let s=0;s<3;s++)n[s]<0?r=-n[s]:n[s]>1?r=n[s]-1:r=0,r>a&&(a=r);return a},e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.deepCopy=n=>{n.initialize(t.points,t.pointsIds)},e.getCellDimension=()=>{},e.intersectWithLine=(n,r,a,s,i,c,o)=>{},e.evaluatePosition=(n,r,a,s,i,c)=>{L.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const wc={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Fa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,wc,n),L.obj(e,t),t.points||(t.points=je.newInstance()),L.get(e,t,["points","pointsIds"]),vc(e,t)}const Sc=L.newInstance(Fa,"vtkCell");var re={newInstance:Sc,extend:Fa};function Tc(e,t){let n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}function Dc(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let i=0;i<a;++i){const{cellPointIds:c}=n.getCellPoints(i);c.forEach(o=>{e.incrementLinkCount(o)})}e.allocateLinks(r),t.maxId=r-1;for(let i=0;i<a;++i){const{cellPointIds:c}=n.getCellPoints(i);c.forEach(o=>{e.insertCellReference(o,s[o]++,i)})}}else{for(let i=0;i<a;i++)re.newInstance().getPointsIds().forEach(o=>{e.incrementLinkCount(o)});e.allocateLinks(r),t.maxId=r-1;for(let i=0;i<a;++i)re.newInstance().getPointsIds().forEach(o=>{e.insertCellReference(o,s[o]++,i)})}},e.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;t.array=Array(n).fill().map(()=>({ncells:0,cells:null})),t.extend=r,t.maxId=-1},e.initialize=()=>{t.array=null},e.getLink=n=>t.array[n],e.getNcells=n=>t.array[n].ncells,e.getCells=n=>t.array[n].cells,e.insertNextPoint=n=>{t.array.push({ncells:n,cells:Array(n)}),++t.maxId},e.insertNextCellReference=(n,r)=>{t.array[n].cells[t.array[n].ncells++]=r},e.deletePoint=n=>{t.array[n].ncells=0,t.array[n].cells=null},e.removeCellReference=(n,r)=>{t.array[r].cells=t.array[r].cells.filter(a=>a!==n),t.array[r].ncells=t.array[r].cells.length},e.addCellReference=(n,r)=>{t.array[r].cells[t.array[r].ncells++]=n},e.resizeCellList=(n,r)=>{t.array[n].cells.length=r},e.squeeze=()=>{Tc(t,t.maxId+1)},e.reset=()=>{t.maxId=-1},e.deepCopy=n=>{t.array=[...n.array],t.extend=n.extend,t.maxId=n.maxId},e.incrementLinkCount=n=>{++t.array[n].ncells},e.allocateLinks=n=>{for(let r=0;r<n;++r)t.array[r].cells=new Array(t.array[r].ncells)},e.insertCellReference=(n,r,a)=>{t.array[n].cells[r]=a}}const _c={array:null,maxId:0,extend:0};function ja(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,_c,n),L.obj(e,t),Dc(e,t)}const xc=L.newInstance(ja,"vtkCellLinks");var Lc={newInstance:xc,extend:ja};const $={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_QUAD:9,VTK_QUADRATIC_EDGE:21,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42},Ge=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function Mc(e){return e<Ge.length?Ge[e]:"UnknownClass"}function Nc(e){return Ge.findIndex(e)}function Ic(e){return e<$.VTK_QUADRATIC_EDGE||e===$.VTK_CONVEX_POINT_SET||e===$.VTK_POLYHEDRON}function Ac(e){return e===$.VTK_TRIANGLE_STRIP||e===$.VTK_POLY_LINE||e===$.VTK_POLY_VERTEX}const Rc={getClassNameFromTypeId:Mc,getTypeIdFromClassName:Nc,isLinear:Ic,hasSubCells:Ac};function kc(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;t.size=n>0?n:1,t.extend=r>0?r:1,t.maxId=-1,t.typeArray=new Uint8Array(n),t.locationArray=new Uint32Array(n)},e.insertCell=(n,r,a)=>{t.typeArray[n]=r,t.locationArray[n]=a,n>t.maxId&&(t.maxId=n)},e.insertNextCell=(n,r)=>(e.insertCell(++t.maxId,n,r),t.maxId),e.setCellTypes=(n,r,a)=>{t.size=n,t.typeArray=r,t.locationArray=a,t.maxId=n-1},e.getCellLocation=n=>t.locationArray[n],e.deleteCell=n=>{t.typeArray[n]=$.VTK_EMPTY_CELL},e.getNumberOfTypes=()=>t.maxId+1,e.isType=n=>{const r=e.getNumberOfTypes();for(let a=0;a<r;++a)if(n===e.getCellType(a))return!0;return!1},e.insertNextType=n=>e.insertNextCell(n,-1),e.getCellType=n=>t.typeArray[n],e.reset=()=>{t.maxId=-1},e.deepCopy=n=>{e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}const Vc={size:0,maxId:-1,extend:1e3};function Ga(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Vc,n),L.obj(e,t),L.get(e,t,["size","maxId","extend"]),L.getArray(e,t,["typeArray","locationArray"]),kc(e,t)}const $c=L.newInstance(Ga,"vtkCellTypes");var bc={newInstance:$c,extend:Ga,...Rc};const Uc={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var za={IntersectionState:Uc};const{IntersectionState:Wt}=za;function vt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const a={t:Number.MIN_VALUE,distance:0},s=[];let i;s[0]=n[0]-t[0],s[1]=n[1]-t[1],s[2]=n[2]-t[2];const c=s[0]*(e[0]-t[0])+s[1]*(e[1]-t[1])+s[2]*(e[2]-t[2]),o=V(s,s);let u=1e-5*c;return o!==0&&(a.t=c/o),u<0&&(u=-u),-u<o&&o<u||o<=0||a.t<0?i=t:a.t>1?i=n:(i=s,s[0]=t[0]+a.t*s[0],s[1]=t[1]+a.t*s[1],s[2]=t[2]+a.t*s[2]),r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2]),a.distance=nt(i,e),a}function Ba(e,t,n,r,a,s){const i=[],c=[],o=[];a[0]=0,s[0]=0,ot(t,e,i),ot(r,n,c),ot(n,e,o);const u=[V(i,i),-V(i,c),-V(i,c),V(c,c)],f=[];if(f[0]=V(i,o),f[1]=-V(c,o),no(u,f,2)===0){let l=Number.MAX_VALUE;const g=[e,t,n,r],h=[n,n,e,e],y=[r,r,t,t];s[0],s[0],a[0],a[0],a[0],a[0],s[0],s[0];let p;for(let d=0;d<4;d++)p=vt(g[d],h[d],y[d]),p.distance<l&&(l=p.distance);return Wt.ON_LINE}return a[0]=f[0],s[0]=f[1],a[0]>=0&&a[0]<=1&&s[0]>=0&&s[0]<=1?Wt.YES_INTERSECTION:Wt.NO_INTERSECTION}const Fc={distanceToLine:vt,intersection:Ba};function jc(e,t){t.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}e.getCellDimension=()=>1,e.intersectWithLine=(r,a,s,i,c)=>{const o={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};c[1]=0,c[2]=0;const u=[],f=[],l=[];t.points.getPoint(0,f),t.points.getPoint(1,l);const g=[],h=[],y=Ba(r,a,f,l,g,h);if(o.t=g[0],o.betweenPoints=n(o.t),c[0]=h[0],y===Wt.YES_INTERSECTION){for(let p=0;p<3;p++)i[p]=f[p]+c[0]*(l[p]-f[p]),u[p]=r[p]+o.t*(a[p]-r[p]);if(nt(i,u)<=s*s)return o.intersect=1,o}else{let p;if(o.t<0)return p=vt(r,f,l,i),p.distance<=s*s&&(o.t=0,o.intersect=1,o.betweenPoints=!0),o;if(o.t>1)return p=vt(a,f,l,i),p.distance<=s*s&&(o.t=1,o.intersect=1,o.betweenPoints=!0),o;if(c[0]<0)return c[0]=0,p=vt(f,r,a,i),o.t=p.t,p.distance<=s*s&&(o.intersect=1),o;if(c[0]>1)return c[0]=1,p=vt(l,r,a,i),o.t=p.t,p.distance<=s*s&&(o.intersect=1),o}return o},e.evaluateLocation=(r,a,s)=>{const i=[],c=[];t.points.getPoint(0,i),t.points.getPoint(1,c);for(let o=0;o<3;o++)a[o]=i[o]+r[0]*(c[o]-i[o]);s[0]=1-r[0],s[1]=r[0]},e.evaluateOrientation=(r,a,s)=>t.orientations?(Pt(a,t.orientations[0],t.orientations[1],r[0]),s[0]=1-r[0],s[1]=r[0],!0):!1}const Gc={orientations:null};function Pa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Gc,n),re.extend(e,t,n),L.setGet(e,t,["orientations"]),jc(e,t)}const zc=L.newInstance(Pa,"vtkLine");var W={newInstance:zc,extend:Pa,...Fc,...za};function Bc(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=J(t.points):t.points=je.newInstance(),e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.getBounds=()=>t.points.getBounds(),e.computeBounds=()=>{e.getBounds()};const n=e.shallowCopy;e.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),t.points=je.newInstance(),t.points.shallowCopy(r.getPoints())}}const Pc={};function Wa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Pc,n),aa.extend(e,t,n),L.setGet(e,t,["points"]),Bc(e,t)}const Wc=L.newInstance(Wa,"vtkPointSet");var Kc={newInstance:Wc,extend:Wa};function hn(e,t,n,r){const a=n[0]-t[0],s=n[1]-t[1],i=n[2]-t[2],c=e[0]-t[0],o=e[1]-t[1],u=e[2]-t[2];r[0]=s*u-i*o,r[1]=i*c-a*u,r[2]=a*o-s*c}function ae(e,t,n,r){hn(e,t,n,r);const a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);a!==0&&(r[0]/=a,r[1]/=a,r[2]/=a)}function Hc(e,t,n,r,a,s){let i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,c=!1;const o=[],u=[],f=[],l=[],g=[];ae(e,t,n,l),ae(r,a,s,g);const h=-V(l,e),y=-V(g,r),p=[V(g,e)+y,V(g,t)+y,V(g,n)+y];if(p[0]*p[1]>i&&p[0]*p[2]>i)return{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f};const d=[V(l,r)+h,V(l,a)+h,V(l,s)+h];if(d[0]*d[1]>i&&d[0]*d[2]>i)return{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f};if(Math.abs(l[0]-g[0])<1e-9&&Math.abs(l[1]-g[1])<1e-9&&Math.abs(l[2]-g[2])<1e-9&&Math.abs(h-y)<1e-9)return c=!0,{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f};const C=[e,t,n],v=[r,a,s],m=V(l,g),E=(h-y*m)/(m*m-1),O=(y-h*m)/(m*m-1),w=[E*l[0]+O*g[0],E*l[1]+O*g[1],E*l[2]+O*g[2]],T=Kr(l,g,[]);Qi(T);let S=0,D=0;const _=[],x=[];let I=50,N=50;for(let A=0;A<3;A++){const P=A,tt=(A+1)%3,st=pt.intersectWithLine(C[P],C[tt],r,g);st.intersection&&st.t>0-i&&st.t<1+i&&(st.t<1+i&&st.t>1-i&&(I=S),_[S++]=V(st.x,T)-V(w,T));const q=pt.intersectWithLine(v[P],v[tt],e,l);q.intersection&&q.t>0-i&&q.t<1+i&&(q.t<1+i&&q.t>1-i&&(N=D),x[D++]=V(q.x,T)-V(w,T))}if(S>2){S--;const A=_[2];_[2]=_[I],_[I]=A}if(D>2){D--;const A=x[2];x[2]=x[N],x[N]=A}if(S!==2||D!==2)return{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f};if(Number.isNaN(_[0])||Number.isNaN(_[1])||Number.isNaN(x[0])||Number.isNaN(x[1]))return{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f};if(_[0]>_[1]){const A=_[1];_[1]=_[0],_[0]=A}if(x[0]>x[1]){const A=x[1];x[1]=x[0],x[0]=A}let M,k;return _[1]<x[0]||x[1]<_[0]?{intersect:!1,coplanar:c,pt1:o,pt2:u,surfaceId:f}:(_[0]<x[0]?_[1]<x[1]?(f[0]=2,f[1]=1,M=x[0],k=_[1]):(f[0]=2,f[1]=2,M=x[0],k=x[1]):_[1]<x[1]?(f[0]=1,f[1]=1,M=_[0],k=_[1]):(f[0]=1,f[1]=2,M=_[0],k=x[1]),kn(w,T,M,o),kn(w,T,k,u),{intersect:!0,coplanar:c,pt1:o,pt2:u,surfaceId:f})}const Yc={computeNormalDirection:hn,computeNormal:ae,intersectWithTriangle:Hc};function Xc(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=()=>2,e.intersectWithLine=(n,r,a,s,i)=>{const c={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};i[2]=0;const o=[],u=a*a,f=[],l=[],g=[];t.points.getPoint(0,f),t.points.getPoint(1,l),t.points.getPoint(2,g);const h=[],y=[];if(ae(f,l,g,h),h[0]!==0||h[1]!==0||h[2]!==0){const m=pt.intersectWithLine(n,r,f,h);if(c.betweenPoints=m.betweenPoints,c.t=m.t,s[0]=m.x[0],s[1]=m.x[1],s[2]=m.x[2],!m.intersection)return i[0]=0,i[1]=0,c.intersect=0,c;const E=e.evaluatePosition(s,o,i,y);if(E.evaluation>=0)return E.dist2<=u?(c.intersect=1,c):(c.intersect=E.evaluation,c)}const p=nt(f,l),d=nt(l,g),C=nt(g,f);t.line||(t.line=W.newInstance()),p>d&&p>C?(t.line.getPoints().setPoint(0,f),t.line.getPoints().setPoint(1,l)):d>C&&d>p?(t.line.getPoints().setPoint(0,l),t.line.getPoints().setPoint(1,g)):(t.line.getPoints().setPoint(0,g),t.line.getPoints().setPoint(1,f));const v=t.line.intersectWithLine(n,r,a,s,i);if(c.betweenPoints=v.betweenPoints,c.t=v.t,v.intersect){const m=[],E=[],O=[];for(let w=0;w<3;w++)m[w]=f[w]-g[w],E[w]=l[w]-g[w],O[w]=s[w]-g[w];return i[0]=V(O,m)/C,i[1]=V(O,E)/d,c.intersect=1,c}return i[0]=0,i[1]=0,c.intersect=0,c},e.evaluatePosition=(n,r,a,s)=>{const i={subId:0,dist2:0,evaluation:-1};let c,o;const u=[],f=[],l=[],g=[];let h;const y=[],p=[],d=[];let C=0,v=0;const m=[];let E,O,w,T=[];const S=[],D=[],_=[];i.subId=0,a[2]=0,t.points.getPoint(1,u),t.points.getPoint(2,f),t.points.getPoint(0,l),hn(u,f,l,g),pt.generalizedProjectPoint(n,u,g,_);let x=0;for(c=0;c<3;c++)g[c]<0?h=-g[c]:h=g[c],h>x&&(x=h,v=c);for(o=0,c=0;c<3;c++)c!==v&&(m[o++]=c);for(c=0;c<2;c++)y[c]=_[m[c]]-l[m[c]],p[c]=u[m[c]]-l[m[c]],d[c]=f[m[c]]-l[m[c]];if(C=Bt(p,d),C===0)return a[0]=0,a[1]=0,i.evaluation=-1,i;if(a[0]=Bt(y,d)/C,a[1]=Bt(p,y)/C,s[0]=1-(a[0]+a[1]),s[1]=a[0],s[2]=a[1],s[0]>=0&&s[0]<=1&&s[1]>=0&&s[1]<=1&&s[2]>=0&&s[2]<=1)r&&(i.dist2=nt(_,n),r[0]=_[0],r[1]=_[1],r[2]=_[2]),i.evaluation=1;else{let I;if(r){if(s[1]<0&&s[2]<0)for(E=nt(n,l),O=W.distanceToLine(n,u,l,I,S),w=W.distanceToLine(n,l,f,I,D),E<O?(i.dist2=E,T=l):(i.dist2=O,T=S),w<i.dist2&&(i.dist2=w,T=D),c=0;c<3;c++)r[c]=T[c];else if(s[2]<0&&s[0]<0)for(E=nt(n,u),O=W.distanceToLine(n,u,l,I,S),w=W.distanceToLine(n,u,f,I,D),E<O?(i.dist2=E,T=u):(i.dist2=O,T=S),w<i.dist2&&(i.dist2=w,T=D),c=0;c<3;c++)r[c]=T[c];else if(s[1]<0&&s[0]<0)for(E=nt(n,f),O=W.distanceToLine(n,f,l,I,S),w=W.distanceToLine(n,u,f,I,D),E<O?(i.dist2=E,T=f):(i.dist2=O,T=S),w<i.dist2&&(i.dist2=w,T=D),c=0;c<3;c++)r[c]=T[c];else if(s[0]<0){const N=W.distanceToLine(n,u,f,r);i.dist2=N.distance}else if(s[1]<0){const N=W.distanceToLine(n,f,l,r);i.dist2=N.distance}else if(s[2]<0){const N=W.distanceToLine(n,u,l,r);i.dist2=N.distance}}i.evaluation=0}return i},e.evaluateLocation=(n,r,a)=>{const s=[],i=[],c=[];t.points.getPoint(0,s),t.points.getPoint(1,i),t.points.getPoint(2,c);const o=1-n[0]-n[1];for(let u=0;u<3;u++)r[u]=s[u]*o+i[u]*n[0]+c[u]*n[1];a[0]=o,a[1]=n[0],a[2]=n[1]},e.getParametricDistance=n=>{let r,a=0;const s=[];s[0]=n[0],s[1]=n[1],s[2]=1-n[0]-n[1];for(let i=0;i<3;i++)s[i]<0?r=-s[i]:s[i]>1?r=s[i]-1:r=0,r>a&&(a=r);return a}}const Jc={};function Ka(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,Jc,n),re.extend(e,t,n),Xc(e,t)}const qc=L.newInstance(Ka,"vtkTriangle");var Zc={newInstance:qc,extend:Ka,...Yc};const Me=["verts","lines","polys","strips"],{vtkWarningMacro:Bn}=L,Qc={[$.VTK_LINE]:W,[$.VTK_POLY_LINE]:W,[$.VTK_TRIANGLE]:Zc};function tu(e,t){t.classHierarchy.push("vtkPolyData");function n(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,s=>s.toUpperCase()).replace(/\s+/g,"")}Me.forEach(a=>{e[`getNumberOf${n(a)}`]=()=>t[a].getNumberOfCells(),t[a]?t[a]=J(t[a]):t[a]=zn.newInstance()}),e.getNumberOfCells=()=>Me.reduce((a,s)=>a+t[s].getNumberOfCells(),0);const r=e.shallowCopy;e.shallowCopy=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(a,s),Me.forEach(i=>{t[i]=zn.newInstance(),t[i].shallowCopy(a.getReferenceByName(i))})},e.buildCells=()=>{const a=e.getNumberOfVerts(),s=e.getNumberOfLines(),i=e.getNumberOfPolys(),c=e.getNumberOfStrips(),o=a+s+i+c,u=new Uint8Array(o);let f=u;const l=new Uint32Array(o);let g=l;if(a){let h=0;t.verts.getCellSizes().forEach((y,p)=>{g[p]=h,f[p]=y>1?$.VTK_POLY_VERTEX:$.VTK_VERTEX,h+=y+1}),g=g.subarray(a),f=f.subarray(a)}if(s){let h=0;t.lines.getCellSizes().forEach((y,p)=>{g[p]=h,f[p]=y>2?$.VTK_POLY_LINE:$.VTK_LINE,y===1&&Bn("Building VTK_LINE ",p," with only one point, but VTK_LINE needs at least two points. Check the input."),h+=y+1}),g=g.subarray(s),f=f.subarray(s)}if(i){let h=0;t.polys.getCellSizes().forEach((y,p)=>{switch(g[p]=h,y){case 3:f[p]=$.VTK_TRIANGLE;break;case 4:f[p]=$.VTK_QUAD;break;default:f[p]=$.VTK_POLYGON;break}y<3&&Bn("Building VTK_TRIANGLE ",p," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),h+=y+1}),g+=g.subarray(i),f+=f.subarray(i)}if(c){let h=0;f.fill($.VTK_TRIANGLE_STRIP,0,c),t.strips.getCellSizes().forEach((y,p)=>{g[p]=h,h+=y+1})}t.cells=bc.newInstance(),t.cells.setCellTypes(o,u,l)},e.buildLinks=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;t.cells===void 0&&e.buildCells(),t.links=Lc.newInstance(),a>0?t.links.allocate(a):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellType=a=>t.cells.getCellType(a),e.getCellPoints=a=>{const s=e.getCellType(a);let i=null;switch(s){case $.VTK_VERTEX:case $.VTK_POLY_VERTEX:i=t.verts;break;case $.VTK_LINE:case $.VTK_POLY_LINE:i=t.lines;break;case $.VTK_TRIANGLE:case $.VTK_QUAD:case $.VTK_POLYGON:i=t.polys;break;case $.VTK_TRIANGLE_STRIP:i=t.strips;break;default:return i=null,{type:0,cellPointIds:null}}const c=t.cells.getCellLocation(a),o=i.getCell(c);return{cellType:s,cellPointIds:o}},e.getPointCells=a=>t.links.getCells(a),e.getCellEdgeNeighbors=(a,s,i)=>{const c=t.links.getLink(s),o=t.links.getLink(i);return c.cells.filter(u=>u!==a&&o.cells.indexOf(u)!==-1)},e.getCell=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=e.getCellPoints(a),c=s||Qc[i.cellType].newInstance();return c.initialize(e.getPoints(),i.cellPointIds),c}}const eu={};function Ha(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,eu,n),Kc.extend(e,t,n),L.get(e,t,["cells","links"]),L.setGet(e,t,["verts","lines","polys","strips"]),tu(e,t)}const nu=L.newInstance(Ha,"vtkPolyData");var yn={newInstance:nu,extend:Ha};function Ne(e){const t=e.indexOf(":");return e.substring(t+1)}const ru=1073741824;class au{constructor(){this._imageCache=new Map,this._volumeCache=new Map,this._geometryCache=new Map,this._imageCacheSize=0,this._maxCacheSize=3*ru,this._geometryCacheSize=0,this.setMaxCacheSize=t=>{if(!t||typeof t!="number"){const n=`New max cacheSize ${this._maxCacheSize} should be defined and should be a number.`;throw new Error(n)}this._maxCacheSize=t},this.isCacheable=t=>{const n=this.getBytesAvailable(),r=Array.from(this._imageCache.values()).reduce((s,i)=>i.sharedCacheKey?s:s+i.sizeInBytes,0);return n+r>=t},this.getMaxCacheSize=()=>this._maxCacheSize,this.getCacheSize=()=>this._imageCacheSize,this._decacheImage=(t,n=!1)=>{const r=this._imageCache.get(t);if(!r)return;if(r.sharedCacheKey&&!n)throw new Error("Cannot decache an image with a shared cache key. You need to manually decache the volume first.");const{imageLoadObject:a}=r;a!=null&&a.cancelFn&&a.cancelFn(),a!=null&&a.decache&&a.decache(),this._imageCache.delete(t)},this._decacheVolume=t=>{const n=this._volumeCache.get(t);if(!n)return;const{volumeLoadObject:r,volume:a}=n;a&&(a.cancelLoading&&a.cancelLoading(),a.imageData&&a.imageData.delete(),r.cancelFn&&r.cancelFn(),a.imageIds&&a.imageIds.forEach(s=>{const i=this._imageCache.get(s);i&&i.sharedCacheKey===t&&(i.sharedCacheKey=void 0)}),this._volumeCache.delete(t))},this.purgeCache=()=>{const t=this._imageCache.keys();for(this.purgeVolumeCache();;){const{value:n,done:r}=t.next();if(r)break;this.removeImageLoadObject(n,{force:!0}),Z(H,B.IMAGE_CACHE_IMAGE_REMOVED,{imageId:n})}},this.purgeVolumeCache=()=>{const t=this._volumeCache.keys();for(;;){const{value:n,done:r}=t.next();if(r)break;this.removeVolumeLoadObject(n),Z(H,B.VOLUME_CACHE_VOLUME_REMOVED,{volumeId:n})}},this.getVolumeLoadObject=t=>{if(t===void 0)throw new Error("getVolumeLoadObject: volumeId must not be undefined");const n=this._volumeCache.get(t);if(n)return n.timeStamp=Date.now(),n.volumeLoadObject},this.putGeometryLoadObject=(t,n)=>{if(t===void 0)throw new Error("putGeometryLoadObject: geometryId must not be undefined");if(n.promise===void 0)throw new Error("putGeometryLoadObject: geometryLoadObject.promise must not be undefined");if(this._geometryCache.has(t))throw new Error("putGeometryLoadObject: geometryId already present in geometryCache");if(n.cancelFn&&typeof n.cancelFn!="function")throw new Error("putGeometryLoadObject: geometryLoadObject.cancel must be a function");const r={loaded:!1,geometryId:t,geometryLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._geometryCache.set(t,r),n.promise.then(a=>{try{this._putGeometryCommon(t,a,r)}catch(s){throw console.debug(`Error in _putGeometryCommon for geometry ${t}:`,s),s}}).catch(a=>{throw console.debug(`Error caching geometry ${t}:`,a),this._geometryCache.delete(t),a})},this.getGeometry=t=>{if(t===void 0)throw new Error("getGeometry: geometryId must not be undefined");const n=this._geometryCache.get(t);if(n)return n.timeStamp=Date.now(),n.geometry},this.removeGeometryLoadObject=t=>{if(t===void 0)throw new Error("removeGeometryLoadObject: geometryId must not be undefined");const n=this._geometryCache.get(t);if(!n)throw new Error("removeGeometryLoadObject: geometryId was not present in geometryCache");this.decrementGeometryCacheSize(n.sizeInBytes);const r={geometry:n,geometryId:t};Z(H,B.GEOMETRY_CACHE_GEOMETRY_REMOVED,r),this._decacheGeometry(t)},this._decacheGeometry=t=>{const n=this._geometryCache.get(t);if(!n)return;const{geometryLoadObject:r}=n;r.cancelFn&&r.cancelFn(),r.decache&&r.decache(),this._geometryCache.delete(t)},this.incrementGeometryCacheSize=t=>{this._geometryCacheSize+=t},this.decrementGeometryCacheSize=t=>{this._geometryCacheSize-=t},this.getImage=(t,n=Xt.FAR_REPLICATE)=>{var a;if(t===void 0)throw new Error("getImage: imageId must not be undefined");const r=this._imageCache.get(t);if(r&&(r.timeStamp=Date.now(),!(((a=r.image)==null?void 0:a.imageQualityStatus)<n)))return r.image},this.getVolume=(t,n=!1)=>{var a;if(t===void 0)throw new Error("getVolume: volumeId must not be undefined");const r=this._volumeCache.get(t);return r?(r.timeStamp=Date.now(),r.volume):n?(a=[...this._volumeCache.values()].find(s=>s.volumeId.includes(t)))==null?void 0:a.volume:void 0},this.getVolumes=()=>Array.from(this._volumeCache.values()).map(n=>n.volume),this.filterVolumesByReferenceId=t=>this.getVolumes().filter(r=>r.referencedVolumeId===t),this.removeImageLoadObject=(t,{force:n=!1}={})=>{if(t===void 0)throw new Error("removeImageLoadObject: imageId must not be undefined");const r=this._imageCache.get(t);if(!r)throw new Error("removeImageLoadObject: imageId was not present in imageCache");this._decacheImage(t,n),this.incrementImageCacheSize(-r.sizeInBytes);const a={image:r,imageId:t};Z(H,B.IMAGE_CACHE_IMAGE_REMOVED,a)},this.removeVolumeLoadObject=t=>{if(t===void 0)throw new Error("removeVolumeLoadObject: volumeId must not be undefined");const n=this._volumeCache.get(t);if(!n)throw new Error("removeVolumeLoadObject: volumeId was not present in volumeCache");const r={volume:n,volumeId:t};Z(H,B.VOLUME_CACHE_VOLUME_REMOVED,r),this._decacheVolume(t)},this.incrementImageCacheSize=t=>{this._imageCacheSize+=t},this.decrementImageCacheSize=t=>{this._imageCacheSize-=t},this.getGeometryLoadObject=t=>{if(t===void 0)throw new Error("getGeometryLoadObject: geometryId must not be undefined");const n=this._geometryCache.get(t);if(n)return n.timeStamp=Date.now(),n.geometryLoadObject}}getBytesAvailable(){return this.getMaxCacheSize()-this.getCacheSize()}decacheIfNecessaryUntilBytesAvailable(t,n){let r=this.getBytesAvailable();if(r>=t)return r;const a=Array.from(this._imageCache.values()).filter(o=>!o.sharedCacheKey);function s(o,u){return o.timeStamp>u.timeStamp?1:o.timeStamp<u.timeStamp?-1:0}a.sort(s);const i=a.map(o=>o.imageId);let c=i;n&&(c=i.filter(o=>!n.includes(o)));for(const o of c)if(this.removeImageLoadObject(o),Z(H,B.IMAGE_CACHE_IMAGE_REMOVED,{imageId:o}),r=this.getBytesAvailable(),r>=t)return r;for(const o of i)if(this.removeImageLoadObject(o),Z(H,B.IMAGE_CACHE_IMAGE_REMOVED,{imageId:o}),r=this.getBytesAvailable(),r>=t)return r}_putImageCommon(t,n,r){if(!this._imageCache.has(t)){console.warn("The image was purged from the cache before it completed loading.");return}if(!n){console.warn("Image is undefined");return}if(n.sizeInBytes===void 0||Number.isNaN(n.sizeInBytes))throw new Error("_putImageCommon: image.sizeInBytes must not be undefined");if(n.sizeInBytes.toFixed===void 0)throw new Error("_putImageCommon: image.sizeInBytes is not a number");if(!this.isCacheable(n.sizeInBytes))throw new Error(B.CACHE_SIZE_EXCEEDED);this.decacheIfNecessaryUntilBytesAvailable(n.sizeInBytes),r.loaded=!0,r.image=n,r.sizeInBytes=n.sizeInBytes,this.incrementImageCacheSize(r.sizeInBytes);const a={image:r};Z(H,B.IMAGE_CACHE_IMAGE_ADDED,a),r.sharedCacheKey=n.sharedCacheKey}async putImageLoadObject(t,n){if(t===void 0)throw console.error("putImageLoadObject: imageId must not be undefined"),new Error("putImageLoadObject: imageId must not be undefined");if(n.promise===void 0)throw console.error("putImageLoadObject: imageLoadObject.promise must not be undefined"),new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");const r=this._imageCache.get(t);if(r!=null&&r.imageLoadObject)throw console.warn(`putImageLoadObject: imageId ${t} already in cache`),new Error("putImageLoadObject: imageId already in cache");if(n.cancelFn&&typeof n.cancelFn!="function")throw console.error("putImageLoadObject: imageLoadObject.cancel must be a function"),new Error("putImageLoadObject: imageLoadObject.cancel must be a function");const a={...r,loaded:!1,imageId:t,sharedCacheKey:void 0,imageLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._imageCache.set(t,a),this._imageCache.set(t,a),n.promise.then(s=>{try{this._putImageCommon(t,s,a)}catch(i){throw console.debug(`Error in _putImageCommon for image ${t}:`,i),i}}).catch(s=>{throw console.debug(`Error caching image ${t}:`,s),this._imageCache.delete(t),s})}putImageSync(t,n){if(t===void 0)throw new Error("putImageSync: imageId must not be undefined");if(this._imageCache.has(t))throw new Error("putImageSync: imageId already in cache");const r={loaded:!1,imageId:t,sharedCacheKey:void 0,imageLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._imageCache.set(t,r);try{this._putImageCommon(t,n,r)}catch(a){throw this._imageCache.delete(t),a}}getImageLoadObject(t){if(t===void 0)throw new Error("getImageLoadObject: imageId must not be undefined");const n=this._imageCache.get(t);if(n)return n.timeStamp=Date.now(),n.imageLoadObject}isLoaded(t){const n=this._imageCache.get(t);return n?n.loaded:!1}getVolumeContainingImageId(t){const n=Array.from(this._volumeCache.keys()),r=Ne(t);for(const a of n){const s=this._volumeCache.get(a);if(!s)return;const{volume:i}=s;if(!i.imageIds.length)return;const c=i.getImageURIIndex(r);if(c>-1)return{volume:i,imageIdIndex:c}}}getCachedImageBasedOnImageURI(t){const n=Ne(t),a=Array.from(this._imageCache.keys()).find(s=>Ne(s)===n);if(a)return this._imageCache.get(a)}_putVolumeCommon(t,n,r){var s;if(!this._volumeCache.get(t)){console.warn("The volume was purged from the cache before it completed loading.");return}r.loaded=!0,r.volume=n,(s=n.imageIds)==null||s.forEach(i=>{const c=this._imageCache.get(i);c&&(c.sharedCacheKey=t)});const a={volume:r};Z(H,B.VOLUME_CACHE_VOLUME_ADDED,a)}putVolumeSync(t,n){if(t===void 0)throw new Error("putVolumeSync: volumeId must not be undefined");if(this._volumeCache.has(t))throw new Error("putVolumeSync: volumeId already in cache");const r={loaded:!1,volumeId:t,volumeLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._volumeCache.set(t,r);try{this._putVolumeCommon(t,n,r)}catch(a){throw this._volumeCache.delete(t),a}}async putVolumeLoadObject(t,n){if(t===void 0)throw new Error("putVolumeLoadObject: volumeId must not be undefined");if(n.promise===void 0)throw new Error("putVolumeLoadObject: volumeLoadObject.promise must not be undefined");if(this._volumeCache.has(t))throw new Error(`putVolumeLoadObject: volumeId:${t} already in cache`);if(n.cancelFn&&typeof n.cancelFn!="function")throw new Error("putVolumeLoadObject: volumeLoadObject.cancel must be a function");const r={loaded:!1,volumeId:t,volumeLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._volumeCache.set(t,r),n.promise.then(a=>{try{this._putVolumeCommon(t,a,r)}catch(s){throw console.error(`Error in _putVolumeCommon for volume ${t}:`,s),this._volumeCache.delete(t),s}}).catch(a=>{throw this._volumeCache.delete(t),a})}_putGeometryCommon(t,n,r){if(!this._geometryCache.get(t)){console.warn("The geometry was purged from the cache before it completed loading.");return}if(!n){console.warn("Geometry is undefined");return}if(n.sizeInBytes===void 0||Number.isNaN(n.sizeInBytes))throw new Error("_putGeometryCommon: geometry.sizeInBytes must not be undefined");if(n.sizeInBytes.toFixed===void 0)throw new Error("_putGeometryCommon: geometry.sizeInBytes is not a number");if(!this.isCacheable(n.sizeInBytes))throw new Error(B.CACHE_SIZE_EXCEEDED);this.decacheIfNecessaryUntilBytesAvailable(n.sizeInBytes),r.loaded=!0,r.geometry=n,r.sizeInBytes=n.sizeInBytes,this.incrementGeometryCacheSize(r.sizeInBytes);const a={geometry:r};Z(H,B.GEOMETRY_CACHE_GEOMETRY_ADDED,a)}putGeometrySync(t,n){if(t===void 0)throw new Error("putGeometrySync: geometryId must not be undefined");if(this._geometryCache.has(t))throw new Error("putGeometrySync: geometryId already in cache");const r={loaded:!1,geometryId:t,geometryLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._geometryCache.set(t,r);try{this._putGeometryCommon(t,n,r)}catch(a){throw this._geometryCache.delete(t),a}}setPartialImage(t,n){const r=this._imageCache.get(t);if(!r){n&&this._imageCache.set(t,{image:n,imageId:t,loaded:!1,timeStamp:Date.now(),sizeInBytes:0});return}r.loaded&&(r.loaded=!1,r.imageLoadObject=null,this.incrementImageCacheSize(-r.sizeInBytes),r.sizeInBytes=0),r.image=n||r.image}getImageQuality(t){var r;const n=(r=this._imageCache.get(t))==null?void 0:r.image;return n?n.imageQualityStatus||Xt.FULL_RESOLUTION:void 0}}const kt=new au;function Ya(e,t,n){return Math.abs(e-t)<=n}function su(e,t,n=1e-5){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ya(e[r],t[r],n))return!1;return!0}function Pn(e){return typeof e=="number"}function Wn(e){return e&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>0&&typeof e[0]=="number"}function iu(e,t,n=1e-5){return typeof e!=typeof t||e===null||t===null?!1:Pn(e)&&Pn(t)?Ya(e,t,n):Wn(e)&&Wn(t)?su(e,t,n):!1}function Vt(e,t){return e.worldToIndex(t).map(Math.round)}const{vtkErrorMacro:Kn}=Br;function ou(e){const t=e.getPolys().getData(),n=e.getStrips().getData(),r={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(r.polyIdx<t.length){r.cellSize=t[r.polyIdx];const a=r.polyIdx+1,s=a+r.cellSize;r.polyIdx=s;let i=0;for(let c=a;c<s;++c)r.cell[i++]=t[c]}else if(r.stripIdx<n.length){r.cellSize=3,r.remainingStripLength===0&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);const a=r.stripIdx-2,s=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--;let i=0;for(let c=a;c<s;++c)r.cell[i++]=n[c]}else if(!r.done)r.done=!0;else throw new Error("Iterator is done")}};return r.next(),r}function cu(e,t){t.classHierarchy.push("vtkCutter");const n={...e};e.getMTime=()=>{let a=n.getMTime();return t.cutFunction&&(a=Math.max(a,t.cutFunction.getMTime())),a};function r(a,s){const i=a.getPoints(),c=i.getData(),o=i.getNumberOfPoints(),u=[],f=[],l=[];(!t.cutScalars||t.cutScalars.length<o)&&(t.cutScalars=new Float32Array(o));let g=0,h=0;for(;g<c.length;)t.cutScalars[h++]=t.cutFunction.evaluateFunction(c[g++],c[g++],c[g++]);const y=[],p=new Array(3),d=new Array(3),C=[];for(const m=ou(a);!m.done;m.next()){if(m.cellSize<=2)continue;for(let S=0;S<m.cellSize;)C[S]=t.cutScalars[m.cell[S++]];const E=C[0]>0;let O=!0;for(let S=1;S<m.cell.length;S++)if(C[S]>0!==E){O=!1;break}if(O)continue;const w=[];for(let S=0;S<m.cellSize;S++){const D=S+1===m.cellSize?0:S+1,_=C[S]>0;if(C[D]>0===_)continue;let I=S,N=D,M=C[N]-C[I];M<=0&&(I=D,N=S,M*=-1);let k=0;M!==0&&(k=(t.cutValue-C[I])/M);const A=m.cell[I],P=m.cell[N];p[0]=c[A*3],p[1]=c[A*3+1],p[2]=c[A*3+2],d[0]=c[P*3],d[1]=c[P*3+1],d[2]=c[P*3+2];const tt=[p[0]+k*(d[0]-p[0]),p[1]+k*(d[1]-p[1]),p[2]+k*(d[2]-p[2])];w.push({pointEdge1:A,pointEdge2:P,intersectedPoint:tt,newPointID:-1})}for(let S=0;S<w.length;S++){const D=w[S];let _=!1;for(let x=0;x<y.length;x++){const I=y[x],N=D.pointEdge1===I.pointEdge1&&D.pointEdge2===I.pointEdge2,M=D.intersectedPoint[0]===I.intersectedPoint[0]&&D.intersectedPoint[1]===I.intersectedPoint[1]&&D.intersectedPoint[2]===I.intersectedPoint[2];if(N||M){_=!0,w[S].newPointID=y[x].newPointID;break}}_||(u.push(D.intersectedPoint[0]),u.push(D.intersectedPoint[1]),u.push(D.intersectedPoint[2]),w[S].newPointID=u.length/3-1,y.push(w[S]))}const T=w.length;T===2?f.push(T,w[0].newPointID,w[1].newPointID):T>2&&(l.push(T),w.forEach(S=>{l.push(S.newPointID)}))}s.getPoints().setData(oe(i.getDataType(),u),3),f.length!==0&&s.getLines().setData(Uint16Array.from(f)),l.length!==0&&s.getPolys().setData(Uint16Array.from(l))}e.requestData=(a,s)=>{const i=a[0];if(!i){Kn("Invalid or missing input");return}if(!t.cutFunction){Kn("Missing cut function");return}const c=yn.newInstance();r(i,c),s[0]=c}}const uu={cutFunction:null,cutScalars:null,cutValue:0};function Xa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,uu,n),ue(e,t),He(e,t,1,1),le(e,t,["cutFunction","cutValue"]),cu(e,t)}const fu=ge(Xa,"vtkCutter");var lu={newInstance:fu,extend:Xa};class gu{constructor(t,n,r=1){this.rows=new Map,this.height=1,this.width=1,this.depth=1,this.jMultiple=1,this.kMultiple=1,this.numberOfComponents=1,this.defaultValue=0,this.pixelDataConstructor=Uint8Array,this.get=a=>{const s=a%this.jMultiple,i=(a-s)/this.jMultiple,c=this.getRLE(s,i);return(c==null?void 0:c.value)||this.defaultValue},this.getRun=(a,s)=>{const i=a+s*this.height;return this.rows.get(i)},this.set=(a,s)=>{if(s===void 0)throw new Error(`Can't set undefined at ${a%this.width}`);const i=a%this.width,c=(a-i)/this.width,o=this.rows.get(c);if(!o){this.rows.set(c,[{start:i,end:i+1,value:s}]);return}const u=this.findIndex(o,i),f=o[u],l=o[u-1];if(!f){if(!l||l.value!==s||l.end!==i){o[u]={start:i,end:i+1,value:s};return}l.end++;return}const{start:g,end:h,value:y}=f;if(s===y&&i>=g)return;const p={start:i,end:i+1,value:s},d=i>g,C=d?u+1:u,v=d?f:l;let m=d?o[u+1]:f;if((v==null?void 0:v.value)===s&&v.end===i){v.end++,(m==null?void 0:m.value)===s&&m.start===i+1?(v.end=m.end,o.splice(u,1)):(m==null?void 0:m.start)===i&&(m.start++,m.start===m.end&&(o.splice(u,1),m=o[u],(m==null?void 0:m.start)===i+1&&m.value===s&&(v.end=m.end,o.splice(u,1))));return}if((m==null?void 0:m.value)===s&&m.start===i+1){m.start--,(v==null?void 0:v.end)>i&&(v.end=i,v.end===v.start&&o.splice(u,1));return}if((m==null?void 0:m.start)===i&&m.end===i+1){m.value=s;const E=o[u+1];(E==null?void 0:E.start)==i+1&&(E==null?void 0:E.value)===s&&(o.splice(u+1,1),m.end=E.end);return}i===(m==null?void 0:m.start)&&m.start++,d&&h>i+1?o.splice(C,0,p,{start:i+1,end:v.end,value:v.value}):o.splice(C,0,p),(v==null?void 0:v.end)>i&&(v.end=i)},this.width=t,this.height=n,this.depth=r,this.jMultiple=t,this.kMultiple=this.jMultiple*n}getRLE(t,n,r=0){const a=this.rows.get(n+r*this.height);if(!a)return;const s=this.findIndex(a,t),i=a[s];return t>=(i==null?void 0:i.start)?i:void 0}findIndex(t,n){for(let r=0;r<t.length;r++){const{end:a}=t[r];if(n<a)return r}return t.length}clear(){this.rows.clear()}keys(){return[...this.rows.keys()]}getPixelData(t=0,n){n?n.fill(0):n=new this.pixelDataConstructor(this.width*this.height*this.numberOfComponents);const{width:r,height:a,numberOfComponents:s}=this;for(let i=0;i<a;i++){const c=this.getRun(i,t);if(c)if(s===1)for(const o of c){const u=i*r,{start:f,end:l,value:g}=o;for(let h=f;h<l;h++)n[u+h]=g}else for(const o of c){const u=i*r*s,{start:f,end:l,value:g}=o;for(let h=f;h<l;h+=s)for(let y=0;y<s;y++)n[u+h+y]=g[y]}}return n}}const hu=5*1024;class b{constructor(t,n,r){this.modifiedSlices=new Set,this.boundsIJK=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]],this.numberOfComponents=1,this.scalarData=null,this._sliceDataCache=null,this.getAtIJK=(a,s,i)=>{const c=this.toIndex([a,s,i]);return this._get(c)},this.setAtIJK=(a,s,i,c)=>{const o=this.toIndex([a,s,i]),u=this._set(o,c);return u!==!1&&(this.modifiedSlices.add(i),b.addBounds(this.boundsIJK,[a,s,i])),u},this.getAtIJKPoint=([a,s,i])=>this.getAtIJK(a,s,i),this.setAtIJKPoint=([a,s,i],c)=>{this.setAtIJK(a,s,i,c)},this.getAtIndex=a=>this._get(a),this.setAtIndex=(a,s)=>{const i=this._set(a,s);if(i!==!1){const c=this.toIJK(a);this.modifiedSlices.add(c[2]),b.addBounds(this.boundsIJK,c)}return i},this.getMiddleSliceData=()=>{const a=Math.floor(this.dimensions[2]/2);return this.getSliceData({sliceIndex:a,slicePlane:2})},this.forEach=(a,s={})=>{const i=s.boundsIJK||this.getBoundsIJK(),c=s.isInObject||this.isInObject||(()=>!0),o=s.returnPoints||!1,u=s.imageData,f=Math.min(i[0][0],i[0][1]),l=Math.max(i[0][0],i[0][1]),g=Math.min(i[1][0],i[1][1]),h=Math.max(i[1][0],i[1][1]),y=Math.min(i[2][0],i[2][1]),p=Math.max(i[2][0],i[2][1]),d=[];if(u){const{imageData:C}=s,v=C.getDirection(),m=v.slice(0,3),E=v.slice(3,6),O=v.slice(6,9),w=C.getSpacing(),[T,S,D]=w,_=G(f,g,y),x=C.indexToWorld(_),I=G(m[0]*T,m[1]*T,m[2]*T),N=G(E[0]*S,E[1]*S,E[2]*S),M=G(O[0]*D,O[1]*D,O[2]*D),k=_e(x);for(let A=y;A<=p;A++){const P=_e(k);for(let tt=g;tt<=h;tt++){const st=_e(k);for(let q=f;q<=l;q++){const Lt=[q,tt,A];if(c(k,Lt)){const de=this.toIndex(Lt),pn=this._get(de);o&&d.push({value:pn,index:de,pointIJK:Lt,pointLPS:k.slice()}),a&&a({value:pn,index:de,pointIJK:Lt,pointLPS:k})}xe(k,k,I)}Un(k,st),xe(k,k,N)}Un(k,P),xe(k,k,M)}return d}if(this.map){for(const C of this.map.keys()){const v=this.toIJK(C);if(!c(null,v))continue;const m=this._get(C);o&&d.push({value:m,index:C,pointIJK:v,pointLPS:null}),a({value:m,index:C,pointIJK:v,pointLPS:null})}return d}else{for(let C=y;C<=p;C++){const v=C*this.frameSize;for(let m=g;m<=h;m++){const E=v+m*this.width;for(let O=f,w=E+O;O<=l;O++,w++){const T=this.getAtIndex(w),S=[O,m,C];c(null,S)&&(o&&d.push({value:T,index:w,pointIJK:S,pointLPS:null}),a({value:T,index:w,pointIJK:[O,m,C],pointLPS:null}))}}}return d}},this.getSliceData=({sliceIndex:a,slicePlane:s})=>{const[i,c,o]=this.dimensions,u=i*c,f=a*u;let l;const g=this.getConstructor();function h(p){return typeof p=="function"}if(!h(g))return new Uint8Array(0);let y;switch(s){case 0:l=c*o,y=new g(l);for(let p=0;p<c;p++)for(let d=0;d<o;d++){const C=a+p*i+d*u;this.setSliceDataValue(y,p*o+d,this._get(C))}break;case 1:l=i*o,y=new g(l);for(let p=0;p<i;p++)for(let d=0;d<o;d++){const C=p+a*i+d*u;this.setSliceDataValue(y,p+d*i,this._get(C))}break;case 2:l=i*c,y=new g(l);for(let p=0;p<l;p++)this.setSliceDataValue(y,p,this._get(f+p));break;default:throw new Error("Oblique plane - todo - implement as ortho normal vector")}return y},this.dimensions=t,this.width=t[0],this.frameSize=this.width*t[1],this._get=n,this._set=r}toIJK(t){return[t%this.width,Math.floor(t%this.frameSize/this.width),Math.floor(t/this.frameSize)]}toIndex(t){return t[0]+t[1]*this.width+t[2]*this.frameSize}getDefaultBounds(){return this.dimensions.map(t=>[0,t-1])}getBoundsIJK(){return this.boundsIJK[0][0]<this.dimensions[0]?this.boundsIJK:this.getDefaultBounds()}getScalarData(){if(this.scalarData)return this.scalarData;if(this._getScalarData)return this._getScalarData();throw new Error("No scalar data available")}setScalarData(t){this.scalarData=t}getScalarDataLength(){if(this.scalarData)return this.scalarData.length;if(this._getScalarDataLength)return this._getScalarDataLength();throw new Error("No scalar data available")}get sizeInBytes(){return this.getScalarDataLength()*this.bytePerVoxel}get bytePerVoxel(){return this.scalarData?this.scalarData.BYTES_PER_ELEMENT:this._get(0).BYTES_PER_ELEMENT}clear(){var t;this.map&&this.map.clear(),this.boundsIJK.map(n=>{n[0]=1/0,n[1]=-1/0}),this.modifiedSlices.clear(),(t=this.points)==null||t.clear()}getConstructor(){return this.scalarData?this.scalarData.constructor:this._getConstructor?this._getConstructor():(console.warn("No scalar data available or can be used to get the constructor"),Float32Array)}getArrayOfModifiedSlices(){return Array.from(this.modifiedSlices)}resetModifiedSlices(){this.modifiedSlices.clear()}static addBounds(t,n){t||(t=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]]),t[0][0]=Math.min(n[0],t[0][0]),t[0][1]=Math.max(n[0],t[0][1]),t[1][0]=Math.min(n[1],t[1][0]),t[1][1]=Math.max(n[1],t[1][1]),t[2][0]=Math.min(n[2],t[2][0]),t[2][1]=Math.max(n[2],t[2][1])}addPoint(t){const n=Array.isArray(t)?t[0]+this.width*t[1]+this.frameSize*t[2]:t;this.points||(this.points=new Set),this.points.add(n)}getPoints(){return this.points?[...this.points].map(t=>this.toIJK(t)):[]}setSliceDataValue(t,n,r){if(Array.isArray(r))for(let a=0;a<r.length;a++)t[n*r.length+a]=this.toNumber(r[a]);else t[n]=this.toNumber(r)}toNumber(t){return typeof t=="number"?t:Array.isArray(t)&&t[0]||0}static _createRGBScalarVolumeVoxelManager({dimensions:t,scalarData:n,numberOfComponents:r=3}){const a=new b(t,s=>(s*=r,[n[s++],n[s++],n[s++]]),(s,i)=>{s*=3;const c=!iu(n[s],i);return n[s++]=i[0],n[s++]=i[1],n[s++]=i[2],c});return a.numberOfComponents=r,a.scalarData=n,a}static createImageVolumeVoxelManager({dimensions:t,imageIds:n,numberOfComponents:r=1}){const a=t[0]*t[1];function s(u){const f=Math.floor(u/a),l=n[f];if(!l)return console.warn(`ImageId not found for sliceIndex: ${f}`),{pixelData:null,pixelIndex:null};const g=kt.getImage(l);if(!g)return console.warn(`Image not found for imageId: ${l}`),{pixelData:null,pixelIndex:null};const h=g.voxelManager.getScalarData(),y=u%a*r;return{pixelData:h,pixelIndex:y}}function i(u){const{pixelData:f,pixelIndex:l}=s(u);return!f||l===null?null:r===1?f[l]:[f[l],f[l+1],f[l+2]]}function c(u,f){const{pixelData:l,pixelIndex:g}=s(u);if(!l||g===null)return!1;let h=!1;if(r===1)l[g]!==f&&(l[g]=f,h=!0);else{const y=f;for(let p=0;p<r;p++)l[g+p]!==y[p]&&(l[g+p]=y[p],h=!0)}return h}const o=new b(t,u=>i(u),(u,f)=>c(u,f));return o.numberOfComponents=r,o._getConstructor=()=>{const u=s(0);return u.pixelData?u.pixelData.constructor:null},o.getMiddleSliceData=()=>{const u=Math.floor(t[2]/2);return o.getSliceData({sliceIndex:u,slicePlane:2})},o.getRange=()=>{let u=1/0,f=-1/0;for(const l of n){const g=kt.getImage(l);g.minPixelValue<u&&(u=g.minPixelValue),g.maxPixelValue>f&&(f=g.maxPixelValue)}return[u,f]},o._getScalarDataLength=()=>{const{pixelData:u}=s(0);return u.length*t[2]},o.getCompleteScalarDataArray=()=>{const u=o._getConstructor();if(!u)return new Uint8Array(0);const f=o.getScalarDataLength(),l=new u(f),g=t[0]*t[1]*r;for(let h=0;h<t[2];h++){const{pixelData:y}=s(h*g/r);if(y){const p=h*g;if(r===1)l.set(y,p);else for(let d=0;d<y.length;d+=r)for(let C=0;C<r;C++)l[p+d+C]=y[d+C]}}return l},o.setCompleteScalarDataArray=u=>{const f=t[0]*t[1]*r,l=o._getConstructor();let g=1/0,h=-1/0;for(let y=0;y<t[2];y++){const{pixelData:p}=s(y*f/r);if(p&&l){const d=y*f,C=d+f,v=new l(f);v.set(u.subarray(d,C)),p.set(v);for(let O=0;O<v.length;O++){const w=v[O];g=Math.min(g,w),h=Math.max(h,w)}const m=n[y],E=kt.getImage(m);E&&(E.minPixelValue=g,E.maxPixelValue=h)}}for(let y=0;y<t[2];y++)o.modifiedSlices.add(y);o.boundsIJK=[[0,t[0]-1],[0,t[1]-1],[0,t[2]-1]]},o}static createScalarVolumeVoxelManager({dimensions:t,scalarData:n,numberOfComponents:r=1}){if(t.length!==3)throw new Error("Dimensions must be provided as [number, number, number] for [width, height, depth]");if(!r&&(r=n.length/t[0]/t[1]/t[2],r>4||r<1||r===2))throw new Error(`Number of components ${r} must be 1, 3 or 4`);return r>1?b._createRGBScalarVolumeVoxelManager({dimensions:t,scalarData:n,numberOfComponents:r}):b._createNumberVolumeVoxelManager({dimensions:t,scalarData:n})}static createScalarDynamicVolumeVoxelManager({imageIdGroups:t,dimensions:n,timePoint:r=0,numberOfComponents:a=1}){if(!a){const c=kt.getImage(t[0][0]);if(!c)throw new Error("Unable to determine number of components: No image found");if(a=c.getPixelData().length/(n[0]*n[1]),a>4||a<1||a===2)throw new Error(`Number of components ${a} must be 1, 3 or 4`)}const s=t.map(c=>b.createImageVolumeVoxelManager({dimensions:n,imageIds:c,numberOfComponents:a})),i=new b(n,c=>s[r]._get(c),(c,o)=>s[r]._set(c,o));return i.numberOfComponents=a,i.getScalarDataLength=()=>s[r].getScalarDataLength(),i.getConstructor=()=>s[r].getConstructor(),i.getRange=()=>s[r].getRange(),i.getMiddleSliceData=()=>s[r].getMiddleSliceData(),i.setTimePoint=c=>{r=c,i._get=o=>s[r]._get(o),i._set=(o,u)=>s[r]._set(o,u)},i.getAtIndexAndTimePoint=(c,o)=>s[o]._get(c),i.getTimePointScalarData=c=>s[c].getCompleteScalarDataArray(),i.getTimePointScalarData=c=>s[c].getCompleteScalarDataArray(),i.getCurrentTimePointScalarData=()=>s[r].getCompleteScalarDataArray(),i}static createImageVoxelManager({width:t,height:n,scalarData:r,numberOfComponents:a=1}){const s=[t,n,1];if(!a&&(a=r.length/t/n,a>4||a<1||a===2))throw new Error(`Number of components ${a} must be 1, 3 or 4`);return a>1?b._createRGBScalarVolumeVoxelManager({dimensions:s,scalarData:r,numberOfComponents:a}):b._createNumberVolumeVoxelManager({dimensions:s,scalarData:r})}static _createNumberVolumeVoxelManager({dimensions:t,scalarData:n}){const r=new b(t,a=>n[a],(a,s)=>{const i=n[a]!==s;return n[a]=s,i});return r.scalarData=n,r.getMiddleSliceData=()=>{const a=Math.floor(t[2]/2);return r.getSliceData({sliceIndex:a,slicePlane:2})},r}static createMapVoxelManager({dimension:t}){const n=new Map,r=new b(t,n.get.bind(n),(a,s)=>n.set(a,s)&&!0);return r.map=n,r}static createHistoryVoxelManager({sourceVoxelManager:t}){const n=new Map,{dimensions:r}=t,a=new b(r,s=>n.get(s),function(s,i){if(n.has(s))i===n.get(s)&&n.delete(s);else{const c=this.sourceVoxelManager.getAtIndex(s);if(c===i)return!1;n.set(s,c)}this.sourceVoxelManager.setAtIndex(s,i)});return a.map=n,a.scalarData=t.scalarData,a.sourceVoxelManager=t,a}static createLazyVoxelManager({dimensions:t,planeFactory:n}){const r=new Map,[a,s]=t,i=a*s,c=new b(t,o=>r.get(Math.floor(o/i))[o%i],(o,u)=>{const f=Math.floor(o/i);let l=r.get(f);return l||(l=n(a,s),r.set(f,l)),l[o%i]=u,!0});return c.map=r,c}static createRLEVoxelManager({dimensions:t}){const[n,r,a]=t,s=new gu(n,r,a),i=new b(t,c=>s.get(c),(c,o)=>(s.set(c,o),!0));return i.map=s,i.getPixelData=s.getPixelData.bind(s),i}static addInstanceToImage(t){const{width:n,height:r}=t,a=t.voxelManager.getScalarData();if(a.length>=n*r){t.voxelManager=b.createScalarVolumeVoxelManager({dimensions:[n,r,1],scalarData:a});return}t.voxelManager=b.createRLEVoxelManager({dimensions:[n,r,1]}),t.getPixelData=t.voxelManager.getPixelData,t.sizeInBytes=hu}}function yu(e,t){const n=[...e];return t>=n.length?(Hn(n),n):(Hn(n),n.slice(0,t))}function Hn(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}const Yn={Forward:1,Backward:-1},$t=new Set;function pu(e,t){e.requestData=(n,r)=>{const[a]=n;r[0]||(r[0]=yn.newInstance());const[s]=r;e.extractContours(a,s),s.modified()},e.traverseLoop=(n,r,a,s,i)=>{let c=a,o=s,u=!1,f=0;for(;!u;){const{cellPointIds:l}=n.getCellPoints(c);if(!l)continue;o=l[0]!==o?l[0]:l[1],f++;const g=r*f;i.push({t:g,ptId:o});const h=n.getPointCells(o);if(h.length!==2||o===s)return o;h.length===2?(c=h[0]!==c?h[0]:h[1],$t.add(c)):u=!0}return o},e.extractContours=(n,r)=>{var c;const a=[];$t.clear();const s=n.getLines();r.getPoints().setData(Float32Array.from(n.getPoints().getData()));for(let o=0;o<s.getNumberOfCells();o++){if($t.has(o))continue;const{cellPointIds:u}=n.getCellPoints(o);if(!u)continue;$t.add(o);const f=u[0],l=[];l.push({t:0,ptId:f});const g=e.traverseLoop(n,Yn.Forward,o,f,l);f!==g&&(e.traverseLoop(n,Yn.Backward,o,f,l),l.sort((h,y)=>h.t<y.t?-1:1),l.length&&l[0].ptId!==((c=l[l.length-1])==null?void 0:c.ptId)&&l.push({...l[l.length-1]})),l.length&&a.push(l)}const i=r.getLines();i.resize(0),a.forEach(o=>{i.insertNextCell(o.map(u=>u.ptId))})}}const du={};function Ja(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(t,du,n),L.obj(e,t),L.algo(e,t,1,1),pu(e)}const mu=L.newInstance(Ja,"vtkContourLoopExtraction");var Eu={newInstance:mu,extend:Ja};function Ou(e,t,n=!1){var f;let r=1/0,a=n?-1/0:0,s=1/0,i=n?-1/0:0,c=1/0,o=n?-1/0:0;const u=((f=e[0])==null?void 0:f.length)===3;for(let l=0;l<e.length;l++){const g=e[l];r=Math.min(g[0],r),a=Math.max(g[0],a),s=Math.min(g[1],s),i=Math.max(g[1],i),u&&(c=Math.min(g[2]??c,c),o=Math.max(g[2]??o,o))}return n||(r=Math.max(0,r),a=Math.min(1/0,a),s=Math.max(0,s),i=Math.min(1/0,i),u&&(c=Math.max(0,c),o=Math.min(1/0,o))),u?[[r,a],[s,i],[c,o]]:[[r,a],[s,i],null]}function Xn(e,t){return Ou(e,t,!0)}function Cu(e,t){if(e.length!==t.length)throw Error("Both points should have the same dimensionality");const[n,r,a=0]=e,[s,i,c=0]=t,o=s-n,u=i-r,f=c-a;return o*o+u*u+f*f}function vu(e){if(e.length<3)return!1;const t=e.length,n=e[0],r=e[t-1],a=Cu(n,r);return go(0,a)}function ze(e,t,n={closed:void 0}){if(e.length<3)return!1;const r=e.length;let a=0;const{closed:s,holes:i}=n;if(i!=null&&i.length){for(const u of i)if(ze(u,t))return!1}const c=!(s===void 0?vu(e):s),o=e.length-(c?1:2);for(let u=0;u<=o;u++){const f=e[u],l=u===r-1?0:u+1,g=e[l],h=f[0]>=g[0]?f[0]:g[0],y=f[1]>=g[1]?f[1]:g[1],p=f[1]<=g[1]?f[1]:g[1];if(t[0]<=h&&t[1]>=p&&t[1]<y){let v=f[0]===g[0];if(!v){const m=(t[1]-f[1])*(g[0]-f[0])/(g[1]-f[1])+f[0];v=t[0]<=m}a+=v?1:0}}return!!(a%2)}function Jn(e,t){let n=e;const r=(t==null?void 0:t.numDimensions)||2,a=r===3;if(!Array.isArray(e[0])){const l=e,g=l.length/r;n=new Array(l.length/r);for(let h=0,y=g;h<y;h++)n[h]=[l[h*r],l[h*r+1]],a&&n[h].push(l[h*r+2])}let s=1/0,i=1/0,c=-1/0,o=-1/0,u=1/0,f=-1/0;n=n;for(let l=0,g=n.length;l<g;l++){const[h,y,p]=n[l];s=s<h?s:h,i=i<y?i:y,c=c>h?c:h,o=o>y?o:y,a&&(u=u<p?u:p,f=f>p?f:p)}return a?{minX:s,maxX:c,minY:i,maxY:o,minZ:u,maxZ:f}:{minX:s,maxX:c,minY:i,maxY:o}}const wu=1e-6;function bt(e){let t;const n=yu(e,50);for(let i=0;i<3;i++)if(n.every((c,o,u)=>Math.abs(c[i]-u[0][i])<wu)){t=i;break}if(t===void 0)throw new Error("Cannot find a shared dimension index for polyline, probably oblique plane");const r=[],a=(t+1)%3,s=(t+2)%3;for(let i=0;i<e.length;i++)r.push([e[i][a],e[i][s]]);return{sharedDimensionIndex:t,projectedPolyline:r}}const Su=(e,t,n,r,a,s,i,c)=>{const o=[G(n,r,a),G(s,r,a),G(n,i,a),G(s,i,a),G(n,r,c),G(s,r,c),G(n,i,c),G(s,i,c)],u=G(t[0],t[1],t[2]),f=G(e[0],e[1],e[2]),l=-$e(u,f);let g=null;for(const h of o){const y=$e(u,h)+l;if(g===null)g=Math.sign(y);else if(Math.sign(y)!==g)return!0}return!1},Tu={polySeg:null,polySegInitializing:!1,polySegInitializingPromise:null,async initializePolySeg(e){var t;if(this.polySegInitializing){await this.polySegInitializingPromise;return}(t=this.polySeg)!=null&&t.instance||(this.polySegInitializing=!0,this.polySegInitializingPromise=new Promise(n=>{this.polySeg=new me,this.polySeg.initialize({updateProgress:e}).then(()=>{this.polySegInitializing=!1,n()})}),await this.polySegInitializingPromise)},async convertContourToSurface(e,...t){const{polylines:n,numPointsArray:r}=e,[a]=t;return await this.initializePolySeg(a),await this.polySeg.instance.convertContourRoiToSurface(n,r)},async convertLabelmapToSurface(e,...t){const[n]=t;return await this.initializePolySeg(n),this.polySeg.instance.convertLabelmapToSurface(e.scalarData,e.dimensions,e.spacing,e.direction,e.origin,[e.segmentIndex])},async convertContourToVolumeLabelmap(e,...t){const[n]=t;await(await new me).initialize({updateProgress:n});const{segmentIndices:a,scalarData:s,annotationUIDsInSegmentMap:i,dimensions:c,origin:o,direction:u,spacing:f}=e,l=b.createScalarVolumeVoxelManager({dimensions:c,scalarData:s}),g=Rt.newInstance();g.setDimensions(c),g.setOrigin(o),g.setDirection(u),g.setSpacing(f);const h=rt.newInstance({name:"Pixels",numberOfComponents:1,values:s});g.getPointData().setScalars(h),g.modified();for(const y of a){const p=i.get(y);for(const d of p){if(!d.polyline)continue;const{polyline:C,holesPolyline:v}=d,m=Xn(C),[E,O,w]=Vt(g,[m[0][0],m[1][0],m[2][0]]),[T,S,D]=Vt(g,[m[0][1],m[1][1],m[2][1]]),{projectedPolyline:_,sharedDimensionIndex:x}=bt(C),I=v==null?void 0:v.map(A=>{const{projectedPolyline:P}=bt(A);return P}),N=(x+1)%3,M=(x+2)%3;b.createScalarVolumeVoxelManager({dimensions:c,scalarData:s}).forEach(({pointIJK:A})=>{l.setAtIJKPoint(A,y)},{imageData:g,isInObject:A=>{const P=[A[N],A[M]];return ze(_,P,{holes:I})},boundsIJK:[[E,T],[O,S],[w,D]]})}}return l.scalarData},async convertContourToStackLabelmap(e,...t){const[n]=t;await(await new me).initialize({updateProgress:n});const{segmentationsInfo:a,annotationUIDsInSegmentMap:s,segmentIndices:i}=e,c=new Map;a.forEach((o,u)=>{const{dimensions:f,scalarData:l,direction:g,spacing:h,origin:y}=o,p=b.createScalarVolumeVoxelManager({dimensions:f,scalarData:l}),d=Rt.newInstance();d.setDimensions(f),d.setOrigin(y),d.setDirection(g),d.setSpacing(h);const C=rt.newInstance({name:"Pixels",numberOfComponents:1,values:l});d.getPointData().setScalars(C),d.modified(),c.set(u,{manager:p,imageData:d})});for(const o of i){const u=s.get(o);for(const f of u){if(!f.polyline)continue;const{polyline:l,holesPolyline:g,referencedImageId:h}=f,y=Xn(l),{manager:p,imageData:d}=c.get(h),[C,v,m]=Vt(d,[y[0][0],y[1][0],y[2][0]]),[E,O,w]=Vt(d,[y[0][1],y[1][1],y[2][1]]),{projectedPolyline:T,sharedDimensionIndex:S}=bt(l),D=g==null?void 0:g.map(N=>{const{projectedPolyline:M}=bt(N);return M}),_=(S+1)%3,x=(S+2)%3;b.createImageVoxelManager({width:d.getDimensions()[0],height:d.getDimensions()[1],scalarData:d.getPointData().getScalars().getData()}).forEach(({pointIJK:N})=>{p.setAtIJKPoint(N,o)},{imageData:d,isInObject:N=>{const M=[N[_],N[x]];return ze(T,M,{holes:D})},boundsIJK:[[C,E],[v,O],[m,w]]})}}return a.forEach((o,u)=>{const{manager:f}=c.get(u);o.scalarData=f.scalarData}),a},async convertSurfaceToVolumeLabelmap(e,...t){const[n]=t;return await this.initializePolySeg(n),this.polySeg.instance.convertSurfaceToLabelmap(e.points,e.polys,e.dimensions,e.spacing,e.direction,e.origin)},async convertSurfacesToVolumeLabelmap(e,...t){const[n]=t;await this.initializePolySeg(n);const{segmentsInfo:r}=e,a=Array.from(r.keys()).map(y=>{const{points:p,polys:d}=r.get(y);return{...this.polySeg.instance.convertSurfaceToLabelmap(p,d,e.dimensions,e.spacing,e.direction,e.origin),segmentIndex:y}}),s=await Promise.all(a),i=Rt.newInstance();i.setDimensions(e.dimensions),i.setOrigin(e.origin),i.setSpacing(e.spacing),i.setDirection(e.direction);const c=e.dimensions[0]*e.dimensions[1]*e.dimensions[2],o=rt.newInstance({name:"Pixels",numberOfComponents:1,values:new Uint8Array(c)});i.getPointData().setScalars(o),i.modified();const{dimensions:u}=e,f=i.getPointData().getScalars().getData(),l=b.createScalarVolumeVoxelManager({dimensions:u,scalarData:f}),g=s.map(y=>{const{data:p,dimensions:d,direction:C,origin:v,spacing:m}=y,E=Rt.newInstance();E.setDimensions(d),E.setOrigin(v),E.setSpacing(m),E.setDirection(C);const O=rt.newInstance({name:"Pixels",numberOfComponents:1,values:p});E.getPointData().setScalars(O),E.modified();const w=b.createScalarVolumeVoxelManager({dimensions:d,scalarData:p}),T=E.getExtent();return{volume:E,voxelManager:w,extent:T,scalarData:p,segmentIndex:y.segmentIndex}});return b.createScalarVolumeVoxelManager({dimensions:i.getDimensions(),scalarData:i.getPointData().getScalars().getData()}).forEach(({pointIJK:y,pointLPS:p})=>{try{for(const d of g){const{volume:C,extent:v,voxelManager:m,segmentIndex:E}=d,O=C.worldToIndex(p);if(O[0]<v[0]||O[0]>v[1]||O[1]<v[2]||O[1]>v[3]||O[2]<v[4]||O[2]>v[5])continue;const w=O.map(Math.round);if(m.getAtIJK(...w)>0){l.setAtIJKPoint(y,E);break}}}catch{}},{imageData:i}),l.scalarData},getSurfacesAABBs({surfacesInfo:e}){const t=new Map;for(const{points:n,id:r}of e){const a=Jn(n,{numDimensions:3});t.set(r,a)}return t},cutSurfacesIntoPlanes({planesInfo:e,surfacesInfo:t,surfacesAABB:n=new Map},r,a){const s=e.length,i=lu.newInstance(),c=pt.newInstance();i.setCutFunction(c);const o=yn.newInstance();try{for(const[u,f]of e.entries()){const{sliceIndex:l,planes:g}=f,h=new Map;for(const y of t){const{points:p,polys:d,id:C,segmentIndex:v}=y,m=n.get(C)||Jn(p,{numDimensions:3});n.has(C)||n.set(C,m);const{minX:E,minY:O,minZ:w,maxX:T,maxY:S,maxZ:D}=m,{origin:_,normal:x}=g[0];if(!Su(_,x,E,O,w,T,S,D))continue;o.getPoints().setData(p,3),o.getPolys().setData(d,3),o.modified(),i.setInputData(o),c.setOrigin(_),c.setNormal(x);try{i.update()}catch(A){console.warn("Error during clipping",A);continue}const I=i.getOutputData(),N=I;N.buildLinks();const M=Eu.newInstance();M.setInputData(N);const k=M.getOutputData();I&&h.set(v,{points:k.getPoints().getData(),lines:k.getLines().getData(),numberOfCells:k.getLines().getNumberOfCells(),segmentIndex:v})}r({progress:(u+1)/s}),a({sliceIndex:l,polyDataResults:h})}}catch(u){console.warn("Error during processing",u)}finally{t=null,c.delete()}}};Be(Tu);
