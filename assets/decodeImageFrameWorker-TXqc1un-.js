function yi(d,y){const{rows:_,columns:I,data:k}=d,{rows:e,columns:B,data:W}=y,H=[],z=[],V=[];for(let q=0;q<B;q++){const M=q*(I-1)/(B-1);H[q]=Math.floor(M),z[q]=Math.min(H[q]+1,I-1),V[q]=M-H[q]}for(let q=0;q<e;q++){const M=q*(_-1)/(e-1),ee=Math.floor(M)*I,G=Math.min(ee+I,(_-1)*I),re=M-Math.floor(M),se=1-re,me=q*B;for(let le=0;le<B;le++){const Ce=k[ee+H[le]],we=k[ee+z[le]],ve=k[G+H[le]],de=k[G+z[le]],$e=1-V[le];W[me+le]=(Ce*$e+we*V[le])*se+(ve*$e+de*V[le])*re}}return W}function _i(d,y){const{rows:_,columns:I,pixelData:k,samplesPerPixel:e=1}=d,{rows:B,columns:W,pixelData:H}=y,z=[];for(let V=0;V<W;V++){const q=V*(I-1)/(W-1);z[V]=Math.floor(q)*e}for(let V=0;V<B;V++){const q=V*(_-1)/(B-1),M=Math.floor(q)*I*e,ee=V*W;for(let G=0;G<W;G++)for(let re=0;re<e;re++)H[ee+G+re]=k[M+z[G]+re]}return H}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ii=Symbol("Comlink.proxy"),mi=Symbol("Comlink.endpoint"),wi=Symbol("Comlink.releaseProxy"),Gn=Symbol("Comlink.finalizer"),Ln=Symbol("Comlink.thrown"),oi=d=>typeof d=="object"&&d!==null||typeof d=="function",bi={canHandle:d=>oi(d)&&d[ii],serialize(d){const{port1:y,port2:_}=new MessageChannel;return Xn(d,y),[_,[_]]},deserialize(d){return d.start(),Ai(d)}},Pi={canHandle:d=>oi(d)&&Ln in d,serialize({value:d}){let y;return d instanceof Error?y={isError:!0,value:{message:d.message,name:d.name,stack:d.stack}}:y={isError:!1,value:d},[y,[]]},deserialize(d){throw d.isError?Object.assign(new Error(d.value.message),d.value):d.value}},ai=new Map([["proxy",bi],["throw",Pi]]);function Ti(d,y){for(const _ of d)if(y===_||_==="*"||_ instanceof RegExp&&_.test(y))return!0;return!1}function Xn(d,y=globalThis,_=["*"]){y.addEventListener("message",function I(k){if(!k||!k.data)return;if(!Ti(_,k.origin)){console.warn(`Invalid origin '${k.origin}' for comlink proxy`);return}const{id:e,type:B,path:W}=Object.assign({path:[]},k.data),H=(k.data.argumentList||[]).map(Dn);let z;try{const V=W.slice(0,-1).reduce((M,ee)=>M[ee],d),q=W.reduce((M,ee)=>M[ee],d);switch(B){case"GET":z=q;break;case"SET":V[W.slice(-1)[0]]=Dn(k.data.value),z=!0;break;case"APPLY":z=q.apply(V,H);break;case"CONSTRUCT":{const M=new q(...H);z=ki(M)}break;case"ENDPOINT":{const{port1:M,port2:ee}=new MessageChannel;Xn(d,ee),z=Si(M,[M])}break;case"RELEASE":z=void 0;break;default:return}}catch(V){z={value:V,[Ln]:0}}Promise.resolve(z).catch(V=>({value:V,[Ln]:0})).then(V=>{const[q,M]=zn(V);y.postMessage(Object.assign(Object.assign({},q),{id:e}),M),B==="RELEASE"&&(y.removeEventListener("message",I),si(y),Gn in d&&typeof d[Gn]=="function"&&d[Gn]())}).catch(V=>{const[q,M]=zn({value:new TypeError("Unserializable return value"),[Ln]:0});y.postMessage(Object.assign(Object.assign({},q),{id:e}),M)})}),y.start&&y.start()}function Ci(d){return d.constructor.name==="MessagePort"}function si(d){Ci(d)&&d.close()}function Ai(d,y){const _=new Map;return d.addEventListener("message",function(k){const{data:e}=k;if(!e||!e.id)return;const B=_.get(e.id);if(B)try{B(e)}finally{_.delete(e.id)}}),Jn(d,_,[],y)}function Mn(d){if(d)throw new Error("Proxy has been released and is not useable")}function ui(d){return In(d,new Map,{type:"RELEASE"}).then(()=>{si(d)})}const Bn=new WeakMap,Nn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(d=>{const y=(Bn.get(d)||0)-1;Bn.set(d,y),y===0&&ui(d)});function $i(d,y){const _=(Bn.get(y)||0)+1;Bn.set(y,_),Nn&&Nn.register(d,y,d)}function Ri(d){Nn&&Nn.unregister(d)}function Jn(d,y,_=[],I=function(){}){let k=!1;const e=new Proxy(I,{get(B,W){if(Mn(k),W===wi)return()=>{Ri(e),ui(d),y.clear(),k=!0};if(W==="then"){if(_.length===0)return{then:()=>e};const H=In(d,y,{type:"GET",path:_.map(z=>z.toString())}).then(Dn);return H.then.bind(H)}return Jn(d,y,[..._,W])},set(B,W,H){Mn(k);const[z,V]=zn(H);return In(d,y,{type:"SET",path:[..._,W].map(q=>q.toString()),value:z},V).then(Dn)},apply(B,W,H){Mn(k);const z=_[_.length-1];if(z===mi)return In(d,y,{type:"ENDPOINT"}).then(Dn);if(z==="bind")return Jn(d,y,_.slice(0,-1));const[V,q]=Zn(H);return In(d,y,{type:"APPLY",path:_.map(M=>M.toString()),argumentList:V},q).then(Dn)},construct(B,W){Mn(k);const[H,z]=Zn(W);return In(d,y,{type:"CONSTRUCT",path:_.map(V=>V.toString()),argumentList:H},z).then(Dn)}});return $i(e,d),e}function Ei(d){return Array.prototype.concat.apply([],d)}function Zn(d){const y=d.map(zn);return[y.map(_=>_[0]),Ei(y.map(_=>_[1]))]}const fi=new WeakMap;function Si(d,y){return fi.set(d,y),d}function ki(d){return Object.assign(d,{[ii]:!0})}function zn(d){for(const[y,_]of ai)if(_.canHandle(d)){const[I,k]=_.serialize(d);return[{type:"HANDLER",name:y,value:I},k]}return[{type:"RAW",value:d},fi.get(d)||[]]}function Dn(d){switch(d.type){case"HANDLER":return ai.get(d.name).deserialize(d.value);case"RAW":return d.value}}function In(d,y,_,I){return new Promise(k=>{const e=Fi();y.set(e,k),d.start&&d.start(),d.postMessage(Object.assign({id:e},_),I)})}function Fi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}async function ei(d,y){let _=y.buffer,I=y.byteOffset;const k=y.length;return d.bitsAllocated===16?(I%2&&(_=_.slice(I),I=0),d.pixelRepresentation===0?d.pixelData=new Uint16Array(_,I,k/2):d.pixelData=new Int16Array(_,I,k/2)):d.bitsAllocated===8||d.bitsAllocated===1?d.pixelData=y:d.bitsAllocated===32&&(I%2&&(_=_.slice(I),I=0),d.pixelData=new Float32Array(_,I,k/4)),d}function Oi(d){return(d&255)<<8|d>>8&255}async function Di(d,y){if(d.bitsAllocated===16){let _=y.buffer,I=y.byteOffset;const k=y.length;I%2&&(_=_.slice(I),I=0),d.pixelRepresentation===0?d.pixelData=new Uint16Array(_,I,k/2):d.pixelData=new Int16Array(_,I,k/2);for(let e=0;e<d.pixelData.length;e++)d.pixelData[e]=Oi(d.pixelData[e])}else d.bitsAllocated===8&&(d.pixelData=y);return d}async function Ii(d,y){if(d.bitsAllocated===8)return d.planarConfiguration?ji(d,y):Ui(d,y);if(d.bitsAllocated===16)return xi(d,y);throw new Error("unsupported pixel format for RLE")}function Ui(d,y){const _=y,I=d.rows*d.columns,k=new ArrayBuffer(I*d.samplesPerPixel),e=new DataView(_.buffer,_.byteOffset),B=new Int8Array(_.buffer,_.byteOffset),W=new Int8Array(k);let H=0;const z=e.getInt32(0,!0);for(let V=0;V<z;++V){H=V;let q=e.getInt32((V+1)*4,!0),M=e.getInt32((V+2)*4,!0);M===0&&(M=_.length);const ee=I*z;for(;q<M;){const G=B[q++];if(G>=0&&G<=127)for(let re=0;re<G+1&&H<ee;++re)W[H]=B[q++],H+=d.samplesPerPixel;else if(G<=-1&&G>=-127){const re=B[q++];for(let se=0;se<-G+1&&H<ee;++se)W[H]=re,H+=d.samplesPerPixel}}}return d.pixelData=new Uint8Array(k),d}function ji(d,y){const _=y,I=d.rows*d.columns,k=new ArrayBuffer(I*d.samplesPerPixel),e=new DataView(_.buffer,_.byteOffset),B=new Int8Array(_.buffer,_.byteOffset),W=new Int8Array(k);let H=0;const z=e.getInt32(0,!0);for(let V=0;V<z;++V){H=V*I;let q=e.getInt32((V+1)*4,!0),M=e.getInt32((V+2)*4,!0);M===0&&(M=_.length);const ee=I*z;for(;q<M;){const G=B[q++];if(G>=0&&G<=127)for(let re=0;re<G+1&&H<ee;++re)W[H]=B[q++],H++;else if(G<=-1&&G>=-127){const re=B[q++];for(let se=0;se<-G+1&&H<ee;++se)W[H]=re,H++}}}return d.pixelData=new Uint8Array(k),d}function xi(d,y){const _=y,I=d.rows*d.columns,k=new ArrayBuffer(I*d.samplesPerPixel*2),e=new DataView(_.buffer,_.byteOffset),B=new Int8Array(_.buffer,_.byteOffset),W=new Int8Array(k),H=e.getInt32(0,!0);for(let z=0;z<H;++z){let V=0;const q=z===0?1:0;let M=e.getInt32((z+1)*4,!0),ee=e.getInt32((z+2)*4,!0);for(ee===0&&(ee=_.length);M<ee;){const G=B[M++];if(G>=0&&G<=127)for(let re=0;re<G+1&&V<I;++re)W[V*2+q]=B[M++],V++;else if(G<=-1&&G>=-127){const re=B[M++];for(let se=0;se<-G+1&&V<I;++se)W[V*2+q]=re,V++}}}return d.pixelRepresentation===0?d.pixelData=new Uint16Array(k):d.pixelData=new Int16Array(k),d}function qn(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function Wi(d){if(d.__esModule)return d;var y=d.default;if(typeof y=="function"){var _=function I(){return this instanceof I?Reflect.construct(y,arguments,this.constructor):y.apply(this,arguments)};_.prototype=y.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(d).forEach(function(I){var k=Object.getOwnPropertyDescriptor(d,I);Object.defineProperty(_,I,k.get?k:{enumerable:!0,get:function(){return d[I]}})}),_}var ci={exports:{}},Hi={},Mi=Object.freeze({__proto__:null,default:Hi}),fn=Wi(Mi);(function(d,y){var _=(()=>{var I=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(I=I||__filename),function(k){k=k||{};var e=typeof k<"u"?k:{},B,W;e.ready=new Promise(function(r,t){B=r,W=t});var H=Object.assign({},e),z="./this.program",V=(r,t)=>{throw t},q=typeof window=="object",M=typeof importScripts=="function",ee=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",G="";function re(r){return e.locateFile?e.locateFile(r,G):G+r}var se,me,le;function Ce(r){if(r instanceof Ue)return;$e("exiting due to exception: "+r)}if(ee){var we=fn,ve=fn;M?G=ve.dirname(G)+"/":G=__dirname+"/",se=(r,t)=>(r=Vt(r)?new URL(r):ve.normalize(r),we.readFileSync(r,t?void 0:"utf8")),le=r=>{var t=se(r,!0);return t.buffer||(t=new Uint8Array(t)),t},me=(r,t,s)=>{r=Vt(r)?new URL(r):ve.normalize(r),we.readFile(r,function(l,g){l?s(l):t(g.buffer)})},process.argv.length>1&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(r){if(!(r instanceof Ue))throw r}),process.on("unhandledRejection",function(r){throw r}),V=(r,t)=>{if(Ur())throw process.exitCode=r,t;Ce(t),process.exit(r)},e.inspect=function(){return"[Emscripten Module object]"}}else(q||M)&&(M?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),I&&(G=I),G.indexOf("blob:")!==0?G=G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1):G="",se=r=>{var t=new XMLHttpRequest;return t.open("GET",r,!1),t.send(null),t.responseText},M&&(le=r=>{var t=new XMLHttpRequest;return t.open("GET",r,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),me=(r,t,s)=>{var l=new XMLHttpRequest;l.open("GET",r,!0),l.responseType="arraybuffer",l.onload=()=>{if(l.status==200||l.status==0&&l.response){t(l.response);return}s()},l.onerror=s,l.send(null)});var de=e.print||console.log.bind(console),$e=e.printErr||console.warn.bind(console);Object.assign(e,H),H=null,e.arguments&&e.arguments,e.thisProgram&&(z=e.thisProgram),e.quit&&(V=e.quit);var qe;e.wasmBinary&&(qe=e.wasmBinary);var Jt=e.noExitRuntime||!0;typeof WebAssembly!="object"&&Ae("no native wasm support detected");var Ge,$t=!1;function Dt(r,t){r||Ae(t)}var mr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Xt(r,t,s){for(var l=t+s,g=t;r[g]&&!(g>=l);)++g;if(g-t>16&&r.buffer&&mr)return mr.decode(r.subarray(t,g));for(var b="";t<g;){var C=r[t++];if(!(C&128)){b+=String.fromCharCode(C);continue}var T=r[t++]&63;if((C&224)==192){b+=String.fromCharCode((C&31)<<6|T);continue}var E=r[t++]&63;if((C&240)==224?C=(C&15)<<12|T<<6|E:C=(C&7)<<18|T<<12|E<<6|r[t++]&63,C<65536)b+=String.fromCharCode(C);else{var x=C-65536;b+=String.fromCharCode(55296|x>>10,56320|x&1023)}}return b}function Qe(r,t){return r?Xt(te,r,t):""}function he(r,t,s,l){if(!(l>0))return 0;for(var g=s,b=s+l-1,C=0;C<r.length;++C){var T=r.charCodeAt(C);if(T>=55296&&T<=57343){var E=r.charCodeAt(++C);T=65536+((T&1023)<<10)|E&1023}if(T<=127){if(s>=b)break;t[s++]=T}else if(T<=2047){if(s+1>=b)break;t[s++]=192|T>>6,t[s++]=128|T&63}else if(T<=65535){if(s+2>=b)break;t[s++]=224|T>>12,t[s++]=128|T>>6&63,t[s++]=128|T&63}else{if(s+3>=b)break;t[s++]=240|T>>18,t[s++]=128|T>>12&63,t[s++]=128|T>>6&63,t[s++]=128|T&63}}return t[s]=0,s-g}function ce(r,t,s){return he(r,te,t,s)}function ge(r){for(var t=0,s=0;s<r.length;++s){var l=r.charCodeAt(s);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++s):t+=3}return t}var ye,ne,te,fe,It,Ie,pe,Yt,Kt;function cr(r){ye=r,e.HEAP8=ne=new Int8Array(r),e.HEAP16=fe=new Int16Array(r),e.HEAP32=Ie=new Int32Array(r),e.HEAPU8=te=new Uint8Array(r),e.HEAPU16=It=new Uint16Array(r),e.HEAPU32=pe=new Uint32Array(r),e.HEAPF32=Yt=new Float32Array(r),e.HEAPF64=Kt=new Float64Array(r)}e.INITIAL_MEMORY;var wr,Or=[],Dr=[],Ir=[];function Ur(){return Jt}function Ut(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Qt(e.preRun.shift());Xe(Or)}function Ze(){Xe(Dr)}function et(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)er(e.postRun.shift());Xe(Ir)}function Qt(r){Or.unshift(r)}function Zt(r){Dr.unshift(r)}function er(r){Ir.unshift(r)}var Je=0,yt=null;function Re(r){Je++,e.monitorRunDependencies&&e.monitorRunDependencies(Je)}function Ee(r){if(Je--,e.monitorRunDependencies&&e.monitorRunDependencies(Je),Je==0&&yt){var t=yt;yt=null,t()}}function Ae(r){e.onAbort&&e.onAbort(r),r="Aborted("+r+")",$e(r),$t=!0,r+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(r);throw W(t),t}var jr="data:application/octet-stream;base64,";function xr(r){return r.startsWith(jr)}function Vt(r){return r.startsWith("file://")}var Fe;Fe="libjpegturbowasm_decode.wasm",xr(Fe)||(Fe=re(Fe));function tr(r){try{if(r==Fe&&qe)return new Uint8Array(qe);if(le)return le(r);throw"both async and sync fetching of the wasm failed"}catch(t){Ae(t)}}function lr(){if(!qe&&(q||M)){if(typeof fetch=="function"&&!Vt(Fe))return fetch(Fe,{credentials:"same-origin"}).then(function(r){if(!r.ok)throw"failed to load wasm binary file at '"+Fe+"'";return r.arrayBuffer()}).catch(function(){return tr(Fe)});if(me)return new Promise(function(r,t){me(Fe,function(s){r(new Uint8Array(s))},t)})}return Promise.resolve().then(function(){return tr(Fe)})}function Wr(){var r={a:J};function t(C,T){var E=C.exports;e.asm=E,Ge=e.asm.K,cr(Ge.buffer),wr=e.asm.M,Zt(e.asm.L),Ee()}Re();function s(C){t(C.instance)}function l(C){return lr().then(function(T){return WebAssembly.instantiate(T,r)}).then(function(T){return T}).then(C,function(T){$e("failed to asynchronously prepare wasm: "+T),Ae(T)})}function g(){return!qe&&typeof WebAssembly.instantiateStreaming=="function"&&!xr(Fe)&&!Vt(Fe)&&!ee&&typeof fetch=="function"?fetch(Fe,{credentials:"same-origin"}).then(function(C){var T=WebAssembly.instantiateStreaming(C,r);return T.then(s,function(E){return $e("wasm streaming compile failed: "+E),$e("falling back to ArrayBuffer instantiation"),l(s)})}):l(s)}if(e.instantiateWasm)try{var b=e.instantiateWasm(r,t);return b}catch(C){$e("Module.instantiateWasm callback failed with error: "+C),W(C)}return g().catch(W),{}}function Ue(r){this.name="ExitStatus",this.message="Program terminated with exit("+r+")",this.status=r}function Xe(r){for(;r.length>0;)r.shift()(e)}function _e(r){this.excPtr=r,this.ptr=r-24,this.set_type=function(t){pe[this.ptr+4>>2]=t},this.get_type=function(){return pe[this.ptr+4>>2]},this.set_destructor=function(t){pe[this.ptr+8>>2]=t},this.get_destructor=function(){return pe[this.ptr+8>>2]},this.set_refcount=function(t){Ie[this.ptr>>2]=t},this.set_caught=function(t){t=t?1:0,ne[this.ptr+12>>0]=t},this.get_caught=function(){return ne[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,ne[this.ptr+13>>0]=t},this.get_rethrown=function(){return ne[this.ptr+13>>0]!=0},this.init=function(t,s){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(s),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=Ie[this.ptr>>2];Ie[this.ptr>>2]=t+1},this.release_ref=function(){var t=Ie[this.ptr>>2];return Ie[this.ptr>>2]=t-1,t===1},this.set_adjusted_ptr=function(t){pe[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return pe[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=j(this.get_type());if(t)return pe[this.excPtr>>2];var s=this.get_adjusted_ptr();return s!==0?s:this.excPtr}}function _t(r,t,s){var l=new _e(r);throw l.init(t,s),r}var ct={};function Rt(r){for(;r.length;){var t=r.pop(),s=r.pop();s(t)}}function jt(r){return this.fromWireType(Ie[r>>2])}var Et={},tt={},xt={},mt=48,wt=57;function lt(r){if(r===void 0)return"_unknown";r=r.replace(/[^a-zA-Z0-9_]/g,"$");var t=r.charCodeAt(0);return t>=mt&&t<=wt?"_"+r:r}function Me(r,t){return r=lt(r),new Function("body","return function "+r+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function rt(r,t){var s=Me(t,function(l){this.name=t,this.message=l;var g=new Error(l).stack;g!==void 0&&(this.stack=this.toString()+`
`+g.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},s}var rr=void 0;function Wt(r){throw new rr(r)}function be(r,t,s){r.forEach(function(T){xt[T]=t});function l(T){var E=s(T);E.length!==r.length&&Wt("Mismatched type converter count");for(var x=0;x<r.length;++x)xe(r[x],E[x])}var g=new Array(t.length),b=[],C=0;t.forEach((T,E)=>{tt.hasOwnProperty(T)?g[E]=tt[T]:(b.push(T),Et.hasOwnProperty(T)||(Et[T]=[]),Et[T].push(()=>{g[E]=tt[T],++C,C===b.length&&l(g)}))}),b.length===0&&l(g)}function bt(r){var t=ct[r];delete ct[r];var s=t.rawConstructor,l=t.rawDestructor,g=t.fields,b=g.map(C=>C.getterReturnType).concat(g.map(C=>C.setterArgumentType));be([r],b,C=>{var T={};return g.forEach((E,x)=>{var N=E.fieldName,X=C[x],Z=E.getter,Te=E.getterContext,oe=C[x+g.length],ke=E.setter,Ke=E.setterContext;T[N]={read:Lt=>X.fromWireType(Z(Te,Lt)),write:(Lt,un)=>{var Fr=[];ke(Ke,Lt,oe.toWireType(Fr,un)),Rt(Fr)}}}),[{name:t.name,fromWireType:function(E){var x={};for(var N in T)x[N]=T[N].read(E);return l(E),x},toWireType:function(E,x){for(var N in T)if(!(N in x))throw new TypeError('Missing field:  "'+N+'"');var X=s();for(N in T)T[N].write(X,x[N]);return E!==null&&E.push(l,X),X},argPackAdvance:8,readValueFromPointer:jt,destructorFunction:l}]})}function K(r,t,s,l,g){}function Se(r){switch(r){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+r)}}function ue(){for(var r=new Array(256),t=0;t<256;++t)r[t]=String.fromCharCode(t);Le=r}var Le=void 0;function Pe(r){for(var t="",s=r;te[s];)t+=Le[te[s++]];return t}var St=void 0;function ae(r){throw new St(r)}function xe(r,t,s={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var l=t.name;if(r||ae('type "'+l+'" must have a positive integer typeid pointer'),tt.hasOwnProperty(r)){if(s.ignoreDuplicateRegistrations)return;ae("Cannot register type '"+l+"' twice")}if(tt[r]=t,delete xt[r],Et.hasOwnProperty(r)){var g=Et[r];delete Et[r],g.forEach(b=>b())}}function br(r,t,s,l,g){var b=Se(s);t=Pe(t),xe(r,{name:t,fromWireType:function(C){return!!C},toWireType:function(C,T){return T?l:g},argPackAdvance:8,readValueFromPointer:function(C){var T;if(s===1)T=ne;else if(s===2)T=fe;else if(s===4)T=Ie;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(T[C>>b])},destructorFunction:null})}function dr(r){if(!(this instanceof We)||!(r instanceof We))return!1;for(var t=this.$$.ptrType.registeredClass,s=this.$$.ptr,l=r.$$.ptrType.registeredClass,g=r.$$.ptr;t.baseClass;)s=t.upcast(s),t=t.baseClass;for(;l.baseClass;)g=l.upcast(g),l=l.baseClass;return t===l&&s===g}function Oe(r){return{count:r.count,deleteScheduled:r.deleteScheduled,preservePointerOnDelete:r.preservePointerOnDelete,ptr:r.ptr,ptrType:r.ptrType,smartPtr:r.smartPtr,smartPtrType:r.smartPtrType}}function dt(r){function t(s){return s.$$.ptrType.registeredClass.name}ae(t(r)+" instance already deleted")}var ie=!1;function nt(r){}function nr(r){r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)}function pr(r){r.count.value-=1;var t=r.count.value===0;t&&nr(r)}function pt(r,t,s){if(t===s)return r;if(s.baseClass===void 0)return null;var l=pt(r,t,s.baseClass);return l===null?null:s.downcast(l)}var Bt={};function Ht(){return Object.keys(or).length}function Nt(){var r=[];for(var t in or)or.hasOwnProperty(t)&&r.push(or[t]);return r}var ir=[];function kt(){for(;ir.length;){var r=ir.pop();r.$$.deleteScheduled=!1,r.delete()}}var Pt=void 0;function Hr(r){Pt=r,ir.length&&Pt&&Pt(kt)}function Ft(){e.getInheritedInstanceCount=Ht,e.getLiveInheritedInstances=Nt,e.flushPendingDeletes=kt,e.setDelayFunction=Hr}var or={};function Tt(r,t){for(t===void 0&&ae("ptr should not be undefined");r.baseClass;)t=r.upcast(t),r=r.baseClass;return t}function Pr(r,t){return t=Tt(r,t),or[t]}function Ot(r,t){(!t.ptrType||!t.ptr)&&Wt("makeClassHandle requires ptr and ptrType");var s=!!t.smartPtrType,l=!!t.smartPtr;return s!==l&&Wt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ye(Object.create(r,{$$:{value:t}}))}function cn(r){var t=this.getPointee(r);if(!t)return this.destructor(r),null;var s=Pr(this.registeredClass,t);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=t,s.$$.smartPtr=r,s.clone();var l=s.clone();return this.destructor(r),l}function g(){return this.isSmartPointer?Ot(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:r}):Ot(this.registeredClass.instancePrototype,{ptrType:this,ptr:r})}var b=this.registeredClass.getActualType(t),C=Bt[b];if(!C)return g.call(this);var T;this.isConst?T=C.constPointerType:T=C.pointerType;var E=pt(t,this.registeredClass,T.registeredClass);return E===null?g.call(this):this.isSmartPointer?Ot(T.registeredClass.instancePrototype,{ptrType:T,ptr:E,smartPtrType:this,smartPtr:r}):Ot(T.registeredClass.instancePrototype,{ptrType:T,ptr:E})}function Ye(r){return typeof FinalizationRegistry>"u"?(Ye=t=>t,r):(ie=new FinalizationRegistry(t=>{pr(t.$$)}),Ye=t=>{var s=t.$$,l=!!s.smartPtr;if(l){var g={$$:s};ie.register(t,g,t)}return t},nt=t=>ie.unregister(t),Ye(r))}function zt(){if(this.$$.ptr||dt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Ye(Object.create(Object.getPrototypeOf(this),{$$:{value:Oe(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r}function Ct(){this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),nt(this),pr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Mr(){return!this.$$.ptr}function qt(){return this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),ir.push(this),ir.length===1&&Pt&&Pt(kt),this.$$.deleteScheduled=!0,this}function ln(){We.prototype.isAliasOf=dr,We.prototype.clone=zt,We.prototype.delete=Ct,We.prototype.isDeleted=Mr,We.prototype.deleteLater=qt}function We(){}function Lr(r,t,s){if(r[t].overloadTable===void 0){var l=r[t];r[t]=function(){return r[t].overloadTable.hasOwnProperty(arguments.length)||ae("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+r[t].overloadTable+")!"),r[t].overloadTable[arguments.length].apply(this,arguments)},r[t].overloadTable=[],r[t].overloadTable[l.argCount]=l}}function dn(r,t,s){e.hasOwnProperty(r)?(ae("Cannot register public name '"+r+"' twice"),Lr(e,r,r),e.hasOwnProperty(s)&&ae("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),e[r].overloadTable[s]=t):e[r]=t}function pn(r,t,s,l,g,b,C,T){this.name=r,this.constructor=t,this.instancePrototype=s,this.rawDestructor=l,this.baseClass=g,this.getActualType=b,this.upcast=C,this.downcast=T,this.pureVirtualFunctions=[]}function Tr(r,t,s){for(;t!==s;)t.upcast||ae("Expected null or instance of "+s.name+", got an instance of "+t.name),r=t.upcast(r),t=t.baseClass;return r}function vn(r,t){if(t===null)return this.isReference&&ae("null is not a valid "+this.name),0;t.$$||ae('Cannot pass "'+$r(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name);var s=t.$$.ptrType.registeredClass,l=Tr(t.$$.ptr,s,this.registeredClass);return l}function De(r,t){var s;if(t===null)return this.isReference&&ae("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),r!==null&&r.push(this.rawDestructor,s),s):0;t.$$||ae('Cannot pass "'+$r(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ae("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var l=t.$$.ptrType.registeredClass;if(s=Tr(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&ae("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?s=t.$$.smartPtr:ae("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)s=t.$$.smartPtr;else{var g=t.clone();s=this.rawShare(s,At.toHandle(function(){g.delete()})),r!==null&&r.push(this.rawDestructor,s)}break;default:ae("Unsupporting sharing policy")}return s}function Cr(r,t){if(t===null)return this.isReference&&ae("null is not a valid "+this.name),0;t.$$||ae('Cannot pass "'+$r(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ae("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var s=t.$$.ptrType.registeredClass,l=Tr(t.$$.ptr,s,this.registeredClass);return l}function vt(r){return this.rawGetPointee&&(r=this.rawGetPointee(r)),r}function vr(r){this.rawDestructor&&this.rawDestructor(r)}function hr(r){r!==null&&r.delete()}function gr(){ht.prototype.getPointee=vt,ht.prototype.destructor=vr,ht.prototype.argPackAdvance=8,ht.prototype.readValueFromPointer=jt,ht.prototype.deleteObject=hr,ht.prototype.fromWireType=cn}function ht(r,t,s,l,g,b,C,T,E,x,N){this.name=r,this.registeredClass=t,this.isReference=s,this.isConst=l,this.isSmartPointer=g,this.pointeeType=b,this.sharingPolicy=C,this.rawGetPointee=T,this.rawConstructor=E,this.rawShare=x,this.rawDestructor=N,!g&&t.baseClass===void 0?l?(this.toWireType=vn,this.destructorFunction=null):(this.toWireType=Cr,this.destructorFunction=null):this.toWireType=De}function it(r,t,s){e.hasOwnProperty(r)||Wt("Replacing nonexistant public symbol"),e[r].overloadTable!==void 0&&s!==void 0?e[r].overloadTable[s]=t:(e[r]=t,e[r].argCount=s)}function Vr(r,t,s){var l=e["dynCall_"+r];return s&&s.length?l.apply(null,[t].concat(s)):l.call(null,t)}var He=[];function ot(r){var t=He[r];return t||(r>=He.length&&(He.length=r+1),He[r]=t=wr.get(r)),t}function Br(r,t,s){if(r.includes("j"))return Vr(r,t,s);var l=ot(t).apply(null,s);return l}function Ve(r,t){var s=[];return function(){return s.length=0,Object.assign(s,arguments),Br(r,t,s)}}function at(r,t){r=Pe(r);function s(){return r.includes("j")?Ve(r,t):ot(t)}var l=s();return typeof l!="function"&&ae("unknown function pointer with signature "+r+": "+t),l}var ar=void 0;function Nr(r){var t=a(r),s=Pe(t);return Y(t),s}function yr(r,t){var s=[],l={};function g(b){if(!l[b]&&!tt[b]){if(xt[b]){xt[b].forEach(g);return}s.push(b),l[b]=!0}}throw t.forEach(g),new ar(r+": "+s.map(Nr).join([", "]))}function Be(r,t,s,l,g,b,C,T,E,x,N,X,Z){N=Pe(N),b=at(g,b),T&&(T=at(C,T)),x&&(x=at(E,x)),Z=at(X,Z);var Te=lt(N);dn(Te,function(){yr("Cannot construct "+N+" due to unbound types",[l])}),be([r,t,s],l?[l]:[],function(oe){oe=oe[0];var ke,Ke;l?(ke=oe.registeredClass,Ke=ke.instancePrototype):Ke=We.prototype;var Lt=Me(Te,function(){if(Object.getPrototypeOf(this)!==un)throw new St("Use 'new' to construct "+N);if(Fr.constructor_body===void 0)throw new St(N+" has no accessible constructor");var Qn=Fr.constructor_body[arguments.length];if(Qn===void 0)throw new St("Tried to invoke ctor of "+N+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Fr.constructor_body).toString()+") parameters instead!");return Qn.apply(this,arguments)}),un=Object.create(Ke,{constructor:{value:Lt}});Lt.prototype=un;var Fr=new pn(N,Lt,un,Z,ke,b,T,x),gi=new ht(N,Fr,!0,!1,!1),Yn=new ht(N+"*",Fr,!1,!1,!1),Kn=new ht(N+" const*",Fr,!1,!0,!1);return Bt[r]={pointerType:Yn,constPointerType:Kn},it(Te,Lt),[gi,Yn,Kn]})}function Ne(r,t){for(var s=[],l=0;l<r;l++)s.push(pe[t+l*4>>2]);return s}function sr(r,t){if(!(r instanceof Function))throw new TypeError("new_ called with constructor type "+typeof r+" which is not a function");var s=Me(r.name||"unknownFunctionName",function(){});s.prototype=r.prototype;var l=new s,g=r.apply(l,t);return g instanceof Object?g:l}function je(r,t,s,l,g){var b=t.length;b<2&&ae("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var C=t[1]!==null&&s!==null,T=!1,E=1;E<t.length;++E)if(t[E]!==null&&t[E].destructorFunction===void 0){T=!0;break}for(var x=t[0].name!=="void",N="",X="",E=0;E<b-2;++E)N+=(E!==0?", ":"")+"arg"+E,X+=(E!==0?", ":"")+"arg"+E+"Wired";var Z="return function "+lt(r)+"("+N+`) {
if (arguments.length !== `+(b-2)+`) {
throwBindingError('function `+r+" called with ' + arguments.length + ' arguments, expected "+(b-2)+` args!');
}
`;T&&(Z+=`var destructors = [];
`);var Te=T?"destructors":"null",oe=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ke=[ae,l,g,Rt,t[0],t[1]];C&&(Z+="var thisWired = classParam.toWireType("+Te+`, this);
`);for(var E=0;E<b-2;++E)Z+="var arg"+E+"Wired = argType"+E+".toWireType("+Te+", arg"+E+"); // "+t[E+2].name+`
`,oe.push("argType"+E),ke.push(t[E+2]);if(C&&(X="thisWired"+(X.length>0?", ":"")+X),Z+=(x?"var rv = ":"")+"invoker(fn"+(X.length>0?", ":"")+X+`);
`,T)Z+=`runDestructors(destructors);
`;else for(var E=C?1:2;E<t.length;++E){var Ke=E===1?"thisWired":"arg"+(E-2)+"Wired";t[E].destructorFunction!==null&&(Z+=Ke+"_dtor("+Ke+"); // "+t[E].name+`
`,oe.push(Ke+"_dtor"),ke.push(t[E].destructorFunction))}x&&(Z+=`var ret = retType.fromWireType(rv);
return ret;
`),Z+=`}
`,oe.push(Z);var Lt=sr(Function,oe).apply(null,ke);return Lt}function zr(r,t,s,l,g,b){Dt(t>0);var C=Ne(t,s);g=at(l,g),be([],[r],function(T){T=T[0];var E="constructor "+T.name;if(T.registeredClass.constructor_body===void 0&&(T.registeredClass.constructor_body=[]),T.registeredClass.constructor_body[t-1]!==void 0)throw new St("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+T.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return T.registeredClass.constructor_body[t-1]=()=>{yr("Cannot construct "+T.name+" due to unbound types",C)},be([],C,function(x){return x.splice(1,0,null),T.registeredClass.constructor_body[t-1]=je(E,x,null,g,b),[]}),[]})}function Ar(r,t,s,l,g,b,C,T){var E=Ne(s,l);t=Pe(t),b=at(g,b),be([],[r],function(x){x=x[0];var N=x.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),T&&x.registeredClass.pureVirtualFunctions.push(t);function X(){yr("Cannot call "+N+" due to unbound types",E)}var Z=x.registeredClass.instancePrototype,Te=Z[t];return Te===void 0||Te.overloadTable===void 0&&Te.className!==x.name&&Te.argCount===s-2?(X.argCount=s-2,X.className=x.name,Z[t]=X):(Lr(Z,t,N),Z[t].overloadTable[s-2]=X),be([],E,function(oe){var ke=je(N,oe,x,b,C);return Z[t].overloadTable===void 0?(ke.argCount=s-2,Z[t]=ke):Z[t].overloadTable[s-2]=ke,[]}),[]})}var gt=[],ze=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function st(r){r>4&&--ze[r].refcount===0&&(ze[r]=void 0,gt.push(r))}function hn(){for(var r=0,t=5;t<ze.length;++t)ze[t]!==void 0&&++r;return r}function ur(){for(var r=5;r<ze.length;++r)if(ze[r]!==void 0)return ze[r];return null}function ut(){e.count_emval_handles=hn,e.get_first_emval=ur}var At={toValue:r=>(r||ae("Cannot use deleted val. handle = "+r),ze[r].value),toHandle:r=>{switch(r){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=gt.length?gt.pop():ze.length;return ze[t]={refcount:1,value:r},t}}}};function gn(r,t){t=Pe(t),xe(r,{name:t,fromWireType:function(s){var l=At.toValue(s);return st(s),l},toWireType:function(s,l){return At.toHandle(l)},argPackAdvance:8,readValueFromPointer:jt,destructorFunction:null})}function $r(r){if(r===null)return"null";var t=typeof r;return t==="object"||t==="array"||t==="function"?r.toString():""+r}function yn(r,t){switch(t){case 2:return function(s){return this.fromWireType(Yt[s>>2])};case 3:return function(s){return this.fromWireType(Kt[s>>3])};default:throw new TypeError("Unknown float type: "+r)}}function fr(r,t,s){var l=Se(s);t=Pe(t),xe(r,{name:t,fromWireType:function(g){return g},toWireType:function(g,b){return b},argPackAdvance:8,readValueFromPointer:yn(t,l),destructorFunction:null})}function qr(r,t,s){switch(t){case 0:return s?function(g){return ne[g]}:function(g){return te[g]};case 1:return s?function(g){return fe[g>>1]}:function(g){return It[g>>1]};case 2:return s?function(g){return Ie[g>>2]}:function(g){return pe[g>>2]};default:throw new TypeError("Unknown integer type: "+r)}}function Rr(r,t,s,l,g){t=Pe(t);var b=Se(s),C=X=>X;if(l===0){var T=32-8*s;C=X=>X<<T>>>T}var E=t.includes("unsigned"),x=(X,Z)=>{},N;E?N=function(X,Z){return x(Z,this.name),Z>>>0}:N=function(X,Z){return x(Z,this.name),Z},xe(r,{name:t,fromWireType:C,toWireType:N,argPackAdvance:8,readValueFromPointer:qr(t,b,l!==0),destructorFunction:null})}function _n(r,t,s){var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g=l[t];function b(C){C=C>>2;var T=pe,E=T[C],x=T[C+1];return new g(ye,x,E)}s=Pe(s),xe(r,{name:s,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{ignoreDuplicateRegistrations:!0})}function mn(r,t){t=Pe(t);var s=t==="std::string";xe(r,{name:t,fromWireType:function(l){var g=pe[l>>2],b=l+4,C;if(s)for(var T=b,E=0;E<=g;++E){var x=b+E;if(E==g||te[x]==0){var N=x-T,X=Qe(T,N);C===void 0?C=X:(C+="\0",C+=X),T=x+1}}else{for(var Z=new Array(g),E=0;E<g;++E)Z[E]=String.fromCharCode(te[b+E]);C=Z.join("")}return Y(l),C},toWireType:function(l,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var b,C=typeof g=="string";C||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||ae("Cannot pass non-string to std::string"),s&&C?b=ge(g):b=g.length;var T=Q(4+b+1),E=T+4;if(pe[T>>2]=b,s&&C)ce(g,E,b+1);else if(C)for(var x=0;x<b;++x){var N=g.charCodeAt(x);N>255&&(Y(E),ae("String has UTF-16 code units that do not fit in 8 bits")),te[E+x]=N}else for(var x=0;x<b;++x)te[E+x]=g[x];return l!==null&&l.push(Y,T),T},argPackAdvance:8,readValueFromPointer:jt,destructorFunction:function(l){Y(l)}})}var Gr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function wn(r,t){for(var s=r,l=s>>1,g=l+t/2;!(l>=g)&&It[l];)++l;if(s=l<<1,s-r>32&&Gr)return Gr.decode(te.subarray(r,s));for(var b="",C=0;!(C>=t/2);++C){var T=fe[r+C*2>>1];if(T==0)break;b+=String.fromCharCode(T)}return b}function bn(r,t,s){if(s===void 0&&(s=2147483647),s<2)return 0;s-=2;for(var l=t,g=s<r.length*2?s/2:r.length,b=0;b<g;++b){var C=r.charCodeAt(b);fe[t>>1]=C,t+=2}return fe[t>>1]=0,t-l}function Pn(r){return r.length*2}function Tn(r,t){for(var s=0,l="";!(s>=t/4);){var g=Ie[r+s*4>>2];if(g==0)break;if(++s,g>=65536){var b=g-65536;l+=String.fromCharCode(55296|b>>10,56320|b&1023)}else l+=String.fromCharCode(g)}return l}function Jr(r,t,s){if(s===void 0&&(s=2147483647),s<4)return 0;for(var l=t,g=l+s-4,b=0;b<r.length;++b){var C=r.charCodeAt(b);if(C>=55296&&C<=57343){var T=r.charCodeAt(++b);C=65536+((C&1023)<<10)|T&1023}if(Ie[t>>2]=C,t+=4,t+4>g)break}return Ie[t>>2]=0,t-l}function Cn(r){for(var t=0,s=0;s<r.length;++s){var l=r.charCodeAt(s);l>=55296&&l<=57343&&++s,t+=4}return t}function An(r,t,s){s=Pe(s);var l,g,b,C,T;t===2?(l=wn,g=bn,C=Pn,b=()=>It,T=1):t===4&&(l=Tn,g=Jr,C=Cn,b=()=>pe,T=2),xe(r,{name:s,fromWireType:function(E){for(var x=pe[E>>2],N=b(),X,Z=E+4,Te=0;Te<=x;++Te){var oe=E+4+Te*t;if(Te==x||N[oe>>T]==0){var ke=oe-Z,Ke=l(Z,ke);X===void 0?X=Ke:(X+="\0",X+=Ke),Z=oe+t}}return Y(E),X},toWireType:function(E,x){typeof x!="string"&&ae("Cannot pass non-string to C++ string type "+s);var N=C(x),X=Q(4+N+t);return pe[X>>2]=N>>T,g(x,X+4,N+t),E!==null&&E.push(Y,X),X},argPackAdvance:8,readValueFromPointer:jt,destructorFunction:function(E){Y(E)}})}function Xr(r,t,s,l,g,b){ct[r]={name:Pe(t),rawConstructor:at(s,l),rawDestructor:at(g,b),fields:[]}}function Yr(r,t,s,l,g,b,C,T,E,x){ct[r].fields.push({fieldName:Pe(t),getterReturnType:s,getter:at(l,g),getterContext:b,setterArgumentType:C,setter:at(T,E),setterContext:x})}function $n(r,t){t=Pe(t),xe(r,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(s,l){}})}function Kr(){throw 1/0}var Qr={};function Zr(r){var t=Qr[r];return t===void 0?Pe(r):t}function Er(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Rn(r){return r===0?At.toHandle(Er()):(r=Zr(r),At.toHandle(Er()[r]))}function En(r){r>4&&(ze[r].refcount+=1)}function en(r,t){var s=tt[r];return s===void 0&&ae(t+" has unknown type "+Nr(r)),s}function tn(r){for(var t="",s=0;s<r;++s)t+=(s!==0?", ":"")+"arg"+s;for(var l=()=>pe,g="return function emval_allocator_"+r+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,s=0;s<r;++s)g+="var argType"+s+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+s+`');
var arg`+s+" = argType"+s+`.readValueFromPointer(args);
args += argType`+s+`['argPackAdvance'];
argTypes += 4;
`;return g+="var obj = new constructor("+t+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",g)(en,e,At.toHandle,l)}var rn={};function Sn(r,t,s,l){r=At.toValue(r);var g=rn[t];return g||(g=tn(t),rn[t]=g),g(r,s,l)}function kn(r,t){r=en(r,"_emval_take_value");var s=r.readValueFromPointer(t);return At.toHandle(s)}function Fn(){Ae("")}function Sr(r,t,s){te.copyWithin(r,t,t+s)}function On(){return 2147483648}function Mt(r){try{return Ge.grow(r-ye.byteLength+65535>>>16),cr(Ge.buffer),1}catch{}}function nn(r){var t=te.length;r=r>>>0;var s=On();if(r>s)return!1;let l=(E,x)=>E+(x-E%x)%x;for(var g=1;g<=4;g*=2){var b=t*(1+.2/g);b=Math.min(b,r+100663296);var C=Math.min(s,l(Math.max(r,b),65536)),T=Mt(C);if(T)return!0}return!1}var ft={};function on(){return z||"./this.program"}function Gt(){if(!Gt.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:on()};for(var s in ft)ft[s]===void 0?delete t[s]:t[s]=ft[s];var l=[];for(var s in t)l.push(s+"="+t[s]);Gt.strings=l}return Gt.strings}function kr(r,t,s){for(var l=0;l<r.length;++l)ne[t++>>0]=r.charCodeAt(l);ne[t>>0]=0}function an(r,t){var s=0;return Gt().forEach(function(l,g){var b=t+s;pe[r+g*4>>2]=b,kr(l,b),s+=l.length+1}),0}function _r(r,t){var s=Gt();pe[r>>2]=s.length;var l=0;return s.forEach(function(g){l+=g.length+1}),pe[t>>2]=l,0}function sn(r){Ur()||(e.onExit&&e.onExit(r),$t=!0),V(r,new Ue(r))}function u(r,t){sn(r)}var f=u;function v(r){return 52}function P(r,t,s,l,g){return 70}var $=[null,[],[]];function F(r,t){var s=$[r];t===0||t===10?((r===1?de:$e)(Xt(s,0)),s.length=0):s.push(t)}function O(r,t,s,l){for(var g=0,b=0;b<s;b++){var C=pe[t>>2],T=pe[t+4>>2];t+=8;for(var E=0;E<T;E++)F(r,te[C+E]);g+=T}return pe[l>>2]=g,0}function R(r){var t=e["_"+r];return t}function U(r,t){ne.set(r,t)}function L(r,t,s,l,g){var b={string:oe=>{var ke=0;if(oe!=null&&oe!==0){var Ke=(oe.length<<2)+1;ke=A(Ke),ce(oe,ke,Ke)}return ke},array:oe=>{var ke=A(oe.length);return U(oe,ke),ke}};function C(oe){return t==="string"?Qe(oe):t==="boolean"?!!oe:oe}var T=R(r),E=[],x=0;if(l)for(var N=0;N<l.length;N++){var X=b[s[N]];X?(x===0&&(x=p()),E[N]=X(l[N])):E[N]=l[N]}var Z=T.apply(null,E);function Te(oe){return x!==0&&m(x),C(oe)}return Z=Te(Z),Z}rr=e.InternalError=rt(Error,"InternalError"),ue(),St=e.BindingError=rt(Error,"BindingError"),ln(),Ft(),gr(),ar=e.UnboundTypeError=rt(Error,"UnboundTypeError"),ut();var J={g:_t,A:bt,w:K,F:br,u:Be,t:zr,c:Ar,E:gn,m:fr,b:Rr,a:_n,l:mn,h:An,J:Xr,d:Yr,G:$n,x:Kr,i:st,r:Rn,p:En,q:Sn,s:kn,j:Fn,D:Sr,y:nn,z:an,B:_r,I:f,C:v,v:P,k:O,o:S,n:c,H:i,f:D,e:n};Wr(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.L).apply(null,arguments)};var Q=e._malloc=function(){return(Q=e._malloc=e.asm.N).apply(null,arguments)},Y=e._free=function(){return(Y=e._free=e.asm.O).apply(null,arguments)},a=e.___getTypeName=function(){return(a=e.___getTypeName=e.asm.P).apply(null,arguments)};e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.Q).apply(null,arguments)};var o=e._setThrew=function(){return(o=e._setThrew=e.asm.R).apply(null,arguments)},p=e.stackSave=function(){return(p=e.stackSave=e.asm.S).apply(null,arguments)},m=e.stackRestore=function(){return(m=e.stackRestore=e.asm.T).apply(null,arguments)},A=e.stackAlloc=function(){return(A=e.stackAlloc=e.asm.U).apply(null,arguments)},j=e.___cxa_is_pointer_type=function(){return(j=e.___cxa_is_pointer_type=e.asm.V).apply(null,arguments)};e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.W).apply(null,arguments)};function D(r,t){var s=p();try{ot(r)(t)}catch(l){if(m(s),l!==l+0)throw l;o(1,0)}}function S(r,t){var s=p();try{return ot(r)(t)}catch(l){if(m(s),l!==l+0)throw l;o(1,0)}}function n(r,t,s,l){var g=p();try{ot(r)(t,s,l)}catch(b){if(m(g),b!==b+0)throw b;o(1,0)}}function i(r,t,s,l){var g=p();try{return ot(r)(t,s,l)}catch(b){if(m(g),b!==b+0)throw b;o(1,0)}}function c(r,t,s){var l=p();try{return ot(r)(t,s)}catch(g){if(m(l),g!==g+0)throw g;o(1,0)}}e.ccall=L;var h;yt=function r(){h||w(),h||(yt=r)};function w(r){if(Je>0||(Ut(),Je>0))return;function t(){h||(h=!0,e.calledRun=!0,!$t&&(Ze(),B(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),et()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return w(),k.ready}})();d.exports=_})(ci);var Li=ci.exports,Vi=qn(Li);const Bi=new URL("/corenerstone-test-react-vite/assets/libjpegturbowasm_decode-daqMmuVl.wasm",import.meta.url),Vn={codec:void 0,decoder:void 0};function Ni(){if(Vn.codec)return Promise.resolve();const d=Vi({locateFile:y=>y.endsWith(".wasm")?Bi.toString():y});return new Promise((y,_)=>{d.then(I=>{Vn.codec=I,Vn.decoder=new I.JPEGDecoder,y()},_)})}async function zi(d,y){await Ni();const _=Vn.decoder;_.getEncodedBuffer(d.length).set(d),_.decode();const k=_.getFrameInfo(),e=_.getDecodedBuffer(),B={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:y.signed,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},W=qi(k,e),H={frameInfo:k};return{...y,pixelData:W,imageInfo:B,encodeOptions:H,...H,...B}}function qi(d,y){return d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}const Wn={JpegImage:void 0,decodeConfig:{}};function Gi(d){return Wn.decodeConfig=d,Wn.JpegImage?Promise.resolve():new Promise((y,_)=>{import("./jpeg-BQEpTZHd.js").then(I=>{Wn.JpegImage=I.default,y()}).catch(_)})}async function Ji(d,y){if(await Gi(),typeof Wn.JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");const _=new Wn.JpegImage;if(_.parse(y),_.colorTransform=!1,d.bitsAllocated===8)return d.pixelData=_.getData(d.columns,d.rows),d;if(d.bitsAllocated===16)return d.pixelData=_.getData16(d.columns,d.rows),d}const Hn={jpeg:void 0,decodeConfig:{}};function Xi(d){return Hn.decodeConfig=d,Hn.jpeg?Promise.resolve():new Promise((y,_)=>{import("./lossless-BIYWXcdg.js").then(({Decoder:I})=>{const k=new I;Hn.jpeg=k,y()},_)})}async function ti(d,y){if(await Xi(),typeof Hn.jpeg>"u")throw new Error("No JPEG Lossless decoder loaded");const _=d.bitsAllocated<=8?1:2,I=y.buffer,k=Hn.jpeg.decode(I,y.byteOffset,y.length,_);return d.pixelRepresentation===0?d.bitsAllocated===16?(d.pixelData=new Uint16Array(k.buffer),d):(d.pixelData=new Uint8Array(k.buffer),d):(d.pixelData=new Int16Array(k.buffer),d)}var li={exports:{}};(function(d,y){var _=(()=>{var I=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(I=I||__filename),function(k){k=k||{};var e=typeof k<"u"?k:{},B,W;e.ready=new Promise(function(u,f){B=u,W=f});var H=Object.assign({},e),z=typeof window=="object",V=typeof importScripts=="function",q=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M="";function ee(u){return e.locateFile?e.locateFile(u,M):M+u}var G,re,se;if(q){var me=fn,le=fn;V?M=le.dirname(M)+"/":M=__dirname+"/",G=(u,f)=>(u=yt(u)?new URL(u):le.normalize(u),me.readFileSync(u,f?void 0:"utf8")),se=u=>{var f=G(u,!0);return f.buffer||(f=new Uint8Array(f)),f},re=(u,f,v)=>{u=yt(u)?new URL(u):le.normalize(u),me.readFile(u,function(P,$){P?v(P):f($.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(u){if(!(u instanceof xr))throw u}),process.on("unhandledRejection",function(u){throw u}),e.inspect=function(){return"[Emscripten Module object]"}}else(z||V)&&(V?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),I&&(M=I),M.indexOf("blob:")!==0?M=M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):M="",G=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.send(null),f.responseText},V&&(se=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),re=(u,f,v)=>{var P=new XMLHttpRequest;P.open("GET",u,!0),P.responseType="arraybuffer",P.onload=()=>{if(P.status==200||P.status==0&&P.response){f(P.response);return}v()},P.onerror=v,P.send(null)});e.print||console.log.bind(console);var Ce=e.printErr||console.warn.bind(console);Object.assign(e,H),H=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit;var we;e.wasmBinary&&(we=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&Zt("no native wasm support detected");var ve,de=!1;function $e(u,f){u||Zt(f)}var qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Jt(u,f,v){for(var P=f+v,$=f;u[$]&&!($>=P);)++$;if($-f>16&&u.buffer&&qe)return qe.decode(u.subarray(f,$));for(var F="";f<$;){var O=u[f++];if(!(O&128)){F+=String.fromCharCode(O);continue}var R=u[f++]&63;if((O&224)==192){F+=String.fromCharCode((O&31)<<6|R);continue}var U=u[f++]&63;if((O&240)==224?O=(O&15)<<12|R<<6|U:O=(O&7)<<18|R<<12|U<<6|u[f++]&63,O<65536)F+=String.fromCharCode(O);else{var L=O-65536;F+=String.fromCharCode(55296|L>>10,56320|L&1023)}}return F}function Ge(u,f){return u?Jt(he,u,f):""}function $t(u,f,v,P){if(!(P>0))return 0;for(var $=v,F=v+P-1,O=0;O<u.length;++O){var R=u.charCodeAt(O);if(R>=55296&&R<=57343){var U=u.charCodeAt(++O);R=65536+((R&1023)<<10)|U&1023}if(R<=127){if(v>=F)break;f[v++]=R}else if(R<=2047){if(v+1>=F)break;f[v++]=192|R>>6,f[v++]=128|R&63}else if(R<=65535){if(v+2>=F)break;f[v++]=224|R>>12,f[v++]=128|R>>6&63,f[v++]=128|R&63}else{if(v+3>=F)break;f[v++]=240|R>>18,f[v++]=128|R>>12&63,f[v++]=128|R>>6&63,f[v++]=128|R&63}}return f[v]=0,v-$}function Dt(u,f,v){return $t(u,he,f,v)}function mr(u){for(var f=0,v=0;v<u.length;++v){var P=u.charCodeAt(v);P<=127?f++:P<=2047?f+=2:P>=55296&&P<=57343?(f+=4,++v):f+=3}return f}var Xt,Qe,he,ce,ge,ye,ne,te,fe;function It(u){Xt=u,e.HEAP8=Qe=new Int8Array(u),e.HEAP16=ce=new Int16Array(u),e.HEAP32=ye=new Int32Array(u),e.HEAPU8=he=new Uint8Array(u),e.HEAPU16=ge=new Uint16Array(u),e.HEAPU32=ne=new Uint32Array(u),e.HEAPF32=te=new Float32Array(u),e.HEAPF64=fe=new Float64Array(u)}e.INITIAL_MEMORY;var Ie,pe=[],Yt=[],Kt=[];function cr(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Dr(e.preRun.shift());Vt(pe)}function wr(){Vt(Yt)}function Or(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ur(e.postRun.shift());Vt(Kt)}function Dr(u){pe.unshift(u)}function Ir(u){Yt.unshift(u)}function Ur(u){Kt.unshift(u)}var Ut=0,Ze=null;function et(u){Ut++,e.monitorRunDependencies&&e.monitorRunDependencies(Ut)}function Qt(u){if(Ut--,e.monitorRunDependencies&&e.monitorRunDependencies(Ut),Ut==0&&Ze){var f=Ze;Ze=null,f()}}function Zt(u){e.onAbort&&e.onAbort(u),u="Aborted("+u+")",Ce(u),de=!0,u+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(u);throw W(f),f}var er="data:application/octet-stream;base64,";function Je(u){return u.startsWith(er)}function yt(u){return u.startsWith("file://")}var Re;Re="charlswasm_decode.wasm",Je(Re)||(Re=ee(Re));function Ee(u){try{if(u==Re&&we)return new Uint8Array(we);if(se)return se(u);throw"both async and sync fetching of the wasm failed"}catch(f){Zt(f)}}function Ae(){if(!we&&(z||V)){if(typeof fetch=="function"&&!yt(Re))return fetch(Re,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+Re+"'";return u.arrayBuffer()}).catch(function(){return Ee(Re)});if(re)return new Promise(function(u,f){re(Re,function(v){u(new Uint8Array(v))},f)})}return Promise.resolve().then(function(){return Ee(Re)})}function jr(){var u={a:On};function f(O,R){var U=O.exports;e.asm=U,ve=e.asm.z,It(ve.buffer),Ie=e.asm.C,Ir(e.asm.A),Qt()}et();function v(O){f(O.instance)}function P(O){return Ae().then(function(R){return WebAssembly.instantiate(R,u)}).then(function(R){return R}).then(O,function(R){Ce("failed to asynchronously prepare wasm: "+R),Zt(R)})}function $(){return!we&&typeof WebAssembly.instantiateStreaming=="function"&&!Je(Re)&&!yt(Re)&&!q&&typeof fetch=="function"?fetch(Re,{credentials:"same-origin"}).then(function(O){var R=WebAssembly.instantiateStreaming(O,u);return R.then(v,function(U){return Ce("wasm streaming compile failed: "+U),Ce("falling back to ArrayBuffer instantiation"),P(v)})}):P(v)}if(e.instantiateWasm)try{var F=e.instantiateWasm(u,f);return F}catch(O){Ce("Module.instantiateWasm callback failed with error: "+O),W(O)}return $().catch(W),{}}function xr(u){this.name="ExitStatus",this.message="Program terminated with exit("+u+")",this.status=u}function Vt(u){for(;u.length>0;)u.shift()(e)}function Fe(u){this.excPtr=u,this.ptr=u-24,this.set_type=function(f){ne[this.ptr+4>>2]=f},this.get_type=function(){return ne[this.ptr+4>>2]},this.set_destructor=function(f){ne[this.ptr+8>>2]=f},this.get_destructor=function(){return ne[this.ptr+8>>2]},this.set_refcount=function(f){ye[this.ptr>>2]=f},this.set_caught=function(f){f=f?1:0,Qe[this.ptr+12>>0]=f},this.get_caught=function(){return Qe[this.ptr+12>>0]!=0},this.set_rethrown=function(f){f=f?1:0,Qe[this.ptr+13>>0]=f},this.get_rethrown=function(){return Qe[this.ptr+13>>0]!=0},this.init=function(f,v){this.set_adjusted_ptr(0),this.set_type(f),this.set_destructor(v),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var f=ye[this.ptr>>2];ye[this.ptr>>2]=f+1},this.release_ref=function(){var f=ye[this.ptr>>2];return ye[this.ptr>>2]=f-1,f===1},this.set_adjusted_ptr=function(f){ne[this.ptr+16>>2]=f},this.get_adjusted_ptr=function(){return ne[this.ptr+16>>2]},this.get_exception_ptr=function(){var f=an(this.get_type());if(f)return ne[this.excPtr>>2];var v=this.get_adjusted_ptr();return v!==0?v:this.excPtr}}function tr(u,f,v){var P=new Fe(u);throw P.init(f,v),u}var lr={};function Wr(u){for(;u.length;){var f=u.pop(),v=u.pop();v(f)}}function Ue(u){return this.fromWireType(ye[u>>2])}var Xe={},_e={},_t={},ct=48,Rt=57;function jt(u){if(u===void 0)return"_unknown";u=u.replace(/[^a-zA-Z0-9_]/g,"$");var f=u.charCodeAt(0);return f>=ct&&f<=Rt?"_"+u:u}function Et(u,f){return u=jt(u),new Function("body","return function "+u+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(f)}function tt(u,f){var v=Et(f,function(P){this.name=f,this.message=P;var $=new Error(P).stack;$!==void 0&&(this.stack=this.toString()+`
`+$.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var xt=void 0;function mt(u){throw new xt(u)}function wt(u,f,v){u.forEach(function(R){_t[R]=f});function P(R){var U=v(R);U.length!==u.length&&mt("Mismatched type converter count");for(var L=0;L<u.length;++L)Se(u[L],U[L])}var $=new Array(f.length),F=[],O=0;f.forEach((R,U)=>{_e.hasOwnProperty(R)?$[U]=_e[R]:(F.push(R),Xe.hasOwnProperty(R)||(Xe[R]=[]),Xe[R].push(()=>{$[U]=_e[R],++O,O===F.length&&P($)}))}),F.length===0&&P($)}function lt(u){var f=lr[u];delete lr[u];var v=f.rawConstructor,P=f.rawDestructor,$=f.fields,F=$.map(O=>O.getterReturnType).concat($.map(O=>O.setterArgumentType));wt([u],F,O=>{var R={};return $.forEach((U,L)=>{var J=U.fieldName,Q=O[L],Y=U.getter,a=U.getterContext,o=O[L+$.length],p=U.setter,m=U.setterContext;R[J]={read:A=>Q.fromWireType(Y(a,A)),write:(A,j)=>{var D=[];p(m,A,o.toWireType(D,j)),Wr(D)}}}),[{name:f.name,fromWireType:function(U){var L={};for(var J in R)L[J]=R[J].read(U);return P(U),L},toWireType:function(U,L){for(var J in R)if(!(J in L))throw new TypeError('Missing field:  "'+J+'"');var Q=v();for(J in R)R[J].write(Q,L[J]);return U!==null&&U.push(P,Q),Q},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:P}]})}function Me(u,f,v,P,$){}function rt(u){switch(u){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+u)}}function rr(){for(var u=new Array(256),f=0;f<256;++f)u[f]=String.fromCharCode(f);Wt=u}var Wt=void 0;function be(u){for(var f="",v=u;he[v];)f+=Wt[he[v++]];return f}var bt=void 0;function K(u){throw new bt(u)}function Se(u,f,v={}){if(!("argPackAdvance"in f))throw new TypeError("registerType registeredInstance requires argPackAdvance");var P=f.name;if(u||K('type "'+P+'" must have a positive integer typeid pointer'),_e.hasOwnProperty(u)){if(v.ignoreDuplicateRegistrations)return;K("Cannot register type '"+P+"' twice")}if(_e[u]=f,delete _t[u],Xe.hasOwnProperty(u)){var $=Xe[u];delete Xe[u],$.forEach(F=>F())}}function ue(u,f,v,P,$){var F=rt(v);f=be(f),Se(u,{name:f,fromWireType:function(O){return!!O},toWireType:function(O,R){return R?P:$},argPackAdvance:8,readValueFromPointer:function(O){var R;if(v===1)R=Qe;else if(v===2)R=ce;else if(v===4)R=ye;else throw new TypeError("Unknown boolean type size: "+f);return this.fromWireType(R[O>>F])},destructorFunction:null})}function Le(u){if(!(this instanceof Ye)||!(u instanceof Ye))return!1;for(var f=this.$$.ptrType.registeredClass,v=this.$$.ptr,P=u.$$.ptrType.registeredClass,$=u.$$.ptr;f.baseClass;)v=f.upcast(v),f=f.baseClass;for(;P.baseClass;)$=P.upcast($),P=P.baseClass;return f===P&&v===$}function Pe(u){return{count:u.count,deleteScheduled:u.deleteScheduled,preservePointerOnDelete:u.preservePointerOnDelete,ptr:u.ptr,ptrType:u.ptrType,smartPtr:u.smartPtr,smartPtrType:u.smartPtrType}}function St(u){function f(v){return v.$$.ptrType.registeredClass.name}K(f(u)+" instance already deleted")}var ae=!1;function xe(u){}function br(u){u.smartPtr?u.smartPtrType.rawDestructor(u.smartPtr):u.ptrType.registeredClass.rawDestructor(u.ptr)}function dr(u){u.count.value-=1;var f=u.count.value===0;f&&br(u)}function Oe(u,f,v){if(f===v)return u;if(v.baseClass===void 0)return null;var P=Oe(u,f,v.baseClass);return P===null?null:v.downcast(P)}var dt={};function ie(){return Object.keys(Nt).length}function nt(){var u=[];for(var f in Nt)Nt.hasOwnProperty(f)&&u.push(Nt[f]);return u}var nr=[];function pr(){for(;nr.length;){var u=nr.pop();u.$$.deleteScheduled=!1,u.delete()}}var pt=void 0;function Bt(u){pt=u,nr.length&&pt&&pt(pr)}function Ht(){e.getInheritedInstanceCount=ie,e.getLiveInheritedInstances=nt,e.flushPendingDeletes=pr,e.setDelayFunction=Bt}var Nt={};function ir(u,f){for(f===void 0&&K("ptr should not be undefined");u.baseClass;)f=u.upcast(f),u=u.baseClass;return f}function kt(u,f){return f=ir(u,f),Nt[f]}function Pt(u,f){(!f.ptrType||!f.ptr)&&mt("makeClassHandle requires ptr and ptrType");var v=!!f.smartPtrType,P=!!f.smartPtr;return v!==P&&mt("Both smartPtrType and smartPtr must be specified"),f.count={value:1},Ft(Object.create(u,{$$:{value:f}}))}function Hr(u){var f=this.getPointee(u);if(!f)return this.destructor(u),null;var v=kt(this.registeredClass,f);if(v!==void 0){if(v.$$.count.value===0)return v.$$.ptr=f,v.$$.smartPtr=u,v.clone();var P=v.clone();return this.destructor(u),P}function $(){return this.isSmartPointer?Pt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:f,smartPtrType:this,smartPtr:u}):Pt(this.registeredClass.instancePrototype,{ptrType:this,ptr:u})}var F=this.registeredClass.getActualType(f),O=dt[F];if(!O)return $.call(this);var R;this.isConst?R=O.constPointerType:R=O.pointerType;var U=Oe(f,this.registeredClass,R.registeredClass);return U===null?$.call(this):this.isSmartPointer?Pt(R.registeredClass.instancePrototype,{ptrType:R,ptr:U,smartPtrType:this,smartPtr:u}):Pt(R.registeredClass.instancePrototype,{ptrType:R,ptr:U})}function Ft(u){return typeof FinalizationRegistry>"u"?(Ft=f=>f,u):(ae=new FinalizationRegistry(f=>{dr(f.$$)}),Ft=f=>{var v=f.$$,P=!!v.smartPtr;if(P){var $={$$:v};ae.register(f,$,f)}return f},xe=f=>ae.unregister(f),Ft(u))}function or(){if(this.$$.ptr||St(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var u=Ft(Object.create(Object.getPrototypeOf(this),{$$:{value:Pe(this.$$)}}));return u.$$.count.value+=1,u.$$.deleteScheduled=!1,u}function Tt(){this.$$.ptr||St(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&K("Object already scheduled for deletion"),xe(this),dr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Pr(){return!this.$$.ptr}function Ot(){return this.$$.ptr||St(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&K("Object already scheduled for deletion"),nr.push(this),nr.length===1&&pt&&pt(pr),this.$$.deleteScheduled=!0,this}function cn(){Ye.prototype.isAliasOf=Le,Ye.prototype.clone=or,Ye.prototype.delete=Tt,Ye.prototype.isDeleted=Pr,Ye.prototype.deleteLater=Ot}function Ye(){}function zt(u,f,v){if(u[f].overloadTable===void 0){var P=u[f];u[f]=function(){return u[f].overloadTable.hasOwnProperty(arguments.length)||K("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+u[f].overloadTable+")!"),u[f].overloadTable[arguments.length].apply(this,arguments)},u[f].overloadTable=[],u[f].overloadTable[P.argCount]=P}}function Ct(u,f,v){e.hasOwnProperty(u)?((v===void 0||e[u].overloadTable!==void 0&&e[u].overloadTable[v]!==void 0)&&K("Cannot register public name '"+u+"' twice"),zt(e,u,u),e.hasOwnProperty(v)&&K("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),e[u].overloadTable[v]=f):(e[u]=f,v!==void 0&&(e[u].numArguments=v))}function Mr(u,f,v,P,$,F,O,R){this.name=u,this.constructor=f,this.instancePrototype=v,this.rawDestructor=P,this.baseClass=$,this.getActualType=F,this.upcast=O,this.downcast=R,this.pureVirtualFunctions=[]}function qt(u,f,v){for(;f!==v;)f.upcast||K("Expected null or instance of "+v.name+", got an instance of "+f.name),u=f.upcast(u),f=f.baseClass;return u}function ln(u,f){if(f===null)return this.isReference&&K("null is not a valid "+this.name),0;f.$$||K('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||K("Cannot pass deleted object as a pointer of type "+this.name);var v=f.$$.ptrType.registeredClass,P=qt(f.$$.ptr,v,this.registeredClass);return P}function We(u,f){var v;if(f===null)return this.isReference&&K("null is not a valid "+this.name),this.isSmartPointer?(v=this.rawConstructor(),u!==null&&u.push(this.rawDestructor,v),v):0;f.$$||K('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||K("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&f.$$.ptrType.isConst&&K("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);var P=f.$$.ptrType.registeredClass;if(v=qt(f.$$.ptr,P,this.registeredClass),this.isSmartPointer)switch(f.$$.smartPtr===void 0&&K("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:f.$$.smartPtrType===this?v=f.$$.smartPtr:K("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:v=f.$$.smartPtr;break;case 2:if(f.$$.smartPtrType===this)v=f.$$.smartPtr;else{var $=f.clone();v=this.rawShare(v,gt.toHandle(function(){$.delete()})),u!==null&&u.push(this.rawDestructor,v)}break;default:K("Unsupporting sharing policy")}return v}function Lr(u,f){if(f===null)return this.isReference&&K("null is not a valid "+this.name),0;f.$$||K('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||K("Cannot pass deleted object as a pointer of type "+this.name),f.$$.ptrType.isConst&&K("Cannot convert argument of type "+f.$$.ptrType.name+" to parameter type "+this.name);var v=f.$$.ptrType.registeredClass,P=qt(f.$$.ptr,v,this.registeredClass);return P}function dn(u){return this.rawGetPointee&&(u=this.rawGetPointee(u)),u}function pn(u){this.rawDestructor&&this.rawDestructor(u)}function Tr(u){u!==null&&u.delete()}function vn(){De.prototype.getPointee=dn,De.prototype.destructor=pn,De.prototype.argPackAdvance=8,De.prototype.readValueFromPointer=Ue,De.prototype.deleteObject=Tr,De.prototype.fromWireType=Hr}function De(u,f,v,P,$,F,O,R,U,L,J){this.name=u,this.registeredClass=f,this.isReference=v,this.isConst=P,this.isSmartPointer=$,this.pointeeType=F,this.sharingPolicy=O,this.rawGetPointee=R,this.rawConstructor=U,this.rawShare=L,this.rawDestructor=J,!$&&f.baseClass===void 0?P?(this.toWireType=ln,this.destructorFunction=null):(this.toWireType=Lr,this.destructorFunction=null):this.toWireType=We}function Cr(u,f,v){e.hasOwnProperty(u)||mt("Replacing nonexistant public symbol"),e[u].overloadTable!==void 0&&v!==void 0?e[u].overloadTable[v]=f:(e[u]=f,e[u].argCount=v)}function vt(u,f,v){var P=e["dynCall_"+u];return v&&v.length?P.apply(null,[f].concat(v)):P.call(null,f)}var vr=[];function hr(u){var f=vr[u];return f||(u>=vr.length&&(vr.length=u+1),vr[u]=f=Ie.get(u)),f}function gr(u,f,v){if(u.includes("j"))return vt(u,f,v);var P=hr(f).apply(null,v);return P}function ht(u,f){var v=[];return function(){return v.length=0,Object.assign(v,arguments),gr(u,f,v)}}function it(u,f){u=be(u);function v(){return u.includes("j")?ht(u,f):hr(f)}var P=v();return typeof P!="function"&&K("unknown function pointer with signature "+u+": "+f),P}var Vr=void 0;function He(u){var f=nn(u),v=be(f);return ft(f),v}function ot(u,f){var v=[],P={};function $(F){if(!P[F]&&!_e[F]){if(_t[F]){_t[F].forEach($);return}v.push(F),P[F]=!0}}throw f.forEach($),new Vr(u+": "+v.map(He).join([", "]))}function Br(u,f,v,P,$,F,O,R,U,L,J,Q,Y){J=be(J),F=it($,F),R&&(R=it(O,R)),L&&(L=it(U,L)),Y=it(Q,Y);var a=jt(J);Ct(a,function(){ot("Cannot construct "+J+" due to unbound types",[P])}),wt([u,f,v],P?[P]:[],function(o){o=o[0];var p,m;P?(p=o.registeredClass,m=p.instancePrototype):m=Ye.prototype;var A=Et(a,function(){if(Object.getPrototypeOf(this)!==j)throw new bt("Use 'new' to construct "+J);if(D.constructor_body===void 0)throw new bt(J+" has no accessible constructor");var c=D.constructor_body[arguments.length];if(c===void 0)throw new bt("Tried to invoke ctor of "+J+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(D.constructor_body).toString()+") parameters instead!");return c.apply(this,arguments)}),j=Object.create(m,{constructor:{value:A}});A.prototype=j;var D=new Mr(J,A,j,Y,p,F,R,L),S=new De(J,D,!0,!1,!1),n=new De(J+"*",D,!1,!1,!1),i=new De(J+" const*",D,!1,!0,!1);return dt[u]={pointerType:n,constPointerType:i},Cr(a,A),[S,n,i]})}function Ve(u,f){for(var v=[],P=0;P<u;P++)v.push(ne[f+P*4>>2]);return v}function at(u,f){if(!(u instanceof Function))throw new TypeError("new_ called with constructor type "+typeof u+" which is not a function");var v=Et(u.name||"unknownFunctionName",function(){});v.prototype=u.prototype;var P=new v,$=u.apply(P,f);return $ instanceof Object?$:P}function ar(u,f,v,P,$){var F=f.length;F<2&&K("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=f[1]!==null&&v!==null,R=!1,U=1;U<f.length;++U)if(f[U]!==null&&f[U].destructorFunction===void 0){R=!0;break}for(var L=f[0].name!=="void",J="",Q="",U=0;U<F-2;++U)J+=(U!==0?", ":"")+"arg"+U,Q+=(U!==0?", ":"")+"arg"+U+"Wired";var Y="return function "+jt(u)+"("+J+`) {
if (arguments.length !== `+(F-2)+`) {
throwBindingError('function `+u+" called with ' + arguments.length + ' arguments, expected "+(F-2)+` args!');
}
`;R&&(Y+=`var destructors = [];
`);var a=R?"destructors":"null",o=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[K,P,$,Wr,f[0],f[1]];O&&(Y+="var thisWired = classParam.toWireType("+a+`, this);
`);for(var U=0;U<F-2;++U)Y+="var arg"+U+"Wired = argType"+U+".toWireType("+a+", arg"+U+"); // "+f[U+2].name+`
`,o.push("argType"+U),p.push(f[U+2]);if(O&&(Q="thisWired"+(Q.length>0?", ":"")+Q),Y+=(L?"var rv = ":"")+"invoker(fn"+(Q.length>0?", ":"")+Q+`);
`,R)Y+=`runDestructors(destructors);
`;else for(var U=O?1:2;U<f.length;++U){var m=U===1?"thisWired":"arg"+(U-2)+"Wired";f[U].destructorFunction!==null&&(Y+=m+"_dtor("+m+"); // "+f[U].name+`
`,o.push(m+"_dtor"),p.push(f[U].destructorFunction))}L&&(Y+=`var ret = retType.fromWireType(rv);
return ret;
`),Y+=`}
`,o.push(Y);var A=at(Function,o).apply(null,p);return A}function Nr(u,f,v,P,$,F){$e(f>0);var O=Ve(f,v);$=it(P,$),wt([],[u],function(R){R=R[0];var U="constructor "+R.name;if(R.registeredClass.constructor_body===void 0&&(R.registeredClass.constructor_body=[]),R.registeredClass.constructor_body[f-1]!==void 0)throw new bt("Cannot register multiple constructors with identical number of parameters ("+(f-1)+") for class '"+R.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return R.registeredClass.constructor_body[f-1]=()=>{ot("Cannot construct "+R.name+" due to unbound types",O)},wt([],O,function(L){return L.splice(1,0,null),R.registeredClass.constructor_body[f-1]=ar(U,L,null,$,F),[]}),[]})}function yr(u,f,v,P,$,F,O,R){var U=Ve(v,P);f=be(f),F=it($,F),wt([],[u],function(L){L=L[0];var J=L.name+"."+f;f.startsWith("@@")&&(f=Symbol[f.substring(2)]),R&&L.registeredClass.pureVirtualFunctions.push(f);function Q(){ot("Cannot call "+J+" due to unbound types",U)}var Y=L.registeredClass.instancePrototype,a=Y[f];return a===void 0||a.overloadTable===void 0&&a.className!==L.name&&a.argCount===v-2?(Q.argCount=v-2,Q.className=L.name,Y[f]=Q):(zt(Y,f,J),Y[f].overloadTable[v-2]=Q),wt([],U,function(o){var p=ar(J,o,L,F,O);return Y[f].overloadTable===void 0?(p.argCount=v-2,Y[f]=p):Y[f].overloadTable[v-2]=p,[]}),[]})}var Be=[],Ne=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function sr(u){u>4&&--Ne[u].refcount===0&&(Ne[u]=void 0,Be.push(u))}function je(){for(var u=0,f=5;f<Ne.length;++f)Ne[f]!==void 0&&++u;return u}function zr(){for(var u=5;u<Ne.length;++u)if(Ne[u]!==void 0)return Ne[u];return null}function Ar(){e.count_emval_handles=je,e.get_first_emval=zr}var gt={toValue:u=>(u||K("Cannot use deleted val. handle = "+u),Ne[u].value),toHandle:u=>{switch(u){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var f=Be.length?Be.pop():Ne.length;return Ne[f]={refcount:1,value:u},f}}}};function ze(u,f){f=be(f),Se(u,{name:f,fromWireType:function(v){var P=gt.toValue(v);return sr(v),P},toWireType:function(v,P){return gt.toHandle(P)},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:null})}function st(u){if(u===null)return"null";var f=typeof u;return f==="object"||f==="array"||f==="function"?u.toString():""+u}function hn(u,f){switch(f){case 2:return function(v){return this.fromWireType(te[v>>2])};case 3:return function(v){return this.fromWireType(fe[v>>3])};default:throw new TypeError("Unknown float type: "+u)}}function ur(u,f,v){var P=rt(v);f=be(f),Se(u,{name:f,fromWireType:function($){return $},toWireType:function($,F){return F},argPackAdvance:8,readValueFromPointer:hn(f,P),destructorFunction:null})}function ut(u,f,v,P,$,F){var O=Ve(f,v);u=be(u),$=it(P,$),Ct(u,function(){ot("Cannot call "+u+" due to unbound types",O)},f-1),wt([],O,function(R){var U=[R[0],null].concat(R.slice(1));return Cr(u,ar(u,U,null,$,F),f-1),[]})}function At(u,f,v){switch(f){case 0:return v?function($){return Qe[$]}:function($){return he[$]};case 1:return v?function($){return ce[$>>1]}:function($){return ge[$>>1]};case 2:return v?function($){return ye[$>>2]}:function($){return ne[$>>2]};default:throw new TypeError("Unknown integer type: "+u)}}function gn(u,f,v,P,$){f=be(f);var F=rt(v),O=Q=>Q;if(P===0){var R=32-8*v;O=Q=>Q<<R>>>R}var U=f.includes("unsigned"),L=(Q,Y)=>{},J;U?J=function(Q,Y){return L(Y,this.name),Y>>>0}:J=function(Q,Y){return L(Y,this.name),Y},Se(u,{name:f,fromWireType:O,toWireType:J,argPackAdvance:8,readValueFromPointer:At(f,F,P!==0),destructorFunction:null})}function $r(u,f,v){var P=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],$=P[f];function F(O){O=O>>2;var R=ne,U=R[O],L=R[O+1];return new $(Xt,L,U)}v=be(v),Se(u,{name:v,fromWireType:F,argPackAdvance:8,readValueFromPointer:F},{ignoreDuplicateRegistrations:!0})}function yn(u,f){f=be(f);var v=f==="std::string";Se(u,{name:f,fromWireType:function(P){var $=ne[P>>2],F=P+4,O;if(v)for(var R=F,U=0;U<=$;++U){var L=F+U;if(U==$||he[L]==0){var J=L-R,Q=Ge(R,J);O===void 0?O=Q:(O+="\0",O+=Q),R=L+1}}else{for(var Y=new Array($),U=0;U<$;++U)Y[U]=String.fromCharCode(he[F+U]);O=Y.join("")}return ft(P),O},toWireType:function(P,$){$ instanceof ArrayBuffer&&($=new Uint8Array($));var F,O=typeof $=="string";O||$ instanceof Uint8Array||$ instanceof Uint8ClampedArray||$ instanceof Int8Array||K("Cannot pass non-string to std::string"),v&&O?F=mr($):F=$.length;var R=Mt(4+F+1),U=R+4;if(ne[R>>2]=F,v&&O)Dt($,U,F+1);else if(O)for(var L=0;L<F;++L){var J=$.charCodeAt(L);J>255&&(ft(U),K("String has UTF-16 code units that do not fit in 8 bits")),he[U+L]=J}else for(var L=0;L<F;++L)he[U+L]=$[L];return P!==null&&P.push(ft,R),R},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(P){ft(P)}})}var fr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function qr(u,f){for(var v=u,P=v>>1,$=P+f/2;!(P>=$)&&ge[P];)++P;if(v=P<<1,v-u>32&&fr)return fr.decode(he.subarray(u,v));for(var F="",O=0;!(O>=f/2);++O){var R=ce[u+O*2>>1];if(R==0)break;F+=String.fromCharCode(R)}return F}function Rr(u,f,v){if(v===void 0&&(v=2147483647),v<2)return 0;v-=2;for(var P=f,$=v<u.length*2?v/2:u.length,F=0;F<$;++F){var O=u.charCodeAt(F);ce[f>>1]=O,f+=2}return ce[f>>1]=0,f-P}function _n(u){return u.length*2}function mn(u,f){for(var v=0,P="";!(v>=f/4);){var $=ye[u+v*4>>2];if($==0)break;if(++v,$>=65536){var F=$-65536;P+=String.fromCharCode(55296|F>>10,56320|F&1023)}else P+=String.fromCharCode($)}return P}function Gr(u,f,v){if(v===void 0&&(v=2147483647),v<4)return 0;for(var P=f,$=P+v-4,F=0;F<u.length;++F){var O=u.charCodeAt(F);if(O>=55296&&O<=57343){var R=u.charCodeAt(++F);O=65536+((O&1023)<<10)|R&1023}if(ye[f>>2]=O,f+=4,f+4>$)break}return ye[f>>2]=0,f-P}function wn(u){for(var f=0,v=0;v<u.length;++v){var P=u.charCodeAt(v);P>=55296&&P<=57343&&++v,f+=4}return f}function bn(u,f,v){v=be(v);var P,$,F,O,R;f===2?(P=qr,$=Rr,O=_n,F=()=>ge,R=1):f===4&&(P=mn,$=Gr,O=wn,F=()=>ne,R=2),Se(u,{name:v,fromWireType:function(U){for(var L=ne[U>>2],J=F(),Q,Y=U+4,a=0;a<=L;++a){var o=U+4+a*f;if(a==L||J[o>>R]==0){var p=o-Y,m=P(Y,p);Q===void 0?Q=m:(Q+="\0",Q+=m),Y=o+f}}return ft(U),Q},toWireType:function(U,L){typeof L!="string"&&K("Cannot pass non-string to C++ string type "+v);var J=O(L),Q=Mt(4+J+f);return ne[Q>>2]=J>>R,$(L,Q+4,J+f),U!==null&&U.push(ft,Q),Q},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(U){ft(U)}})}function Pn(u,f,v,P,$,F){lr[u]={name:be(f),rawConstructor:it(v,P),rawDestructor:it($,F),fields:[]}}function Tn(u,f,v,P,$,F,O,R,U,L){lr[u].fields.push({fieldName:be(f),getterReturnType:v,getter:it(P,$),getterContext:F,setterArgumentType:O,setter:it(R,U),setterContext:L})}function Jr(u,f){f=be(f),Se(u,{isVoid:!0,name:f,argPackAdvance:0,fromWireType:function(){},toWireType:function(v,P){}})}var Cn={};function An(u){var f=Cn[u];return f===void 0?be(u):f}function Xr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Yr(u){return u===0?gt.toHandle(Xr()):(u=An(u),gt.toHandle(Xr()[u]))}function $n(u){u>4&&(Ne[u].refcount+=1)}function Kr(u,f){var v=_e[u];return v===void 0&&K(f+" has unknown type "+He(u)),v}function Qr(u){for(var f="",v=0;v<u;++v)f+=(v!==0?", ":"")+"arg"+v;for(var P=()=>ne,$="return function emval_allocator_"+u+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,v=0;v<u;++v)$+="var argType"+v+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+v+`');
var arg`+v+" = argType"+v+`.readValueFromPointer(args);
args += argType`+v+`['argPackAdvance'];
argTypes += 4;
`;return $+="var obj = new constructor("+f+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",$)(Kr,e,gt.toHandle,P)}var Zr={};function Er(u,f,v,P){u=gt.toValue(u);var $=Zr[f];return $||($=Qr(f),Zr[f]=$),$(u,v,P)}function Rn(u,f){u=Kr(u,"_emval_take_value");var v=u.readValueFromPointer(f);return gt.toHandle(v)}function En(){Zt("")}function en(u,f,v){he.copyWithin(u,f,f+v)}function tn(){return 2147483648}function rn(u){try{return ve.grow(u-Xt.byteLength+65535>>>16),It(ve.buffer),1}catch{}}function Sn(u){var f=he.length;u=u>>>0;var v=tn();if(u>v)return!1;let P=(U,L)=>U+(L-U%L)%L;for(var $=1;$<=4;$*=2){var F=f*(1+.2/$);F=Math.min(F,u+100663296);var O=Math.min(v,P(Math.max(u,F),65536)),R=rn(O);if(R)return!0}return!1}function kn(u){var f=e["_"+u];return f}function Fn(u,f){Qe.set(u,f)}function Sr(u,f,v,P,$){var F={string:o=>{var p=0;if(o!=null&&o!==0){var m=(o.length<<2)+1;p=kr(m),Dt(o,p,m)}return p},array:o=>{var p=kr(o.length);return Fn(o,p),p}};function O(o){return f==="string"?Ge(o):f==="boolean"?!!o:o}var R=kn(u),U=[],L=0;if(P)for(var J=0;J<P.length;J++){var Q=F[v[J]];Q?(L===0&&(L=on()),U[J]=Q(P[J])):U[J]=P[J]}var Y=R.apply(null,U);function a(o){return L!==0&&Gt(L),O(o)}return Y=a(Y),Y}xt=e.InternalError=tt(Error,"InternalError"),rr(),bt=e.BindingError=tt(Error,"BindingError"),cn(),Ht(),vn(),Vr=e.UnboundTypeError=tt(Error,"UnboundTypeError"),Ar();var On={h:tr,q:lt,r:Me,w:ue,p:Br,o:Nr,c:yr,v:ze,k:ur,e:ut,b:gn,a:$r,j:yn,g:bn,u:Pn,d:Tn,x:Jr,i:sr,m:Yr,l:$n,y:Er,n:Rn,f:En,t:en,s:Sn};jr(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.A).apply(null,arguments)};var Mt=e._malloc=function(){return(Mt=e._malloc=e.asm.B).apply(null,arguments)},nn=e.___getTypeName=function(){return(nn=e.___getTypeName=e.asm.D).apply(null,arguments)};e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.E).apply(null,arguments)};var ft=e._free=function(){return(ft=e._free=e.asm.F).apply(null,arguments)},on=e.stackSave=function(){return(on=e.stackSave=e.asm.G).apply(null,arguments)},Gt=e.stackRestore=function(){return(Gt=e.stackRestore=e.asm.H).apply(null,arguments)},kr=e.stackAlloc=function(){return(kr=e.stackAlloc=e.asm.I).apply(null,arguments)},an=e.___cxa_is_pointer_type=function(){return(an=e.___cxa_is_pointer_type=e.asm.J).apply(null,arguments)};e.ccall=Sr;var _r;Ze=function u(){_r||sn(),_r||(Ze=u)};function sn(u){if(Ut>0||(cr(),Ut>0))return;function f(){_r||(_r=!0,e.calledRun=!0,!de&&(wr(),B(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Or()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),f()},1)):f()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return sn(),k.ready}})();d.exports=_})(li);var Yi=li.exports,Ki=qn(Yi);const Qi=new URL("/corenerstone-test-react-vite/assets/charlswasm_decode-484ovEoR.wasm",import.meta.url),Un={codec:void 0,decoder:void 0,decodeConfig:{}};function Zi(d){return typeof d=="number"?Un.codec.getExceptionMessage(d):d}function eo(d){if(Un.decodeConfig=d,Un.codec)return Promise.resolve();const y=Ki({locateFile:_=>_.endsWith(".wasm")?Qi.toString():_});return new Promise((_,I)=>{y.then(k=>{Un.codec=k,Un.decoder=new k.JpegLSDecoder,_()},I)})}async function ri(d,y){try{await eo();const _=Un.decoder;_.getEncodedBuffer(d.length).set(d),_.decode();const k=_.getFrameInfo(),e=_.getInterleaveMode(),B=_.getNearLossless(),W=_.getDecodedBuffer(),H={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:y.signed,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},z=to(k,W,y.signed),V={nearLossless:B,interleaveMode:e,frameInfo:k};return{...y,pixelData:z,imageInfo:H,encodeOptions:V,...V,...H}}catch(_){throw Zi(_)}}function to(d,y,_){return d.bitsPerSample>8?_?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):_?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}var di={exports:{}};(function(d,y){var _=(()=>{var I=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(I=I||__filename),function(k){k=k||{};var e=typeof k<"u"?k:{},B,W;e.ready=new Promise(function(a,o){B=a,W=o});var H=Object.assign({},e),z="./this.program",V=typeof window=="object",q=typeof importScripts=="function",M=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ee="";function G(a){return e.locateFile?e.locateFile(a,ee):ee+a}var re,se,me;if(M){var le=fn,Ce=fn;q?ee=Ce.dirname(ee)+"/":ee=__dirname+"/",re=(a,o)=>(a=Ee(a)?new URL(a):Ce.normalize(a),le.readFileSync(a,o?void 0:"utf8")),me=a=>{var o=re(a,!0);return o.buffer||(o=new Uint8Array(o)),o},se=(a,o,p)=>{a=Ee(a)?new URL(a):Ce.normalize(a),le.readFile(a,function(m,A){m?p(m):o(A.buffer)})},process.argv.length>1&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof Fe))throw a}),process.on("unhandledRejection",function(a){throw a}),e.inspect=function(){return"[Emscripten Module object]"}}else(V||q)&&(q?ee=self.location.href:typeof document<"u"&&document.currentScript&&(ee=document.currentScript.src),I&&(ee=I),ee.indexOf("blob:")!==0?ee=ee.substr(0,ee.replace(/[?#].*/,"").lastIndexOf("/")+1):ee="",re=a=>{var o=new XMLHttpRequest;return o.open("GET",a,!1),o.send(null),o.responseText},q&&(me=a=>{var o=new XMLHttpRequest;return o.open("GET",a,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),se=(a,o,p)=>{var m=new XMLHttpRequest;m.open("GET",a,!0),m.responseType="arraybuffer",m.onload=()=>{if(m.status==200||m.status==0&&m.response){o(m.response);return}p()},m.onerror=p,m.send(null)});var we=e.print||console.log.bind(console),ve=e.printErr||console.warn.bind(console);Object.assign(e,H),H=null,e.arguments&&e.arguments,e.thisProgram&&(z=e.thisProgram),e.quit&&e.quit;var de;e.wasmBinary&&(de=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&Je("no native wasm support detected");var $e,qe=!1;function Jt(a,o){a||Je(o)}var Ge=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function $t(a,o,p){for(var m=o+p,A=o;a[A]&&!(A>=m);)++A;if(A-o>16&&a.buffer&&Ge)return Ge.decode(a.subarray(o,A));for(var j="";o<A;){var D=a[o++];if(!(D&128)){j+=String.fromCharCode(D);continue}var S=a[o++]&63;if((D&224)==192){j+=String.fromCharCode((D&31)<<6|S);continue}var n=a[o++]&63;if((D&240)==224?D=(D&15)<<12|S<<6|n:D=(D&7)<<18|S<<12|n<<6|a[o++]&63,D<65536)j+=String.fromCharCode(D);else{var i=D-65536;j+=String.fromCharCode(55296|i>>10,56320|i&1023)}}return j}function Dt(a,o){return a?$t(ge,a,o):""}function mr(a,o,p,m){if(!(m>0))return 0;for(var A=p,j=p+m-1,D=0;D<a.length;++D){var S=a.charCodeAt(D);if(S>=55296&&S<=57343){var n=a.charCodeAt(++D);S=65536+((S&1023)<<10)|n&1023}if(S<=127){if(p>=j)break;o[p++]=S}else if(S<=2047){if(p+1>=j)break;o[p++]=192|S>>6,o[p++]=128|S&63}else if(S<=65535){if(p+2>=j)break;o[p++]=224|S>>12,o[p++]=128|S>>6&63,o[p++]=128|S&63}else{if(p+3>=j)break;o[p++]=240|S>>18,o[p++]=128|S>>12&63,o[p++]=128|S>>6&63,o[p++]=128|S&63}}return o[p]=0,p-A}function Xt(a,o,p){return mr(a,ge,o,p)}function Qe(a){for(var o=0,p=0;p<a.length;++p){var m=a.charCodeAt(p);m<=127?o++:m<=2047?o+=2:m>=55296&&m<=57343?(o+=4,++p):o+=3}return o}var he,ce,ge,ye,ne,te,fe,It,Ie;function pe(a){he=a,e.HEAP8=ce=new Int8Array(a),e.HEAP16=ye=new Int16Array(a),e.HEAP32=te=new Int32Array(a),e.HEAPU8=ge=new Uint8Array(a),e.HEAPU16=ne=new Uint16Array(a),e.HEAPU32=fe=new Uint32Array(a),e.HEAPF32=It=new Float32Array(a),e.HEAPF64=Ie=new Float64Array(a)}e.INITIAL_MEMORY;var Yt,Kt=[],cr=[],wr=[];function Or(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ur(e.preRun.shift());tr(Kt)}function Dr(){tr(cr)}function Ir(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ze(e.postRun.shift());tr(wr)}function Ur(a){Kt.unshift(a)}function Ut(a){cr.unshift(a)}function Ze(a){wr.unshift(a)}var et=0,Qt=null;function Zt(a){et++,e.monitorRunDependencies&&e.monitorRunDependencies(et)}function er(a){if(et--,e.monitorRunDependencies&&e.monitorRunDependencies(et),et==0&&Qt){var o=Qt;Qt=null,o()}}function Je(a){e.onAbort&&e.onAbort(a),a="Aborted("+a+")",ve(a),qe=!0,a+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(a);throw W(o),o}var yt="data:application/octet-stream;base64,";function Re(a){return a.startsWith(yt)}function Ee(a){return a.startsWith("file://")}var Ae;Ae="openjpegwasm_decode.wasm",Re(Ae)||(Ae=G(Ae));function jr(a){try{if(a==Ae&&de)return new Uint8Array(de);if(me)return me(a);throw"both async and sync fetching of the wasm failed"}catch(o){Je(o)}}function xr(){if(!de&&(V||q)){if(typeof fetch=="function"&&!Ee(Ae))return fetch(Ae,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+Ae+"'";return a.arrayBuffer()}).catch(function(){return jr(Ae)});if(se)return new Promise(function(a,o){se(Ae,function(p){a(new Uint8Array(p))},o)})}return Promise.resolve().then(function(){return jr(Ae)})}function Vt(){var a={a:P};function o(D,S){var n=D.exports;e.asm=n,$e=e.asm.E,pe($e.buffer),Yt=e.asm.G,Ut(e.asm.F),er()}Zt();function p(D){o(D.instance)}function m(D){return xr().then(function(S){return WebAssembly.instantiate(S,a)}).then(function(S){return S}).then(D,function(S){ve("failed to asynchronously prepare wasm: "+S),Je(S)})}function A(){return!de&&typeof WebAssembly.instantiateStreaming=="function"&&!Re(Ae)&&!Ee(Ae)&&!M&&typeof fetch=="function"?fetch(Ae,{credentials:"same-origin"}).then(function(D){var S=WebAssembly.instantiateStreaming(D,a);return S.then(p,function(n){return ve("wasm streaming compile failed: "+n),ve("falling back to ArrayBuffer instantiation"),m(p)})}):m(p)}if(e.instantiateWasm)try{var j=e.instantiateWasm(a,o);return j}catch(D){ve("Module.instantiateWasm callback failed with error: "+D),W(D)}return A().catch(W),{}}function Fe(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function tr(a){for(;a.length>0;)a.shift()(e)}function lr(a){this.excPtr=a,this.ptr=a-24,this.set_type=function(o){fe[this.ptr+4>>2]=o},this.get_type=function(){return fe[this.ptr+4>>2]},this.set_destructor=function(o){fe[this.ptr+8>>2]=o},this.get_destructor=function(){return fe[this.ptr+8>>2]},this.set_refcount=function(o){te[this.ptr>>2]=o},this.set_caught=function(o){o=o?1:0,ce[this.ptr+12>>0]=o},this.get_caught=function(){return ce[this.ptr+12>>0]!=0},this.set_rethrown=function(o){o=o?1:0,ce[this.ptr+13>>0]=o},this.get_rethrown=function(){return ce[this.ptr+13>>0]!=0},this.init=function(o,p){this.set_adjusted_ptr(0),this.set_type(o),this.set_destructor(p),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var o=te[this.ptr>>2];te[this.ptr>>2]=o+1},this.release_ref=function(){var o=te[this.ptr>>2];return te[this.ptr>>2]=o-1,o===1},this.set_adjusted_ptr=function(o){fe[this.ptr+16>>2]=o},this.get_adjusted_ptr=function(){return fe[this.ptr+16>>2]},this.get_exception_ptr=function(){var o=J(this.get_type());if(o)return fe[this.excPtr>>2];var p=this.get_adjusted_ptr();return p!==0?p:this.excPtr}}function Wr(a,o,p){var m=new lr(a);throw m.init(o,p),a}var Ue={};function Xe(a){for(;a.length;){var o=a.pop(),p=a.pop();p(o)}}function _e(a){return this.fromWireType(te[a>>2])}var _t={},ct={},Rt={},jt=48,Et=57;function tt(a){if(a===void 0)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var o=a.charCodeAt(0);return o>=jt&&o<=Et?"_"+a:a}function xt(a,o){return a=tt(a),new Function("body","return function "+a+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(o)}function mt(a,o){var p=xt(o,function(m){this.name=o,this.message=m;var A=new Error(m).stack;A!==void 0&&(this.stack=this.toString()+`
`+A.replace(/^Error(:[^\n]*)?\n/,""))});return p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},p}var wt=void 0;function lt(a){throw new wt(a)}function Me(a,o,p){a.forEach(function(S){Rt[S]=o});function m(S){var n=p(S);n.length!==a.length&&lt("Mismatched type converter count");for(var i=0;i<a.length;++i)Le(a[i],n[i])}var A=new Array(o.length),j=[],D=0;o.forEach((S,n)=>{ct.hasOwnProperty(S)?A[n]=ct[S]:(j.push(S),_t.hasOwnProperty(S)||(_t[S]=[]),_t[S].push(()=>{A[n]=ct[S],++D,D===j.length&&m(A)}))}),j.length===0&&m(A)}function rt(a){var o=Ue[a];delete Ue[a];var p=o.rawConstructor,m=o.rawDestructor,A=o.fields,j=A.map(D=>D.getterReturnType).concat(A.map(D=>D.setterArgumentType));Me([a],j,D=>{var S={};return A.forEach((n,i)=>{var c=n.fieldName,h=D[i],w=n.getter,r=n.getterContext,t=D[i+A.length],s=n.setter,l=n.setterContext;S[c]={read:g=>h.fromWireType(w(r,g)),write:(g,b)=>{var C=[];s(l,g,t.toWireType(C,b)),Xe(C)}}}),[{name:o.name,fromWireType:function(n){var i={};for(var c in S)i[c]=S[c].read(n);return m(n),i},toWireType:function(n,i){for(var c in S)if(!(c in i))throw new TypeError('Missing field:  "'+c+'"');var h=p();for(c in S)S[c].write(h,i[c]);return n!==null&&n.push(m,h),h},argPackAdvance:8,readValueFromPointer:_e,destructorFunction:m}]})}function rr(a,o,p,m,A){}function Wt(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a)}}function be(){for(var a=new Array(256),o=0;o<256;++o)a[o]=String.fromCharCode(o);bt=a}var bt=void 0;function K(a){for(var o="",p=a;ge[p];)o+=bt[ge[p++]];return o}var Se=void 0;function ue(a){throw new Se(a)}function Le(a,o,p={}){if(!("argPackAdvance"in o))throw new TypeError("registerType registeredInstance requires argPackAdvance");var m=o.name;if(a||ue('type "'+m+'" must have a positive integer typeid pointer'),ct.hasOwnProperty(a)){if(p.ignoreDuplicateRegistrations)return;ue("Cannot register type '"+m+"' twice")}if(ct[a]=o,delete Rt[a],_t.hasOwnProperty(a)){var A=_t[a];delete _t[a],A.forEach(j=>j())}}function Pe(a,o,p,m,A){var j=Wt(p);o=K(o),Le(a,{name:o,fromWireType:function(D){return!!D},toWireType:function(D,S){return S?m:A},argPackAdvance:8,readValueFromPointer:function(D){var S;if(p===1)S=ce;else if(p===2)S=ye;else if(p===4)S=te;else throw new TypeError("Unknown boolean type size: "+o);return this.fromWireType(S[D>>j])},destructorFunction:null})}function St(a){if(!(this instanceof Ct)||!(a instanceof Ct))return!1;for(var o=this.$$.ptrType.registeredClass,p=this.$$.ptr,m=a.$$.ptrType.registeredClass,A=a.$$.ptr;o.baseClass;)p=o.upcast(p),o=o.baseClass;for(;m.baseClass;)A=m.upcast(A),m=m.baseClass;return o===m&&p===A}function ae(a){return{count:a.count,deleteScheduled:a.deleteScheduled,preservePointerOnDelete:a.preservePointerOnDelete,ptr:a.ptr,ptrType:a.ptrType,smartPtr:a.smartPtr,smartPtrType:a.smartPtrType}}function xe(a){function o(p){return p.$$.ptrType.registeredClass.name}ue(o(a)+" instance already deleted")}var br=!1;function dr(a){}function Oe(a){a.smartPtr?a.smartPtrType.rawDestructor(a.smartPtr):a.ptrType.registeredClass.rawDestructor(a.ptr)}function dt(a){a.count.value-=1;var o=a.count.value===0;o&&Oe(a)}function ie(a,o,p){if(o===p)return a;if(p.baseClass===void 0)return null;var m=ie(a,o,p.baseClass);return m===null?null:p.downcast(m)}var nt={};function nr(){return Object.keys(kt).length}function pr(){var a=[];for(var o in kt)kt.hasOwnProperty(o)&&a.push(kt[o]);return a}var pt=[];function Bt(){for(;pt.length;){var a=pt.pop();a.$$.deleteScheduled=!1,a.delete()}}var Ht=void 0;function Nt(a){Ht=a,pt.length&&Ht&&Ht(Bt)}function ir(){e.getInheritedInstanceCount=nr,e.getLiveInheritedInstances=pr,e.flushPendingDeletes=Bt,e.setDelayFunction=Nt}var kt={};function Pt(a,o){for(o===void 0&&ue("ptr should not be undefined");a.baseClass;)o=a.upcast(o),a=a.baseClass;return o}function Hr(a,o){return o=Pt(a,o),kt[o]}function Ft(a,o){(!o.ptrType||!o.ptr)&&lt("makeClassHandle requires ptr and ptrType");var p=!!o.smartPtrType,m=!!o.smartPtr;return p!==m&&lt("Both smartPtrType and smartPtr must be specified"),o.count={value:1},Tt(Object.create(a,{$$:{value:o}}))}function or(a){var o=this.getPointee(a);if(!o)return this.destructor(a),null;var p=Hr(this.registeredClass,o);if(p!==void 0){if(p.$$.count.value===0)return p.$$.ptr=o,p.$$.smartPtr=a,p.clone();var m=p.clone();return this.destructor(a),m}function A(){return this.isSmartPointer?Ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:o,smartPtrType:this,smartPtr:a}):Ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:a})}var j=this.registeredClass.getActualType(o),D=nt[j];if(!D)return A.call(this);var S;this.isConst?S=D.constPointerType:S=D.pointerType;var n=ie(o,this.registeredClass,S.registeredClass);return n===null?A.call(this):this.isSmartPointer?Ft(S.registeredClass.instancePrototype,{ptrType:S,ptr:n,smartPtrType:this,smartPtr:a}):Ft(S.registeredClass.instancePrototype,{ptrType:S,ptr:n})}function Tt(a){return typeof FinalizationRegistry>"u"?(Tt=o=>o,a):(br=new FinalizationRegistry(o=>{dt(o.$$)}),Tt=o=>{var p=o.$$,m=!!p.smartPtr;if(m){var A={$$:p};br.register(o,A,o)}return o},dr=o=>br.unregister(o),Tt(a))}function Pr(){if(this.$$.ptr||xe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var a=Tt(Object.create(Object.getPrototypeOf(this),{$$:{value:ae(this.$$)}}));return a.$$.count.value+=1,a.$$.deleteScheduled=!1,a}function Ot(){this.$$.ptr||xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ue("Object already scheduled for deletion"),dr(this),dt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function cn(){return!this.$$.ptr}function Ye(){return this.$$.ptr||xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ue("Object already scheduled for deletion"),pt.push(this),pt.length===1&&Ht&&Ht(Bt),this.$$.deleteScheduled=!0,this}function zt(){Ct.prototype.isAliasOf=St,Ct.prototype.clone=Pr,Ct.prototype.delete=Ot,Ct.prototype.isDeleted=cn,Ct.prototype.deleteLater=Ye}function Ct(){}function Mr(a,o,p){if(a[o].overloadTable===void 0){var m=a[o];a[o]=function(){return a[o].overloadTable.hasOwnProperty(arguments.length)||ue("Function '"+p+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+a[o].overloadTable+")!"),a[o].overloadTable[arguments.length].apply(this,arguments)},a[o].overloadTable=[],a[o].overloadTable[m.argCount]=m}}function qt(a,o,p){e.hasOwnProperty(a)?(ue("Cannot register public name '"+a+"' twice"),Mr(e,a,a),e.hasOwnProperty(p)&&ue("Cannot register multiple overloads of a function with the same number of arguments ("+p+")!"),e[a].overloadTable[p]=o):e[a]=o}function ln(a,o,p,m,A,j,D,S){this.name=a,this.constructor=o,this.instancePrototype=p,this.rawDestructor=m,this.baseClass=A,this.getActualType=j,this.upcast=D,this.downcast=S,this.pureVirtualFunctions=[]}function We(a,o,p){for(;o!==p;)o.upcast||ue("Expected null or instance of "+p.name+", got an instance of "+o.name),a=o.upcast(a),o=o.baseClass;return a}function Lr(a,o){if(o===null)return this.isReference&&ue("null is not a valid "+this.name),0;o.$$||ue('Cannot pass "'+ur(o)+'" as a '+this.name),o.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name);var p=o.$$.ptrType.registeredClass,m=We(o.$$.ptr,p,this.registeredClass);return m}function dn(a,o){var p;if(o===null)return this.isReference&&ue("null is not a valid "+this.name),this.isSmartPointer?(p=this.rawConstructor(),a!==null&&a.push(this.rawDestructor,p),p):0;o.$$||ue('Cannot pass "'+ur(o)+'" as a '+this.name),o.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&o.$$.ptrType.isConst&&ue("Cannot convert argument of type "+(o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name)+" to parameter type "+this.name);var m=o.$$.ptrType.registeredClass;if(p=We(o.$$.ptr,m,this.registeredClass),this.isSmartPointer)switch(o.$$.smartPtr===void 0&&ue("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:o.$$.smartPtrType===this?p=o.$$.smartPtr:ue("Cannot convert argument of type "+(o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:p=o.$$.smartPtr;break;case 2:if(o.$$.smartPtrType===this)p=o.$$.smartPtr;else{var A=o.clone();p=this.rawShare(p,st.toHandle(function(){A.delete()})),a!==null&&a.push(this.rawDestructor,p)}break;default:ue("Unsupporting sharing policy")}return p}function pn(a,o){if(o===null)return this.isReference&&ue("null is not a valid "+this.name),0;o.$$||ue('Cannot pass "'+ur(o)+'" as a '+this.name),o.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name),o.$$.ptrType.isConst&&ue("Cannot convert argument of type "+o.$$.ptrType.name+" to parameter type "+this.name);var p=o.$$.ptrType.registeredClass,m=We(o.$$.ptr,p,this.registeredClass);return m}function Tr(a){return this.rawGetPointee&&(a=this.rawGetPointee(a)),a}function vn(a){this.rawDestructor&&this.rawDestructor(a)}function De(a){a!==null&&a.delete()}function Cr(){vt.prototype.getPointee=Tr,vt.prototype.destructor=vn,vt.prototype.argPackAdvance=8,vt.prototype.readValueFromPointer=_e,vt.prototype.deleteObject=De,vt.prototype.fromWireType=or}function vt(a,o,p,m,A,j,D,S,n,i,c){this.name=a,this.registeredClass=o,this.isReference=p,this.isConst=m,this.isSmartPointer=A,this.pointeeType=j,this.sharingPolicy=D,this.rawGetPointee=S,this.rawConstructor=n,this.rawShare=i,this.rawDestructor=c,!A&&o.baseClass===void 0?m?(this.toWireType=Lr,this.destructorFunction=null):(this.toWireType=pn,this.destructorFunction=null):this.toWireType=dn}function vr(a,o,p){e.hasOwnProperty(a)||lt("Replacing nonexistant public symbol"),e[a].overloadTable!==void 0&&p!==void 0?e[a].overloadTable[p]=o:(e[a]=o,e[a].argCount=p)}function hr(a,o,p){var m=e["dynCall_"+a];return p&&p.length?m.apply(null,[o].concat(p)):m.call(null,o)}var gr=[];function ht(a){var o=gr[a];return o||(a>=gr.length&&(gr.length=a+1),gr[a]=o=Yt.get(a)),o}function it(a,o,p){if(a.includes("j"))return hr(a,o,p);var m=ht(o).apply(null,p);return m}function Vr(a,o){var p=[];return function(){return p.length=0,Object.assign(p,arguments),it(a,o,p)}}function He(a,o){a=K(a);function p(){return a.includes("j")?Vr(a,o):ht(o)}var m=p();return typeof m!="function"&&ue("unknown function pointer with signature "+a+": "+o),m}var ot=void 0;function Br(a){var o=O(a),p=K(o);return F(o),p}function Ve(a,o){var p=[],m={};function A(j){if(!m[j]&&!ct[j]){if(Rt[j]){Rt[j].forEach(A);return}p.push(j),m[j]=!0}}throw o.forEach(A),new ot(a+": "+p.map(Br).join([", "]))}function at(a,o,p,m,A,j,D,S,n,i,c,h,w){c=K(c),j=He(A,j),S&&(S=He(D,S)),i&&(i=He(n,i)),w=He(h,w);var r=tt(c);qt(r,function(){Ve("Cannot construct "+c+" due to unbound types",[m])}),Me([a,o,p],m?[m]:[],function(t){t=t[0];var s,l;m?(s=t.registeredClass,l=s.instancePrototype):l=Ct.prototype;var g=xt(r,function(){if(Object.getPrototypeOf(this)!==b)throw new Se("Use 'new' to construct "+c);if(C.constructor_body===void 0)throw new Se(c+" has no accessible constructor");var N=C.constructor_body[arguments.length];if(N===void 0)throw new Se("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(C.constructor_body).toString()+") parameters instead!");return N.apply(this,arguments)}),b=Object.create(l,{constructor:{value:g}});g.prototype=b;var C=new ln(c,g,b,w,s,j,S,i),T=new vt(c,C,!0,!1,!1),E=new vt(c+"*",C,!1,!1,!1),x=new vt(c+" const*",C,!1,!0,!1);return nt[a]={pointerType:E,constPointerType:x},vr(r,g),[T,E,x]})}function ar(a,o){for(var p=[],m=0;m<a;m++)p.push(fe[o+m*4>>2]);return p}function Nr(a,o){if(!(a instanceof Function))throw new TypeError("new_ called with constructor type "+typeof a+" which is not a function");var p=xt(a.name||"unknownFunctionName",function(){});p.prototype=a.prototype;var m=new p,A=a.apply(m,o);return A instanceof Object?A:m}function yr(a,o,p,m,A){var j=o.length;j<2&&ue("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var D=o[1]!==null&&p!==null,S=!1,n=1;n<o.length;++n)if(o[n]!==null&&o[n].destructorFunction===void 0){S=!0;break}for(var i=o[0].name!=="void",c="",h="",n=0;n<j-2;++n)c+=(n!==0?", ":"")+"arg"+n,h+=(n!==0?", ":"")+"arg"+n+"Wired";var w="return function "+tt(a)+"("+c+`) {
if (arguments.length !== `+(j-2)+`) {
throwBindingError('function `+a+" called with ' + arguments.length + ' arguments, expected "+(j-2)+` args!');
}
`;S&&(w+=`var destructors = [];
`);var r=S?"destructors":"null",t=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],s=[ue,m,A,Xe,o[0],o[1]];D&&(w+="var thisWired = classParam.toWireType("+r+`, this);
`);for(var n=0;n<j-2;++n)w+="var arg"+n+"Wired = argType"+n+".toWireType("+r+", arg"+n+"); // "+o[n+2].name+`
`,t.push("argType"+n),s.push(o[n+2]);if(D&&(h="thisWired"+(h.length>0?", ":"")+h),w+=(i?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+`);
`,S)w+=`runDestructors(destructors);
`;else for(var n=D?1:2;n<o.length;++n){var l=n===1?"thisWired":"arg"+(n-2)+"Wired";o[n].destructorFunction!==null&&(w+=l+"_dtor("+l+"); // "+o[n].name+`
`,t.push(l+"_dtor"),s.push(o[n].destructorFunction))}i&&(w+=`var ret = retType.fromWireType(rv);
return ret;
`),w+=`}
`,t.push(w);var g=Nr(Function,t).apply(null,s);return g}function Be(a,o,p,m,A,j){Jt(o>0);var D=ar(o,p);A=He(m,A),Me([],[a],function(S){S=S[0];var n="constructor "+S.name;if(S.registeredClass.constructor_body===void 0&&(S.registeredClass.constructor_body=[]),S.registeredClass.constructor_body[o-1]!==void 0)throw new Se("Cannot register multiple constructors with identical number of parameters ("+(o-1)+") for class '"+S.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return S.registeredClass.constructor_body[o-1]=()=>{Ve("Cannot construct "+S.name+" due to unbound types",D)},Me([],D,function(i){return i.splice(1,0,null),S.registeredClass.constructor_body[o-1]=yr(n,i,null,A,j),[]}),[]})}function Ne(a,o,p,m,A,j,D,S){var n=ar(p,m);o=K(o),j=He(A,j),Me([],[a],function(i){i=i[0];var c=i.name+"."+o;o.startsWith("@@")&&(o=Symbol[o.substring(2)]),S&&i.registeredClass.pureVirtualFunctions.push(o);function h(){Ve("Cannot call "+c+" due to unbound types",n)}var w=i.registeredClass.instancePrototype,r=w[o];return r===void 0||r.overloadTable===void 0&&r.className!==i.name&&r.argCount===p-2?(h.argCount=p-2,h.className=i.name,w[o]=h):(Mr(w,o,c),w[o].overloadTable[p-2]=h),Me([],n,function(t){var s=yr(c,t,i,j,D);return w[o].overloadTable===void 0?(s.argCount=p-2,w[o]=s):w[o].overloadTable[p-2]=s,[]}),[]})}var sr=[],je=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function zr(a){a>4&&--je[a].refcount===0&&(je[a]=void 0,sr.push(a))}function Ar(){for(var a=0,o=5;o<je.length;++o)je[o]!==void 0&&++a;return a}function gt(){for(var a=5;a<je.length;++a)if(je[a]!==void 0)return je[a];return null}function ze(){e.count_emval_handles=Ar,e.get_first_emval=gt}var st={toValue:a=>(a||ue("Cannot use deleted val. handle = "+a),je[a].value),toHandle:a=>{switch(a){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var o=sr.length?sr.pop():je.length;return je[o]={refcount:1,value:a},o}}}};function hn(a,o){o=K(o),Le(a,{name:o,fromWireType:function(p){var m=st.toValue(p);return zr(p),m},toWireType:function(p,m){return st.toHandle(m)},argPackAdvance:8,readValueFromPointer:_e,destructorFunction:null})}function ur(a){if(a===null)return"null";var o=typeof a;return o==="object"||o==="array"||o==="function"?a.toString():""+a}function ut(a,o){switch(o){case 2:return function(p){return this.fromWireType(It[p>>2])};case 3:return function(p){return this.fromWireType(Ie[p>>3])};default:throw new TypeError("Unknown float type: "+a)}}function At(a,o,p){var m=Wt(p);o=K(o),Le(a,{name:o,fromWireType:function(A){return A},toWireType:function(A,j){return j},argPackAdvance:8,readValueFromPointer:ut(o,m),destructorFunction:null})}function gn(a,o,p){switch(o){case 0:return p?function(A){return ce[A]}:function(A){return ge[A]};case 1:return p?function(A){return ye[A>>1]}:function(A){return ne[A>>1]};case 2:return p?function(A){return te[A>>2]}:function(A){return fe[A>>2]};default:throw new TypeError("Unknown integer type: "+a)}}function $r(a,o,p,m,A){o=K(o);var j=Wt(p),D=h=>h;if(m===0){var S=32-8*p;D=h=>h<<S>>>S}var n=o.includes("unsigned"),i=(h,w)=>{},c;n?c=function(h,w){return i(w,this.name),w>>>0}:c=function(h,w){return i(w,this.name),w},Le(a,{name:o,fromWireType:D,toWireType:c,argPackAdvance:8,readValueFromPointer:gn(o,j,m!==0),destructorFunction:null})}function yn(a,o,p){var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],A=m[o];function j(D){D=D>>2;var S=fe,n=S[D],i=S[D+1];return new A(he,i,n)}p=K(p),Le(a,{name:p,fromWireType:j,argPackAdvance:8,readValueFromPointer:j},{ignoreDuplicateRegistrations:!0})}function fr(a,o){o=K(o);var p=o==="std::string";Le(a,{name:o,fromWireType:function(m){var A=fe[m>>2],j=m+4,D;if(p)for(var S=j,n=0;n<=A;++n){var i=j+n;if(n==A||ge[i]==0){var c=i-S,h=Dt(S,c);D===void 0?D=h:(D+="\0",D+=h),S=i+1}}else{for(var w=new Array(A),n=0;n<A;++n)w[n]=String.fromCharCode(ge[j+n]);D=w.join("")}return F(m),D},toWireType:function(m,A){A instanceof ArrayBuffer&&(A=new Uint8Array(A));var j,D=typeof A=="string";D||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int8Array||ue("Cannot pass non-string to std::string"),p&&D?j=Qe(A):j=A.length;var S=$(4+j+1),n=S+4;if(fe[S>>2]=j,p&&D)Xt(A,n,j+1);else if(D)for(var i=0;i<j;++i){var c=A.charCodeAt(i);c>255&&(F(n),ue("String has UTF-16 code units that do not fit in 8 bits")),ge[n+i]=c}else for(var i=0;i<j;++i)ge[n+i]=A[i];return m!==null&&m.push(F,S),S},argPackAdvance:8,readValueFromPointer:_e,destructorFunction:function(m){F(m)}})}var qr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Rr(a,o){for(var p=a,m=p>>1,A=m+o/2;!(m>=A)&&ne[m];)++m;if(p=m<<1,p-a>32&&qr)return qr.decode(ge.subarray(a,p));for(var j="",D=0;!(D>=o/2);++D){var S=ye[a+D*2>>1];if(S==0)break;j+=String.fromCharCode(S)}return j}function _n(a,o,p){if(p===void 0&&(p=2147483647),p<2)return 0;p-=2;for(var m=o,A=p<a.length*2?p/2:a.length,j=0;j<A;++j){var D=a.charCodeAt(j);ye[o>>1]=D,o+=2}return ye[o>>1]=0,o-m}function mn(a){return a.length*2}function Gr(a,o){for(var p=0,m="";!(p>=o/4);){var A=te[a+p*4>>2];if(A==0)break;if(++p,A>=65536){var j=A-65536;m+=String.fromCharCode(55296|j>>10,56320|j&1023)}else m+=String.fromCharCode(A)}return m}function wn(a,o,p){if(p===void 0&&(p=2147483647),p<4)return 0;for(var m=o,A=m+p-4,j=0;j<a.length;++j){var D=a.charCodeAt(j);if(D>=55296&&D<=57343){var S=a.charCodeAt(++j);D=65536+((D&1023)<<10)|S&1023}if(te[o>>2]=D,o+=4,o+4>A)break}return te[o>>2]=0,o-m}function bn(a){for(var o=0,p=0;p<a.length;++p){var m=a.charCodeAt(p);m>=55296&&m<=57343&&++p,o+=4}return o}function Pn(a,o,p){p=K(p);var m,A,j,D,S;o===2?(m=Rr,A=_n,D=mn,j=()=>ne,S=1):o===4&&(m=Gr,A=wn,D=bn,j=()=>fe,S=2),Le(a,{name:p,fromWireType:function(n){for(var i=fe[n>>2],c=j(),h,w=n+4,r=0;r<=i;++r){var t=n+4+r*o;if(r==i||c[t>>S]==0){var s=t-w,l=m(w,s);h===void 0?h=l:(h+="\0",h+=l),w=t+o}}return F(n),h},toWireType:function(n,i){typeof i!="string"&&ue("Cannot pass non-string to C++ string type "+p);var c=D(i),h=$(4+c+o);return fe[h>>2]=c>>S,A(i,h+4,c+o),n!==null&&n.push(F,h),h},argPackAdvance:8,readValueFromPointer:_e,destructorFunction:function(n){F(n)}})}function Tn(a,o,p,m,A,j){Ue[a]={name:K(o),rawConstructor:He(p,m),rawDestructor:He(A,j),fields:[]}}function Jr(a,o,p,m,A,j,D,S,n,i){Ue[a].fields.push({fieldName:K(o),getterReturnType:p,getter:He(m,A),getterContext:j,setterArgumentType:D,setter:He(S,n),setterContext:i})}function Cn(a,o){o=K(o),Le(a,{isVoid:!0,name:o,argPackAdvance:0,fromWireType:function(){},toWireType:function(p,m){}})}var An={};function Xr(a){var o=An[a];return o===void 0?K(a):o}function Yr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function $n(a){return a===0?st.toHandle(Yr()):(a=Xr(a),st.toHandle(Yr()[a]))}function Kr(a){a>4&&(je[a].refcount+=1)}function Qr(a,o){var p=ct[a];return p===void 0&&ue(o+" has unknown type "+Br(a)),p}function Zr(a){for(var o="",p=0;p<a;++p)o+=(p!==0?", ":"")+"arg"+p;for(var m=()=>fe,A="return function emval_allocator_"+a+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,p=0;p<a;++p)A+="var argType"+p+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+p+`');
var arg`+p+" = argType"+p+`.readValueFromPointer(args);
args += argType`+p+`['argPackAdvance'];
argTypes += 4;
`;return A+="var obj = new constructor("+o+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",A)(Qr,e,st.toHandle,m)}var Er={};function Rn(a,o,p,m){a=st.toValue(a);var A=Er[o];return A||(A=Zr(o),Er[o]=A),A(a,p,m)}function En(a,o){a=Qr(a,"_emval_take_value");var p=a.readValueFromPointer(o);return st.toHandle(p)}function en(){Je("")}function tn(){return 2147483648}function rn(){return tn()}function Sn(a,o,p){ge.copyWithin(a,o,o+p)}function kn(a){try{return $e.grow(a-he.byteLength+65535>>>16),pe($e.buffer),1}catch{}}function Fn(a){var o=ge.length;a=a>>>0;var p=tn();if(a>p)return!1;let m=(n,i)=>n+(i-n%i)%i;for(var A=1;A<=4;A*=2){var j=o*(1+.2/A);j=Math.min(j,a+100663296);var D=Math.min(p,m(Math.max(a,j),65536)),S=kn(D);if(S)return!0}return!1}var Sr={};function On(){return z||"./this.program"}function Mt(){if(!Mt.strings){var a=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:a,_:On()};for(var p in Sr)Sr[p]===void 0?delete o[p]:o[p]=Sr[p];var m=[];for(var p in o)m.push(p+"="+o[p]);Mt.strings=m}return Mt.strings}function nn(a,o,p){for(var m=0;m<a.length;++m)ce[o++>>0]=a.charCodeAt(m);ce[o>>0]=0}function ft(a,o){var p=0;return Mt().forEach(function(m,A){var j=o+p;fe[a+A*4>>2]=j,nn(m,j),p+=m.length+1}),0}function on(a,o){var p=Mt();fe[a>>2]=p.length;var m=0;return p.forEach(function(A){m+=A.length+1}),fe[o>>2]=m,0}function Gt(a){return 52}function kr(a,o,p,m,A){return 70}var an=[null,[],[]];function _r(a,o){var p=an[a];o===0||o===10?((a===1?we:ve)($t(p,0)),p.length=0):p.push(o)}function sn(a,o,p,m){for(var A=0,j=0;j<p;j++){var D=fe[o>>2],S=fe[o+4>>2];o+=8;for(var n=0;n<S;n++)_r(a,ge[D+n]);A+=S}return fe[m>>2]=A,0}function u(a){var o=e["_"+a];return o}function f(a,o){ce.set(a,o)}function v(a,o,p,m,A){var j={string:t=>{var s=0;if(t!=null&&t!==0){var l=(t.length<<2)+1;s=L(l),Xt(t,s,l)}return s},array:t=>{var s=L(t.length);return f(t,s),s}};function D(t){return o==="string"?Dt(t):o==="boolean"?!!t:t}var S=u(a),n=[],i=0;if(m)for(var c=0;c<m.length;c++){var h=j[p[c]];h?(i===0&&(i=R()),n[c]=h(m[c])):n[c]=m[c]}var w=S.apply(null,n);function r(t){return i!==0&&U(i),D(t)}return w=r(w),w}wt=e.InternalError=mt(Error,"InternalError"),be(),Se=e.BindingError=mt(Error,"BindingError"),zt(),ir(),Cr(),ot=e.UnboundTypeError=mt(Error,"UnboundTypeError"),ze();var P={D:Wr,e:rt,t:rr,B:Pe,r:at,q:Be,b:Ne,A:hn,l:At,d:$r,a:yn,k:fr,f:Pn,g:Tn,c:Jr,C:Cn,h:zr,o:$n,m:Kr,n:Rn,p:En,i:en,v:rn,z:Sn,u:Fn,w:ft,x:on,y:Gt,s:kr,j:sn};Vt(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.F).apply(null,arguments)};var $=e._malloc=function(){return($=e._malloc=e.asm.H).apply(null,arguments)},F=e._free=function(){return(F=e._free=e.asm.I).apply(null,arguments)},O=e.___getTypeName=function(){return(O=e.___getTypeName=e.asm.J).apply(null,arguments)};e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.K).apply(null,arguments)};var R=e.stackSave=function(){return(R=e.stackSave=e.asm.L).apply(null,arguments)},U=e.stackRestore=function(){return(U=e.stackRestore=e.asm.M).apply(null,arguments)},L=e.stackAlloc=function(){return(L=e.stackAlloc=e.asm.N).apply(null,arguments)},J=e.___cxa_is_pointer_type=function(){return(J=e.___cxa_is_pointer_type=e.asm.O).apply(null,arguments)};e.dynCall_iji=function(){return(e.dynCall_iji=e.asm.P).apply(null,arguments)},e.dynCall_jji=function(){return(e.dynCall_jji=e.asm.Q).apply(null,arguments)},e.dynCall_iiji=function(){return(e.dynCall_iiji=e.asm.R).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.S).apply(null,arguments)},e.ccall=v;var Q;Qt=function a(){Q||Y(),Q||(Qt=a)};function Y(a){if(et>0||(Or(),et>0))return;function o(){Q||(Q=!0,e.calledRun=!0,!qe&&(Dr(),B(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Ir()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),o()},1)):o()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Y(),k.ready}})();d.exports=_})(di);var ro=di.exports,no=qn(ro);const io=new URL("/corenerstone-test-react-vite/assets/openjpegwasm_decode-C4nnCcr6.wasm",import.meta.url),jn={codec:void 0,decoder:void 0,decodeConfig:{}};function oo(d){if(jn.decodeConfig=d,jn.codec)return Promise.resolve();const y=no({locateFile:_=>_.endsWith(".wasm")?io.toString():_});return new Promise((_,I)=>{y.then(k=>{jn.codec=k,jn.decoder=new k.J2KDecoder,_()},I)})}async function ni(d,y){await oo();const _=jn.decoder,I=_.getEncodedBuffer(d.length);I.set(d),_.decode();const k=_.getFrameInfo(),e=_.getDecodedBuffer();new Uint8Array(e.length).set(e);const W=`x: ${_.getImageOffset().x}, y: ${_.getImageOffset().y}`,H=_.getNumDecompositions(),z=_.getNumLayers(),V=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][_.getProgressionOrder()+1],q=_.getIsReversible(),M=`${_.getBlockDimensions().width} x ${_.getBlockDimensions().height}`,ee=`${_.getTileSize().width} x ${_.getTileSize().height}`,G=`${_.getTileOffset().x}, ${_.getTileOffset().y}`,re=_.getColorSpace(),se=`${e.length.toLocaleString()} bytes`,me=`${(e.length/I.length).toFixed(2)}:1`,le={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:k.isSigned,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},Ce=ao(k,e),we={imageOffset:W,numDecompositions:H,numLayers:z,progessionOrder:V,reversible:q,blockDimensions:M,tileSize:ee,tileOffset:G,colorTransform:re,decodedSize:se,compressionRatio:me};return{...y,pixelData:Ce,imageInfo:le,encodeOptions:we,...we,...le}}function ao(d,y){return d.bitsPerSample>8?d.isSigned?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}var pi={exports:{}};(function(d,y){var _=(()=>{var I=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(I=I||__filename),function(e){e=e||{};var e=typeof e<"u"?e:{},B,W;e.ready=new Promise(function(n,i){B=n,W=i});var H=Object.assign({},e),z=typeof window=="object",V=typeof importScripts=="function",q=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M="";function ee(n){return e.locateFile?e.locateFile(n,M):M+n}var G,re,se;if(q){var me=fn,le=fn;V?M=le.dirname(M)+"/":M=__dirname+"/",G=(n,i)=>(n=Re(n)?new URL(n):le.normalize(n),me.readFileSync(n,i?void 0:"utf8")),se=n=>{var i=G(n,!0);return i.buffer||(i=new Uint8Array(i)),i},re=(n,i,c)=>{n=Re(n)?new URL(n):le.normalize(n),me.readFile(n,function(h,w){h?c(h):i(w.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof Vt))throw n}),process.on("unhandledRejection",function(n){throw n}),e.inspect=function(){return"[Emscripten Module object]"}}else(z||V)&&(V?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),I&&(M=I),M.indexOf("blob:")!==0?M=M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):M="",G=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.send(null),i.responseText},V&&(se=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),re=(n,i,c)=>{var h=new XMLHttpRequest;h.open("GET",n,!0),h.responseType="arraybuffer",h.onload=()=>{if(h.status==200||h.status==0&&h.response){i(h.response);return}c()},h.onerror=c,h.send(null)});var Ce=e.print||console.log.bind(console),we=e.printErr||console.warn.bind(console);Object.assign(e,H),H=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit;var ve;e.wasmBinary&&(ve=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&er("no native wasm support detected");var de,$e=!1;function qe(n,i){n||er(i)}var Jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ge(n,i,c){for(var h=i+c,w=i;n[w]&&!(w>=h);)++w;if(w-i>16&&n.buffer&&Jt)return Jt.decode(n.subarray(i,w));for(var r="";i<w;){var t=n[i++];if(!(t&128)){r+=String.fromCharCode(t);continue}var s=n[i++]&63;if((t&224)==192){r+=String.fromCharCode((t&31)<<6|s);continue}var l=n[i++]&63;if((t&240)==224?t=(t&15)<<12|s<<6|l:t=(t&7)<<18|s<<12|l<<6|n[i++]&63,t<65536)r+=String.fromCharCode(t);else{var g=t-65536;r+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return r}function $t(n,i){return n?Ge(ce,n,i):""}function Dt(n,i,c,h){if(!(h>0))return 0;for(var w=c,r=c+h-1,t=0;t<n.length;++t){var s=n.charCodeAt(t);if(s>=55296&&s<=57343){var l=n.charCodeAt(++t);s=65536+((s&1023)<<10)|l&1023}if(s<=127){if(c>=r)break;i[c++]=s}else if(s<=2047){if(c+1>=r)break;i[c++]=192|s>>6,i[c++]=128|s&63}else if(s<=65535){if(c+2>=r)break;i[c++]=224|s>>12,i[c++]=128|s>>6&63,i[c++]=128|s&63}else{if(c+3>=r)break;i[c++]=240|s>>18,i[c++]=128|s>>12&63,i[c++]=128|s>>6&63,i[c++]=128|s&63}}return i[c]=0,c-w}function mr(n,i,c){return Dt(n,ce,i,c)}function Xt(n){for(var i=0,c=0;c<n.length;++c){var h=n.charCodeAt(c);h<=127?i++:h<=2047?i+=2:h>=55296&&h<=57343?(i+=4,++c):i+=3}return i}var Qe,he,ce,ge,ye,ne,te,fe,It;function Ie(n){Qe=n,e.HEAP8=he=new Int8Array(n),e.HEAP16=ge=new Int16Array(n),e.HEAP32=ne=new Int32Array(n),e.HEAPU8=ce=new Uint8Array(n),e.HEAPU16=ye=new Uint16Array(n),e.HEAPU32=te=new Uint32Array(n),e.HEAPF32=fe=new Float32Array(n),e.HEAPF64=It=new Float64Array(n)}e.INITIAL_MEMORY;var pe,Yt=[],Kt=[],cr=[];function wr(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ir(e.preRun.shift());Fe(Yt)}function Or(){Fe(Kt)}function Dr(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ut(e.postRun.shift());Fe(cr)}function Ir(n){Yt.unshift(n)}function Ur(n){Kt.unshift(n)}function Ut(n){cr.unshift(n)}var Ze=0,et=null;function Qt(n){Ze++,e.monitorRunDependencies&&e.monitorRunDependencies(Ze)}function Zt(n){if(Ze--,e.monitorRunDependencies&&e.monitorRunDependencies(Ze),Ze==0&&et){var i=et;et=null,i()}}function er(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",we(n),$e=!0,n+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(n);throw W(i),i}var Je="data:application/octet-stream;base64,";function yt(n){return n.startsWith(Je)}function Re(n){return n.startsWith("file://")}var Ee;Ee="openjphjs.wasm",yt(Ee)||(Ee=ee(Ee));function Ae(n){try{if(n==Ee&&ve)return new Uint8Array(ve);if(se)return se(n);throw"both async and sync fetching of the wasm failed"}catch(i){er(i)}}function jr(){if(!ve&&(z||V)){if(typeof fetch=="function"&&!Re(Ee))return fetch(Ee,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Ee+"'";return n.arrayBuffer()}).catch(function(){return Ae(Ee)});if(re)return new Promise(function(n,i){re(Ee,function(c){n(new Uint8Array(c))},i)})}return Promise.resolve().then(function(){return Ae(Ee)})}function xr(){var n={a:sn};function i(t,s){var l=t.exports;e.asm=l,de=e.asm.P,Ie(de.buffer),pe=e.asm.T,Ur(e.asm.Q),Zt()}Qt();function c(t){i(t.instance)}function h(t){return jr().then(function(s){return WebAssembly.instantiate(s,n)}).then(function(s){return s}).then(t,function(s){we("failed to asynchronously prepare wasm: "+s),er(s)})}function w(){return!ve&&typeof WebAssembly.instantiateStreaming=="function"&&!yt(Ee)&&!Re(Ee)&&!q&&typeof fetch=="function"?fetch(Ee,{credentials:"same-origin"}).then(function(t){var s=WebAssembly.instantiateStreaming(t,n);return s.then(c,function(l){return we("wasm streaming compile failed: "+l),we("falling back to ArrayBuffer instantiation"),h(c)})}):h(c)}if(e.instantiateWasm)try{var r=e.instantiateWasm(n,i);return r}catch(t){we("Module.instantiateWasm callback failed with error: "+t),W(t)}return w().catch(W),{}}function Vt(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function Fe(n){for(;n.length>0;)n.shift()(e)}var tr=[];function lr(n){n.add_ref()}function Wr(n){var i=new Rt(n);return i.get_caught()||i.set_caught(!0),i.set_rethrown(!1),tr.push(i),lr(i),i.get_exception_ptr()}var Ue=0,Xe=[];function _e(n){var i=Xe[n];return i||(n>=Xe.length&&(Xe.length=n+1),Xe[n]=i=pe.get(n)),i}function _t(n){if(n.release_ref()&&!n.get_rethrown()){var i=n.get_destructor();i&&_e(i)(n.excPtr),f(n.excPtr)}}function ct(){_setThrew(0);var n=tr.pop();_t(n),Ue=0}function Rt(n){this.excPtr=n,this.ptr=n-24,this.set_type=function(i){te[this.ptr+4>>2]=i},this.get_type=function(){return te[this.ptr+4>>2]},this.set_destructor=function(i){te[this.ptr+8>>2]=i},this.get_destructor=function(){return te[this.ptr+8>>2]},this.set_refcount=function(i){ne[this.ptr>>2]=i},this.set_caught=function(i){i=i?1:0,he[this.ptr+12>>0]=i},this.get_caught=function(){return he[this.ptr+12>>0]!=0},this.set_rethrown=function(i){i=i?1:0,he[this.ptr+13>>0]=i},this.get_rethrown=function(){return he[this.ptr+13>>0]!=0},this.init=function(i,c){this.set_adjusted_ptr(0),this.set_type(i),this.set_destructor(c),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var i=ne[this.ptr>>2];ne[this.ptr>>2]=i+1},this.release_ref=function(){var i=ne[this.ptr>>2];return ne[this.ptr>>2]=i-1,i===1},this.set_adjusted_ptr=function(i){te[this.ptr+16>>2]=i},this.get_adjusted_ptr=function(){return te[this.ptr+16>>2]},this.get_exception_ptr=function(){var i=L(this.get_type());if(i)return te[this.excPtr>>2];var c=this.get_adjusted_ptr();return c!==0?c:this.excPtr}}function jt(n){throw Ue||(Ue=n),n}function Et(){var n=Ue;if(!n)return $(0),0;var i=new Rt(n);i.set_adjusted_ptr(n);var c=i.get_type();if(!c)return $(0),n;for(var h=0;h<arguments.length;h++){var w=arguments[h];if(w===0||w===c)break;var r=i.ptr+16;if(U(w,c,r))return $(w),n}return $(c),n}function tt(){var n=Ue;if(!n)return $(0),0;var i=new Rt(n);i.set_adjusted_ptr(n);var c=i.get_type();if(!c)return $(0),n;for(var h=0;h<arguments.length;h++){var w=arguments[h];if(w===0||w===c)break;var r=i.ptr+16;if(U(w,c,r))return $(w),n}return $(c),n}function xt(n,i,c){var h=new Rt(n);throw h.init(i,c),Ue=n,n}var mt={};function wt(n){for(;n.length;){var i=n.pop(),c=n.pop();c(i)}}function lt(n){return this.fromWireType(ne[n>>2])}var Me={},rt={},rr={},Wt=48,be=57;function bt(n){if(n===void 0)return"_unknown";n=n.replace(/[^a-zA-Z0-9_]/g,"$");var i=n.charCodeAt(0);return i>=Wt&&i<=be?"_"+n:n}function K(n,i){return n=bt(n),new Function("body","return function "+n+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(i)}function Se(n,i){var c=K(i,function(h){this.name=i,this.message=h;var w=new Error(h).stack;w!==void 0&&(this.stack=this.toString()+`
`+w.replace(/^Error(:[^\n]*)?\n/,""))});return c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},c}var ue=void 0;function Le(n){throw new ue(n)}function Pe(n,i,c){n.forEach(function(s){rr[s]=i});function h(s){var l=c(s);l.length!==n.length&&Le("Mismatched type converter count");for(var g=0;g<n.length;++g)nt(n[g],l[g])}var w=new Array(i.length),r=[],t=0;i.forEach((s,l)=>{rt.hasOwnProperty(s)?w[l]=rt[s]:(r.push(s),Me.hasOwnProperty(s)||(Me[s]=[]),Me[s].push(()=>{w[l]=rt[s],++t,t===r.length&&h(w)}))}),r.length===0&&h(w)}function St(n){var i=mt[n];delete mt[n];var c=i.rawConstructor,h=i.rawDestructor,w=i.fields,r=w.map(t=>t.getterReturnType).concat(w.map(t=>t.setterArgumentType));Pe([n],r,t=>{var s={};return w.forEach((l,g)=>{var b=l.fieldName,C=t[g],T=l.getter,E=l.getterContext,x=t[g+w.length],N=l.setter,X=l.setterContext;s[b]={read:Z=>C.fromWireType(T(E,Z)),write:(Z,Te)=>{var oe=[];N(X,Z,x.toWireType(oe,Te)),wt(oe)}}}),[{name:i.name,fromWireType:function(l){var g={};for(var b in s)g[b]=s[b].read(l);return h(l),g},toWireType:function(l,g){for(var b in s)if(!(b in g))throw new TypeError('Missing field:  "'+b+'"');var C=c();for(b in s)s[b].write(C,g[b]);return l!==null&&l.push(h,C),C},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:h}]})}function ae(n,i,c,h,w){}function xe(n){switch(n){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+n)}}function br(){for(var n=new Array(256),i=0;i<256;++i)n[i]=String.fromCharCode(i);dr=n}var dr=void 0;function Oe(n){for(var i="",c=n;ce[c];)i+=dr[ce[c++]];return i}var dt=void 0;function ie(n){throw new dt(n)}function nt(n,i,c={}){if(!("argPackAdvance"in i))throw new TypeError("registerType registeredInstance requires argPackAdvance");var h=i.name;if(n||ie('type "'+h+'" must have a positive integer typeid pointer'),rt.hasOwnProperty(n)){if(c.ignoreDuplicateRegistrations)return;ie("Cannot register type '"+h+"' twice")}if(rt[n]=i,delete rr[n],Me.hasOwnProperty(n)){var w=Me[n];delete Me[n],w.forEach(r=>r())}}function nr(n,i,c,h,w){var r=xe(c);i=Oe(i),nt(n,{name:i,fromWireType:function(t){return!!t},toWireType:function(t,s){return s?h:w},argPackAdvance:8,readValueFromPointer:function(t){var s;if(c===1)s=he;else if(c===2)s=ge;else if(c===4)s=ne;else throw new TypeError("Unknown boolean type size: "+i);return this.fromWireType(s[t>>r])},destructorFunction:null})}function pr(n){if(!(this instanceof De)||!(n instanceof De))return!1;for(var i=this.$$.ptrType.registeredClass,c=this.$$.ptr,h=n.$$.ptrType.registeredClass,w=n.$$.ptr;i.baseClass;)c=i.upcast(c),i=i.baseClass;for(;h.baseClass;)w=h.upcast(w),h=h.baseClass;return i===h&&c===w}function pt(n){return{count:n.count,deleteScheduled:n.deleteScheduled,preservePointerOnDelete:n.preservePointerOnDelete,ptr:n.ptr,ptrType:n.ptrType,smartPtr:n.smartPtr,smartPtrType:n.smartPtrType}}function Bt(n){function i(c){return c.$$.ptrType.registeredClass.name}ie(i(n)+" instance already deleted")}var Ht=!1;function Nt(n){}function ir(n){n.smartPtr?n.smartPtrType.rawDestructor(n.smartPtr):n.ptrType.registeredClass.rawDestructor(n.ptr)}function kt(n){n.count.value-=1;var i=n.count.value===0;i&&ir(n)}function Pt(n,i,c){if(i===c)return n;if(c.baseClass===void 0)return null;var h=Pt(n,i,c.baseClass);return h===null?null:c.downcast(h)}var Hr={};function Ft(){return Object.keys(zt).length}function or(){var n=[];for(var i in zt)zt.hasOwnProperty(i)&&n.push(zt[i]);return n}var Tt=[];function Pr(){for(;Tt.length;){var n=Tt.pop();n.$$.deleteScheduled=!1,n.delete()}}var Ot=void 0;function cn(n){Ot=n,Tt.length&&Ot&&Ot(Pr)}function Ye(){e.getInheritedInstanceCount=Ft,e.getLiveInheritedInstances=or,e.flushPendingDeletes=Pr,e.setDelayFunction=cn}var zt={};function Ct(n,i){for(i===void 0&&ie("ptr should not be undefined");n.baseClass;)i=n.upcast(i),n=n.baseClass;return i}function Mr(n,i){return i=Ct(n,i),zt[i]}function qt(n,i){(!i.ptrType||!i.ptr)&&Le("makeClassHandle requires ptr and ptrType");var c=!!i.smartPtrType,h=!!i.smartPtr;return c!==h&&Le("Both smartPtrType and smartPtr must be specified"),i.count={value:1},We(Object.create(n,{$$:{value:i}}))}function ln(n){var i=this.getPointee(n);if(!i)return this.destructor(n),null;var c=Mr(this.registeredClass,i);if(c!==void 0){if(c.$$.count.value===0)return c.$$.ptr=i,c.$$.smartPtr=n,c.clone();var h=c.clone();return this.destructor(n),h}function w(){return this.isSmartPointer?qt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:i,smartPtrType:this,smartPtr:n}):qt(this.registeredClass.instancePrototype,{ptrType:this,ptr:n})}var r=this.registeredClass.getActualType(i),t=Hr[r];if(!t)return w.call(this);var s;this.isConst?s=t.constPointerType:s=t.pointerType;var l=Pt(i,this.registeredClass,s.registeredClass);return l===null?w.call(this):this.isSmartPointer?qt(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:n}):qt(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function We(n){return typeof FinalizationRegistry>"u"?(We=i=>i,n):(Ht=new FinalizationRegistry(i=>{kt(i.$$)}),We=i=>{var c=i.$$,h=!!c.smartPtr;if(h){var w={$$:c};Ht.register(i,w,i)}return i},Nt=i=>Ht.unregister(i),We(n))}function Lr(){if(this.$$.ptr||Bt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var n=We(Object.create(Object.getPrototypeOf(this),{$$:{value:pt(this.$$)}}));return n.$$.count.value+=1,n.$$.deleteScheduled=!1,n}function dn(){this.$$.ptr||Bt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),Nt(this),kt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function pn(){return!this.$$.ptr}function Tr(){return this.$$.ptr||Bt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),Tt.push(this),Tt.length===1&&Ot&&Ot(Pr),this.$$.deleteScheduled=!0,this}function vn(){De.prototype.isAliasOf=pr,De.prototype.clone=Lr,De.prototype.delete=dn,De.prototype.isDeleted=pn,De.prototype.deleteLater=Tr}function De(){}function Cr(n,i,c){if(n[i].overloadTable===void 0){var h=n[i];n[i]=function(){return n[i].overloadTable.hasOwnProperty(arguments.length)||ie("Function '"+c+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+n[i].overloadTable+")!"),n[i].overloadTable[arguments.length].apply(this,arguments)},n[i].overloadTable=[],n[i].overloadTable[h.argCount]=h}}function vt(n,i,c){e.hasOwnProperty(n)?((c===void 0||e[n].overloadTable!==void 0&&e[n].overloadTable[c]!==void 0)&&ie("Cannot register public name '"+n+"' twice"),Cr(e,n,n),e.hasOwnProperty(c)&&ie("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),e[n].overloadTable[c]=i):(e[n]=i,c!==void 0&&(e[n].numArguments=c))}function vr(n,i,c,h,w,r,t,s){this.name=n,this.constructor=i,this.instancePrototype=c,this.rawDestructor=h,this.baseClass=w,this.getActualType=r,this.upcast=t,this.downcast=s,this.pureVirtualFunctions=[]}function hr(n,i,c){for(;i!==c;)i.upcast||ie("Expected null or instance of "+c.name+", got an instance of "+i.name),n=i.upcast(n),i=i.baseClass;return n}function gr(n,i){if(i===null)return this.isReference&&ie("null is not a valid "+this.name),0;i.$$||ie('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name);var c=i.$$.ptrType.registeredClass,h=hr(i.$$.ptr,c,this.registeredClass);return h}function ht(n,i){var c;if(i===null)return this.isReference&&ie("null is not a valid "+this.name),this.isSmartPointer?(c=this.rawConstructor(),n!==null&&n.push(this.rawDestructor,c),c):0;i.$$||ie('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&i.$$.ptrType.isConst&&ie("Cannot convert argument of type "+(i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name)+" to parameter type "+this.name);var h=i.$$.ptrType.registeredClass;if(c=hr(i.$$.ptr,h,this.registeredClass),this.isSmartPointer)switch(i.$$.smartPtr===void 0&&ie("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:i.$$.smartPtrType===this?c=i.$$.smartPtr:ie("Cannot convert argument of type "+(i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:c=i.$$.smartPtr;break;case 2:if(i.$$.smartPtrType===this)c=i.$$.smartPtr;else{var w=i.clone();c=this.rawShare(c,fr.toHandle(function(){w.delete()})),n!==null&&n.push(this.rawDestructor,c)}break;default:ie("Unsupporting sharing policy")}return c}function it(n,i){if(i===null)return this.isReference&&ie("null is not a valid "+this.name),0;i.$$||ie('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),i.$$.ptrType.isConst&&ie("Cannot convert argument of type "+i.$$.ptrType.name+" to parameter type "+this.name);var c=i.$$.ptrType.registeredClass,h=hr(i.$$.ptr,c,this.registeredClass);return h}function Vr(n){return this.rawGetPointee&&(n=this.rawGetPointee(n)),n}function He(n){this.rawDestructor&&this.rawDestructor(n)}function ot(n){n!==null&&n.delete()}function Br(){Ve.prototype.getPointee=Vr,Ve.prototype.destructor=He,Ve.prototype.argPackAdvance=8,Ve.prototype.readValueFromPointer=lt,Ve.prototype.deleteObject=ot,Ve.prototype.fromWireType=ln}function Ve(n,i,c,h,w,r,t,s,l,g,b){this.name=n,this.registeredClass=i,this.isReference=c,this.isConst=h,this.isSmartPointer=w,this.pointeeType=r,this.sharingPolicy=t,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=g,this.rawDestructor=b,!w&&i.baseClass===void 0?h?(this.toWireType=gr,this.destructorFunction=null):(this.toWireType=it,this.destructorFunction=null):this.toWireType=ht}function at(n,i,c){e.hasOwnProperty(n)||Le("Replacing nonexistant public symbol"),e[n].overloadTable!==void 0&&c!==void 0?e[n].overloadTable[c]=i:(e[n]=i,e[n].argCount=c)}function ar(n,i,c){var h=e["dynCall_"+n];return c&&c.length?h.apply(null,[i].concat(c)):h.call(null,i)}function Nr(n,i,c){if(n.includes("j"))return ar(n,i,c);var h=_e(i).apply(null,c);return h}function yr(n,i){var c=[];return function(){return c.length=0,Object.assign(c,arguments),Nr(n,i,c)}}function Be(n,i){n=Oe(n);function c(){return n.includes("j")?yr(n,i):_e(i)}var h=c();return typeof h!="function"&&ie("unknown function pointer with signature "+n+": "+i),h}var Ne=void 0;function sr(n){var i=P(n),c=Oe(i);return v(i),c}function je(n,i){var c=[],h={};function w(r){if(!h[r]&&!rt[r]){if(rr[r]){rr[r].forEach(w);return}c.push(r),h[r]=!0}}throw i.forEach(w),new Ne(n+": "+c.map(sr).join([", "]))}function zr(n,i,c,h,w,r,t,s,l,g,b,C,T){b=Oe(b),r=Be(w,r),s&&(s=Be(t,s)),g&&(g=Be(l,g)),T=Be(C,T);var E=bt(b);vt(E,function(){je("Cannot construct "+b+" due to unbound types",[h])}),Pe([n,i,c],h?[h]:[],function(x){x=x[0];var N,X;h?(N=x.registeredClass,X=N.instancePrototype):X=De.prototype;var Z=K(E,function(){if(Object.getPrototypeOf(this)!==Te)throw new dt("Use 'new' to construct "+b);if(oe.constructor_body===void 0)throw new dt(b+" has no accessible constructor");var un=oe.constructor_body[arguments.length];if(un===void 0)throw new dt("Tried to invoke ctor of "+b+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(oe.constructor_body).toString()+") parameters instead!");return un.apply(this,arguments)}),Te=Object.create(X,{constructor:{value:Z}});Z.prototype=Te;var oe=new vr(b,Z,Te,T,N,r,s,g),ke=new Ve(b,oe,!0,!1,!1),Ke=new Ve(b+"*",oe,!1,!1,!1),Lt=new Ve(b+" const*",oe,!1,!0,!1);return Hr[n]={pointerType:Ke,constPointerType:Lt},at(E,Z),[ke,Ke,Lt]})}function Ar(n,i){for(var c=[],h=0;h<n;h++)c.push(te[i+h*4>>2]);return c}function gt(n,i){if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var c=K(n.name||"unknownFunctionName",function(){});c.prototype=n.prototype;var h=new c,w=n.apply(h,i);return w instanceof Object?w:h}function ze(n,i,c,h,w){var r=i.length;r<2&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var t=i[1]!==null&&c!==null,s=!1,l=1;l<i.length;++l)if(i[l]!==null&&i[l].destructorFunction===void 0){s=!0;break}for(var g=i[0].name!=="void",b="",C="",l=0;l<r-2;++l)b+=(l!==0?", ":"")+"arg"+l,C+=(l!==0?", ":"")+"arg"+l+"Wired";var T="return function "+bt(n)+"("+b+`) {
if (arguments.length !== `+(r-2)+`) {
throwBindingError('function `+n+" called with ' + arguments.length + ' arguments, expected "+(r-2)+` args!');
}
`;s&&(T+=`var destructors = [];
`);var E=s?"destructors":"null",x=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],N=[ie,h,w,wt,i[0],i[1]];t&&(T+="var thisWired = classParam.toWireType("+E+`, this);
`);for(var l=0;l<r-2;++l)T+="var arg"+l+"Wired = argType"+l+".toWireType("+E+", arg"+l+"); // "+i[l+2].name+`
`,x.push("argType"+l),N.push(i[l+2]);if(t&&(C="thisWired"+(C.length>0?", ":"")+C),T+=(g?"var rv = ":"")+"invoker(fn"+(C.length>0?", ":"")+C+`);
`,s)T+=`runDestructors(destructors);
`;else for(var l=t?1:2;l<i.length;++l){var X=l===1?"thisWired":"arg"+(l-2)+"Wired";i[l].destructorFunction!==null&&(T+=X+"_dtor("+X+"); // "+i[l].name+`
`,x.push(X+"_dtor"),N.push(i[l].destructorFunction))}g&&(T+=`var ret = retType.fromWireType(rv);
return ret;
`),T+=`}
`,x.push(T);var Z=gt(Function,x).apply(null,N);return Z}function st(n,i,c,h,w,r){qe(i>0);var t=Ar(i,c);w=Be(h,w),Pe([],[n],function(s){s=s[0];var l="constructor "+s.name;if(s.registeredClass.constructor_body===void 0&&(s.registeredClass.constructor_body=[]),s.registeredClass.constructor_body[i-1]!==void 0)throw new dt("Cannot register multiple constructors with identical number of parameters ("+(i-1)+") for class '"+s.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return s.registeredClass.constructor_body[i-1]=()=>{je("Cannot construct "+s.name+" due to unbound types",t)},Pe([],t,function(g){return g.splice(1,0,null),s.registeredClass.constructor_body[i-1]=ze(l,g,null,w,r),[]}),[]})}function hn(n,i,c,h,w,r,t,s){var l=Ar(c,h);i=Oe(i),r=Be(w,r),Pe([],[n],function(g){g=g[0];var b=g.name+"."+i;i.startsWith("@@")&&(i=Symbol[i.substring(2)]),s&&g.registeredClass.pureVirtualFunctions.push(i);function C(){je("Cannot call "+b+" due to unbound types",l)}var T=g.registeredClass.instancePrototype,E=T[i];return E===void 0||E.overloadTable===void 0&&E.className!==g.name&&E.argCount===c-2?(C.argCount=c-2,C.className=g.name,T[i]=C):(Cr(T,i,b),T[i].overloadTable[c-2]=C),Pe([],l,function(x){var N=ze(b,x,g,r,t);return T[i].overloadTable===void 0?(N.argCount=c-2,T[i]=N):T[i].overloadTable[c-2]=N,[]}),[]})}var ur=[],ut=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function At(n){n>4&&--ut[n].refcount===0&&(ut[n]=void 0,ur.push(n))}function gn(){for(var n=0,i=5;i<ut.length;++i)ut[i]!==void 0&&++n;return n}function $r(){for(var n=5;n<ut.length;++n)if(ut[n]!==void 0)return ut[n];return null}function yn(){e.count_emval_handles=gn,e.get_first_emval=$r}var fr={toValue:n=>(n||ie("Cannot use deleted val. handle = "+n),ut[n].value),toHandle:n=>{switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var i=ur.length?ur.pop():ut.length;return ut[i]={refcount:1,value:n},i}}}};function qr(n,i){i=Oe(i),nt(n,{name:i,fromWireType:function(c){var h=fr.toValue(c);return At(c),h},toWireType:function(c,h){return fr.toHandle(h)},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:null})}function Rr(n){if(n===null)return"null";var i=typeof n;return i==="object"||i==="array"||i==="function"?n.toString():""+n}function _n(n,i){switch(i){case 2:return function(c){return this.fromWireType(fe[c>>2])};case 3:return function(c){return this.fromWireType(It[c>>3])};default:throw new TypeError("Unknown float type: "+n)}}function mn(n,i,c){var h=xe(c);i=Oe(i),nt(n,{name:i,fromWireType:function(w){return w},toWireType:function(w,r){return r},argPackAdvance:8,readValueFromPointer:_n(i,h),destructorFunction:null})}function Gr(n,i,c,h,w,r){var t=Ar(i,c);n=Oe(n),w=Be(h,w),vt(n,function(){je("Cannot call "+n+" due to unbound types",t)},i-1),Pe([],t,function(s){var l=[s[0],null].concat(s.slice(1));return at(n,ze(n,l,null,w,r),i-1),[]})}function wn(n,i,c){switch(i){case 0:return c?function(w){return he[w]}:function(w){return ce[w]};case 1:return c?function(w){return ge[w>>1]}:function(w){return ye[w>>1]};case 2:return c?function(w){return ne[w>>2]}:function(w){return te[w>>2]};default:throw new TypeError("Unknown integer type: "+n)}}function bn(n,i,c,h,w){i=Oe(i);var r=xe(c),t=C=>C;if(h===0){var s=32-8*c;t=C=>C<<s>>>s}var l=i.includes("unsigned"),g=(C,T)=>{},b;l?b=function(C,T){return g(T,this.name),T>>>0}:b=function(C,T){return g(T,this.name),T},nt(n,{name:i,fromWireType:t,toWireType:b,argPackAdvance:8,readValueFromPointer:wn(i,r,h!==0),destructorFunction:null})}function Pn(n,i,c){var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],w=h[i];function r(t){t=t>>2;var s=te,l=s[t],g=s[t+1];return new w(Qe,g,l)}c=Oe(c),nt(n,{name:c,fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})}function Tn(n,i){i=Oe(i);var c=i==="std::string";nt(n,{name:i,fromWireType:function(h){var w=te[h>>2],r=h+4,t;if(c)for(var s=r,l=0;l<=w;++l){var g=r+l;if(l==w||ce[g]==0){var b=g-s,C=$t(s,b);t===void 0?t=C:(t+="\0",t+=C),s=g+1}}else{for(var T=new Array(w),l=0;l<w;++l)T[l]=String.fromCharCode(ce[r+l]);t=T.join("")}return v(h),t},toWireType:function(h,w){w instanceof ArrayBuffer&&(w=new Uint8Array(w));var r,t=typeof w=="string";t||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int8Array||ie("Cannot pass non-string to std::string"),c&&t?r=Xt(w):r=w.length;var s=u(4+r+1),l=s+4;if(te[s>>2]=r,c&&t)mr(w,l,r+1);else if(t)for(var g=0;g<r;++g){var b=w.charCodeAt(g);b>255&&(v(l),ie("String has UTF-16 code units that do not fit in 8 bits")),ce[l+g]=b}else for(var g=0;g<r;++g)ce[l+g]=w[g];return h!==null&&h.push(v,s),s},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(h){v(h)}})}var Jr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Cn(n,i){for(var c=n,h=c>>1,w=h+i/2;!(h>=w)&&ye[h];)++h;if(c=h<<1,c-n>32&&Jr)return Jr.decode(ce.subarray(n,c));for(var r="",t=0;!(t>=i/2);++t){var s=ge[n+t*2>>1];if(s==0)break;r+=String.fromCharCode(s)}return r}function An(n,i,c){if(c===void 0&&(c=2147483647),c<2)return 0;c-=2;for(var h=i,w=c<n.length*2?c/2:n.length,r=0;r<w;++r){var t=n.charCodeAt(r);ge[i>>1]=t,i+=2}return ge[i>>1]=0,i-h}function Xr(n){return n.length*2}function Yr(n,i){for(var c=0,h="";!(c>=i/4);){var w=ne[n+c*4>>2];if(w==0)break;if(++c,w>=65536){var r=w-65536;h+=String.fromCharCode(55296|r>>10,56320|r&1023)}else h+=String.fromCharCode(w)}return h}function $n(n,i,c){if(c===void 0&&(c=2147483647),c<4)return 0;for(var h=i,w=h+c-4,r=0;r<n.length;++r){var t=n.charCodeAt(r);if(t>=55296&&t<=57343){var s=n.charCodeAt(++r);t=65536+((t&1023)<<10)|s&1023}if(ne[i>>2]=t,i+=4,i+4>w)break}return ne[i>>2]=0,i-h}function Kr(n){for(var i=0,c=0;c<n.length;++c){var h=n.charCodeAt(c);h>=55296&&h<=57343&&++c,i+=4}return i}function Qr(n,i,c){c=Oe(c);var h,w,r,t,s;i===2?(h=Cn,w=An,t=Xr,r=()=>ye,s=1):i===4&&(h=Yr,w=$n,t=Kr,r=()=>te,s=2),nt(n,{name:c,fromWireType:function(l){for(var g=te[l>>2],b=r(),C,T=l+4,E=0;E<=g;++E){var x=l+4+E*i;if(E==g||b[x>>s]==0){var N=x-T,X=h(T,N);C===void 0?C=X:(C+="\0",C+=X),T=x+i}}return v(l),C},toWireType:function(l,g){typeof g!="string"&&ie("Cannot pass non-string to C++ string type "+c);var b=t(g),C=u(4+b+i);return te[C>>2]=b>>s,w(g,C+4,b+i),l!==null&&l.push(v,C),C},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(l){v(l)}})}function Zr(n,i,c,h,w,r){mt[n]={name:Oe(i),rawConstructor:Be(c,h),rawDestructor:Be(w,r),fields:[]}}function Er(n,i,c,h,w,r,t,s,l,g){mt[n].fields.push({fieldName:Oe(i),getterReturnType:c,getter:Be(h,w),getterContext:r,setterArgumentType:t,setter:Be(s,l),setterContext:g})}function Rn(n,i){i=Oe(i),nt(n,{isVoid:!0,name:i,argPackAdvance:0,fromWireType:function(){},toWireType:function(c,h){}})}function En(n){n>4&&(ut[n].refcount+=1)}function en(n,i){var c=rt[n];return c===void 0&&ie(i+" has unknown type "+sr(n)),c}function tn(n,i){n=en(n,"_emval_take_value");var c=n.readValueFromPointer(i);return fr.toHandle(c)}function rn(){er("")}function Sn(n,i,c){ce.copyWithin(n,i,i+c)}function kn(){return 2147483648}function Fn(n){try{return de.grow(n-Qe.byteLength+65535>>>16),Ie(de.buffer),1}catch{}}function Sr(n){var i=ce.length;n=n>>>0;var c=kn();if(n>c)return!1;let h=(l,g)=>l+(g-l%g)%g;for(var w=1;w<=4;w*=2){var r=i*(1+.2/w);r=Math.min(r,n+100663296);var t=Math.min(c,h(Math.max(n,r),65536)),s=Fn(t);if(s)return!0}return!1}function On(n){return 52}function Mt(n,i,c,h,w){return 70}var nn=[null,[],[]];function ft(n,i){var c=nn[n];i===0||i===10?((n===1?Ce:we)(Ge(c,0)),c.length=0):c.push(i)}function on(n,i,c,h){for(var w=0,r=0;r<c;r++){var t=te[i>>2],s=te[i+4>>2];i+=8;for(var l=0;l<s;l++)ft(n,ce[t+l]);w+=s}return te[h>>2]=w,0}function Gt(n){return n}function kr(n){var i=e["_"+n];return i}function an(n,i){he.set(n,i)}function _r(n,i,c,h,w){var r={string:x=>{var N=0;if(x!=null&&x!==0){var X=(x.length<<2)+1;N=R(X),mr(x,N,X)}return N},array:x=>{var N=R(x.length);return an(x,N),N}};function t(x){return i==="string"?$t(x):i==="boolean"?!!x:x}var s=kr(n),l=[],g=0;if(h)for(var b=0;b<h.length;b++){var C=r[c[b]];C?(g===0&&(g=F()),l[b]=C(h[b])):l[b]=h[b]}var T=s.apply(null,l);function E(x){return g!==0&&O(g),t(x)}return T=E(T),T}ue=e.InternalError=Se(Error,"InternalError"),br(),dt=e.BindingError=Se(Error,"BindingError"),vn(),Ye(),Br(),Ne=e.UnboundTypeError=Se(Error,"UnboundTypeError"),yn();var sn={L:Wr,v:ct,c:Et,k:tt,i:xt,f:jt,A:St,D:ae,I:nr,y:zr,x:st,a:hn,H:qr,u:mn,o:Gr,h:bn,d:Pn,t:Tn,q:Qr,p:Zr,B:Er,J:Rn,N:At,O:En,n:tn,r:rn,G:Sn,E:Sr,F:On,C:Mt,s:on,b:Q,z:J,w:A,e:a,l:m,m:o,j:p,K:j,g:Y,M:Gt};xr(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.Q).apply(null,arguments)};var u=e._malloc=function(){return(u=e._malloc=e.asm.R).apply(null,arguments)},f=e.___cxa_free_exception=function(){return(f=e.___cxa_free_exception=e.asm.S).apply(null,arguments)},v=e._free=function(){return(v=e._free=e.asm.U).apply(null,arguments)},P=e.___getTypeName=function(){return(P=e.___getTypeName=e.asm.V).apply(null,arguments)};e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.W).apply(null,arguments)};var $=e.setTempRet0=function(){return($=e.setTempRet0=e.asm.X).apply(null,arguments)},F=e.stackSave=function(){return(F=e.stackSave=e.asm.Y).apply(null,arguments)},O=e.stackRestore=function(){return(O=e.stackRestore=e.asm.Z).apply(null,arguments)},R=e.stackAlloc=function(){return(R=e.stackAlloc=e.asm._).apply(null,arguments)},U=e.___cxa_can_catch=function(){return(U=e.___cxa_can_catch=e.asm.$).apply(null,arguments)},L=e.___cxa_is_pointer_type=function(){return(L=e.___cxa_is_pointer_type=e.asm.aa).apply(null,arguments)};e.dynCall_ji=function(){return(e.dynCall_ji=e.asm.ba).apply(null,arguments)},e.dynCall_iiji=function(){return(e.dynCall_iiji=e.asm.ca).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.da).apply(null,arguments)};function J(n,i,c){var h=F();try{return _e(n)(i,c)}catch(w){if(O(h),w!==w+0)throw w;_setThrew(1,0)}}function Q(n,i){var c=F();try{return _e(n)(i)}catch(h){if(O(c),h!==h+0)throw h;_setThrew(1,0)}}function Y(n,i,c,h,w,r,t,s,l,g,b){var C=F();try{_e(n)(i,c,h,w,r,t,s,l,g,b)}catch(T){if(O(C),T!==T+0)throw T;_setThrew(1,0)}}function a(n,i){var c=F();try{_e(n)(i)}catch(h){if(O(c),h!==h+0)throw h;_setThrew(1,0)}}function o(n,i,c,h){var w=F();try{_e(n)(i,c,h)}catch(r){if(O(w),r!==r+0)throw r;_setThrew(1,0)}}function p(n,i,c,h,w){var r=F();try{_e(n)(i,c,h,w)}catch(t){if(O(r),t!==t+0)throw t;_setThrew(1,0)}}function m(n,i,c){var h=F();try{_e(n)(i,c)}catch(w){if(O(h),w!==w+0)throw w;_setThrew(1,0)}}function A(n,i,c,h){var w=F();try{return _e(n)(i,c,h)}catch(r){if(O(w),r!==r+0)throw r;_setThrew(1,0)}}function j(n,i,c,h,w,r,t){var s=F();try{_e(n)(i,c,h,w,r,t)}catch(l){if(O(s),l!==l+0)throw l;_setThrew(1,0)}}e.ccall=_r;var D;et=function n(){D||S(),D||(et=n)};function S(n){if(Ze>0||(wr(),Ze>0))return;function i(){D||(D=!0,e.calledRun=!0,!$e&&(Or(),B(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Dr()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),i()},1)):i()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return S(),e.ready}})();d.exports=_})(pi);var so=pi.exports,uo=qn(so);const fo=new URL("/corenerstone-test-react-vite/assets/openjphjs-CANpALFP.wasm",import.meta.url),xn={codec:void 0,decoder:void 0,decodeConfig:{}};function co(d,y,_){const I={width:y,height:_};for(;d>0;)I.width=Math.ceil(I.width/2),I.height=Math.ceil(I.height/2),d--;return I}function lo(d){if(xn.decodeConfig=d,xn.codec)return Promise.resolve();const y=uo({locateFile:_=>_.endsWith(".wasm")?fo.toString():_});return new Promise((_,I)=>{y.then(k=>{xn.codec=k,xn.decoder=new k.HTJ2KDecoder,_()},I)})}async function po(d,y){await lo();const _=new xn.codec.HTJ2KDecoder,I=_.getEncodedBuffer(d.length);I.set(d);const k=y.decodeLevel||0;_.decodeSubResolution(k);const e=_.getFrameInfo();if(y.decodeLevel>0){const{width:Jt,height:Ge}=co(y.decodeLevel,e.width,e.height);e.width=Jt,e.height=Ge}const B=_.getDecodedBuffer();new Uint8Array(B.length).set(B);const H=`x: ${_.getImageOffset().x}, y: ${_.getImageOffset().y}`,z=_.getNumDecompositions(),V=_.getNumLayers(),q=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][_.getProgressionOrder()+1],M=_.getIsReversible(),ee=`${_.getBlockDimensions().width} x ${_.getBlockDimensions().height}`,G=`${_.getTileSize().width} x ${_.getTileSize().height}`,re=`${_.getTileOffset().x}, ${_.getTileOffset().y}`,se=`${B.length.toLocaleString()} bytes`,me=`${(B.length/I.length).toFixed(2)}:1`,le={columns:e.width,rows:e.height,bitsPerPixel:e.bitsPerSample,signed:e.isSigned,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:e.componentCount};let Ce=vo(e,B);const{buffer:we,byteOffset:ve,byteLength:de}=Ce,$e=we.slice(ve,ve+de);Ce=new Ce.constructor($e);const qe={imageOffset:H,numDecompositions:z,numLayers:V,progessionOrder:q,reversible:M,blockDimensions:ee,tileSize:G,tileOffset:re,decodedSize:se,compressionRatio:me};return{...y,pixelData:Ce,imageInfo:le,encodeOptions:qe,...qe,...le}}function vo(d,y){return d.bitsPerSample>8?d.isSigned?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}function ho(d,y){const _=d.length,{rescaleSlope:I,rescaleIntercept:k,suvbw:e}=y;if(y.modality==="PT"&&typeof e=="number"&&!isNaN(e))for(let B=0;B<_;B++)d[B]=e*(d[B]*I+k);else for(let B=0;B<_;B++)d[B]=d[B]*I+k;return!0}function go(d){let y=d[0],_=d[0],I;const k=d.length;for(let e=1;e<k;e++)I=d[e],y=Math.min(y,I),_=Math.max(_,I);return{min:y,max:_}}function yo(d,y){let _;return Number.isInteger(d)&&Number.isInteger(y)&&(d>=0?y<=255?_=Uint8Array:y<=65535&&(_=Uint16Array):d>=-128&&y<=127?_=Int8Array:d>=-32768&&y<=32767&&(_=Int16Array)),_||Float32Array}function _o(d){return d==="RGB"||d==="PALETTE COLOR"||d==="YBR_FULL"||d==="YBR_FULL_422"||d==="YBR_PARTIAL_422"||d==="YBR_PARTIAL_420"||d==="YBR_RCT"||d==="YBR_ICT"}const mo={bilinear:yi,replicate:_i};async function wo(d,y,_,I,k,e){const B=new Date().getTime();let W=null,H;switch(y){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":W=ei(d,_);break;case"1.2.840.10008.1.2.2":W=Di(d,_);break;case"1.2.840.10008.1.2.1.99":W=ei(d,_);break;case"1.2.840.10008.1.2.5":W=Ii(d,_);break;case"1.2.840.10008.1.2.4.50":H={...d},W=zi(_,H);break;case"1.2.840.10008.1.2.4.51":W=Ji(d,_);break;case"1.2.840.10008.1.2.4.57":W=ti(d,_);break;case"1.2.840.10008.1.2.4.70":W=ti(d,_);break;case"1.2.840.10008.1.2.4.80":H={signed:d.pixelRepresentation===1,bytesPerPixel:d.bitsAllocated<=8?1:2,...d},W=ri(_,H);break;case"1.2.840.10008.1.2.4.81":H={signed:d.pixelRepresentation===1,bytesPerPixel:d.bitsAllocated<=8?1:2,...d},W=ri(_,H);break;case"1.2.840.10008.1.2.4.90":H={...d},W=ni(_,H);break;case"1.2.840.10008.1.2.4.91":H={...d},W=ni(_,H);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":H={...d},W=po(_,H);break;default:throw new Error(`no decoder for transfer syntax ${y}`)}if(!W)throw new Error("decodePromise not defined");const z=await W,V=bo(z,k,B);return e==null||e(V),V}function bo(d,y,_,I){var Ce,we,ve;const k=d.pixelRepresentation!==void 0&&d.pixelRepresentation===1,e=k&&d.bitsStored!==void 0?32-d.bitsStored:void 0;if(k&&e!==void 0)for(let de=0;de<d.pixelData.length;de++)d.pixelData[de]=d.pixelData[de]<<e>>e;let B=d.pixelData;d.pixelDataLength=d.pixelData.length;const{min:W,max:H}=go(d.pixelData),z={Uint8Array,Uint16Array,Int16Array,Float32Array},V=(Ce=y.targetBuffer)==null?void 0:Ce.type,q=typeof y.allowFloatRendering<"u"?y.allowFloatRendering:!0,M=_o(d.photometricInterpretation)&&((we=y.targetBuffer)==null?void 0:we.offset)===void 0,G=((ve=y.preScale)==null?void 0:ve.enabled)&&Object.values(y.preScale.scalingParameters).some(de=>typeof de=="number"&&!Number.isInteger(de)),re=!y.preScale.enabled||!q&&G;V&&!M?B=Po(y,d,z,B):y.preScale.enabled&&!re?B=To(y,W,H,d):B=vi(W,H,d);let se=W,me=H;if(y.preScale.enabled&&!re){const de=y.preScale.scalingParameters;hi(de);const{rescaleSlope:$e,rescaleIntercept:qe}=de;if(typeof $e=="number"&&typeof qe=="number"){ho(B,de),d.preScale={...y.preScale,scaled:!0};const{rescaleIntercept:Ge,rescaleSlope:$t,suvbw:Dt}=de;se=$t*W+Ge,me=$t*H+Ge,Dt&&(se=se*Dt,me=me*Dt)}}else re&&(d.preScale={enabled:!0,scaled:!1},se=W,me=H);d.pixelData=B,d.smallestPixelValue=se,d.largestPixelValue=me;const le=new Date().getTime();return d.decodeTimeInMS=le-_,d}function Po(d,y,_,I){const{arrayBuffer:k,type:e,offset:B=0,length:W,rows:H}=d.targetBuffer,z=_[e];if(!z)throw new Error(`target array ${e} is not supported, or doesn't exist.`);H&&H!=y.rows&&Ao(y,d.targetBuffer,z);const V=y.pixelDataLength,q=B,M=W??V-q,ee=y.pixelData;if(M!==ee.length)throw new Error(`target array for image does not have the same length (${M}) as the decoded image length (${ee.length}).`);const G=k?new z(k,q,M):new z(M);return G.set(ee,0),I=G,I}function To(d,y,_,I){const k=d.preScale.scalingParameters;hi(k);const{rescaleSlope:e,rescaleIntercept:B}=k,W=typeof e=="number"&&typeof B=="number";let H=y,z=_;return W&&(H=e*y+B,z=e*_+B),vi(H,z,I)}function vi(d,y,_){const I=yo(d,y),k=new I(_.pixelData.length);return k.set(_.pixelData,0),k}function hi(d){if(!d)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}function Co(d,y,_){const{samplesPerPixel:I}=d,{rows:k,columns:e}=y,B=k*e*I,W=new _(B),H=W.byteLength/B;return{pixelData:W,rows:k,columns:e,frameInfo:{...d.frameInfo,rows:k,columns:e},imageInfo:{...d.imageInfo,rows:k,columns:e,bytesPerPixel:H}}}function Ao(d,y,_){const I=Co(d,y,_),{scalingType:k="replicate"}=y;return mo[k](d,I),Object.assign(d,I),d.pixelDataLength=d.pixelData.length,d}const $o={decodeTask({imageFrame:d,transferSyntax:y,decodeConfig:_,options:I,pixelData:k,callbackFn:e}){return wo(d,y,k,_,I,e)}};Xn($o);
